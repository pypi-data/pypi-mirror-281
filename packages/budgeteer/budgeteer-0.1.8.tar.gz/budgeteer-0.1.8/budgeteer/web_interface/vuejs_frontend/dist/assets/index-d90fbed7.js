import{c as P,r as U,U as i,F as l,N as e,q as D,P as C,O as T,S as L,_ as V,$ as S,u as s,a0 as W,M as f,s as j,W as y,J as I,b as z,X as R}from"./@vue-de7d3d24.js";import{u as N,c as A}from"./vuex-636235de.js";import{a as B}from"./axios-1df74d48.js";import{c as H,a as q}from"./vue-router-4cd13335.js";import"./bootstrap-85852bd1.js";/* empty css                        */import{u as F,s as J,T as K}from"./vue-toastification-6aa87443.js";import{s as Y,p as G,d as X,a as Q}from"./@formkit-606708a1.js";import{V as Z}from"./vue-tippy-7086acf8.js";/* empty css                 */import{u as x,a as tt}from"./@vueuse-0fe84a4c.js";import"./@popperjs-8746c87e.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))_(c);new MutationObserver(c=>{for(const n of c)if(n.type==="childList")for(const p of n.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&_(p)}).observe(document,{childList:!0,subtree:!0});function v(c){const n={};return c.integrity&&(n.integrity=c.integrity),c.referrerPolicy&&(n.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?n.credentials="include":c.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function _(c){if(c.ep)return;c.ep=!0;const n=v(c);fetch(c.href,n)}})();const et={class:"container"},st={class:"row my-3"},ot={class:"col-md-10 offset-md-1"},nt={class:"card text-center shadow my-3"},at={class:"card-header"},it=e("i",{class:"bi-cash-coin"},null,-1),lt={class:"card-body"},ct={class:"row justify-content-center mt-2"},dt={class:"row justify-content-center mt-2"},rt={class:"input-group"},ut={class:"input-group-prepend"},pt=["disabled","onUpdate:modelValue"],bt=["disabled","onUpdate:modelValue"],_t=e("div",{class:"input-group-append"},[e("span",{class:"input-group-text"}," €")],-1),mt={key:0,class:"input-group-append"},ht=["disabled","onUpdate:modelValue"],gt=e("option",{value:"checking"},"Girokonto",-1),ft=e("option",{value:"savings"},"Sparkonto",-1),vt=[gt,ft],kt={key:1,class:"input-group-append"},$t=["onClick"],yt=e("i",{class:"bi bi-arrow-up"},null,-1),wt=[yt],Vt=["onClick"],Ct=e("i",{class:"bi bi-arrow-down"},null,-1),Dt=[Ct],Bt=["onClick"],St=e("i",{class:"bi bi-trash3"},null,-1),Ut=[St],Mt={key:0,class:"row justify-content-center mt-2"},Tt={__name:"Head",setup(b){const t=N();t.commit("getBalances");const v=P({get(){let n=0;for(let o=0;o<t.state.data.open_transactions.length;o++){let r=parseFloat(t.state.data.open_transactions[o].amount);isNaN(r)||(n+=r)}let p=0;for(let o=0;o<t.state.data.balances.length;o++){let r=parseFloat(t.state.data.balances[o].balance);!isNaN(r)&&t.state.data.balances[o].type==="checking"&&(p+=r)}let m=0;for(let o=0;o<t.state.data.budgets.length;o++)for(let r=0;r<t.state.data.budgets[o].entries.length;r++){let k=parseFloat(t.state.data.budgets[o].entries[r].amount);!isNaN(k)&&_(t.state.data.budgets[o].entries[r])&&(m+=k)}return(p+n+m).toFixed(2)}});function _(n){if(n.booked!==t.state.display_month){let p=new Date,m=new Date("1970-01-01"),o=new Date("2100-01-01");return n.valid_from_to[0]!==null&&(m=new Date(n.valid_from_to[0])),n.valid_from_to[1]!==null&&(o=new Date(n.valid_from_to[1])),p>=m&&p<=o}return!1}const c=U(new Date().toLocaleString("default",{month:"long"}));return(n,p)=>(i(),l("div",et,[e("div",st,[e("div",ot,[e("div",nt,[e("div",at,[e("h1",null,[it,D(" Verfügbar im "+C(c.value)+": "+C(v.value)+" €",1)])]),e("div",lt,[e("div",ct,[e("div",dt,[(i(!0),l(T,null,L(s(t).state.data.balances,(m,o)=>(i(),l("div",{key:m,class:"balance"},[e("div",rt,[e("div",ut,[V(e("input",{disabled:s(t).state.locked,"onUpdate:modelValue":r=>s(t).state.data.balances[o].label=r,class:"form-control"},null,8,pt),[[S,s(t).state.data.balances[o].label]])]),V(e("input",{disabled:s(t).state.locked,"onUpdate:modelValue":r=>s(t).state.data.balances[o].balance=r,type:"number",step:"0.01",class:"form-control"},null,8,bt),[[S,s(t).state.data.balances[o].balance]]),_t,s(t).state.locked?f("",!0):(i(),l("div",mt,[V(e("select",{disabled:s(t).state.locked,"onUpdate:modelValue":r=>s(t).state.data.balances[o].type=r,class:"form-control"},vt,8,ht),[[W,s(t).state.data.balances[o].type]])])),s(t).state.locked?f("",!0):(i(),l("div",kt,[e("button",{class:"btn btn-outline-primary",type:"button",onClick:r=>s(t).state.data.balances.splice(o-1,0,s(t).state.data.balances.splice(o,1)[0])},wt,8,$t),e("button",{class:"btn btn-outline-primary",type:"button",onClick:r=>s(t).state.data.balances.splice(o+1,0,s(t).state.data.balances.splice(o,1)[0])},Dt,8,Vt),e("button",{class:"btn btn-outline-danger",type:"button",onClick:r=>s(t).state.data.balances.splice(o,1)},Ut,8,Bt)]))])]))),128)),s(t).state.locked?f("",!0):(i(),l("div",Mt,[e("button",{class:"btn btn-outline-primary",type:"button",onClick:p[0]||(p[0]=m=>s(t).state.data.balances.push({label:"",amount:""}))}," Konto hinzufügen ")]))])])])])])])]))}};const Nt={class:"text-center"},Kt={id:"offcanvasBottomSettings","aria-labelledby":"offcanvasBottomSettingsLabel",class:"offcanvas offcanvas-bottom",tabindex:"-1"},Et=e("div",{class:"offcanvas-header"},[e("h3",{id:"offcanvasBottomSettingsLabel",class:"offcanvas-title"},[e("i",{class:"bi bi-gear"}),D(" Einstellungen")]),e("button",{"aria-label":"Close",class:"btn-close text-reset","data-bs-dismiss":"offcanvas",type:"button"})],-1),Lt={class:"offcanvas-body"},Ft={key:0},Ot={key:1,id:"accordionSettings",class:"accordion"},Pt={key:0},Wt={key:0,class:"spinner-border spinner-border-sm",role:"status"},jt={key:1,class:"bi bi-save"},It={key:1,class:"btn btn-dark disabled"},zt=e("span",{class:"spinner-border spinner-border-sm",role:"status"},null,-1),Rt={__name:"Settings",setup(b){const t=N(),v=F();function _(){c.value=!0,B.post("api/settings/",t.state.settings).then(function(){console.log("Einstellungen gespeichert! Neustart des BudgeTeers wird dringend empfohlen!"),v.success("Einstellungen gespeichert! Neustart des BudgeTeers wird dringend empfohlen!"),t.commit("getSettings"),c.value=!1},function(){t.commit("getSettings"),c.value=!1,console.log("Konnte Einstellungen nicht speichern! Bitte die angegebenen Werte auf Richtigkeit prüfen."),v.error("Konnte Einstellungen nicht speichern! Bitte die angegebenen Werte auf Richtigkeit prüfen.")})}const c=U(!1),n=P(()=>t.state.settings.general.auth_hash.length>0);function p(){Y("settings")}return(m,o)=>{const r=j("FormKit");return i(),l("div",Nt,[e("div",Kt,[Et,e("div",Lt,[s(t).state.misc.loaded_settings?f("",!0):(i(),l("h4",Ft,"Einstellungen werden geladen...")),s(t).state.misc.loaded_settings?(i(),l("div",Ot,[y(r,{id:"settings",actions:!1,"incomplete-message":"Es müssen alle Felder korrekt ausgefüllt werden! Fehler sind rot markiert.","messages-class":"text-danger mt-4",type:"form",onSubmit:o[4]||(o[4]=k=>_())},{default:I(({value:k})=>[s(t).state.misc.docker?f("",!0):(i(),l("div",Pt,[y(r,{modelValue:s(t).state.settings.general.port,"onUpdate:modelValue":o[0]||(o[0]=d=>s(t).state.settings.general.port=d),help:"Hier den Port des Webservers wählen.","help-class":"text-muted","input-class":"form-control bg-light mb-2",label:"Port","messages-class":"text-danger","outer-class":"mb-4",placeholder:"Bspw. 9090",type:"number",validation:"required|between:1024,65535","validation-visibility":"live"},null,8,["modelValue"])])),y(r,{modelValue:s(t).state.settings.general.prefix,"onUpdate:modelValue":o[1]||(o[1]=d=>s(t).state.settings.general.prefix=d),help:"Hier den Prefix des Webservers wählen (nützlich für Reverse-Proxies).","help-class":"text-muted","input-class":"form-control bg-light mb-2",label:"Prefix","messages-class":"text-danger","outer-class":"mb-4",placeholder:"Bspw. budgeteer",type:"text",validation:"alpha","validation-visibility":"live"},null,8,["modelValue"]),y(r,{modelValue:s(t).state.settings.general.auth_user,"onUpdate:modelValue":o[2]||(o[2]=d=>s(t).state.settings.general.auth_user=d),validation:k.auth_hash?"required":"",help:"Hier den Nutzernamen für BudgeTeer eingeben.","help-class":"text-muted","input-class":"form-control bg-light mb-2",label:"Nutzername","messages-class":"text-danger",name:"auth_user","outer-class":"mb-4",placeholder:"Bspw. rix1337",type:"text"},null,8,["modelValue","validation"]),y(r,{modelValue:s(t).state.settings.general.auth_hash,"onUpdate:modelValue":o[3]||(o[3]=d=>s(t).state.settings.general.auth_hash=d),validation:n.value&&k.auth_user?"required|length:6":"",help:"Hier das Passwort für BudgeTeer angeben.","help-class":"text-muted","input-class":"form-control bg-light mb-2",label:"Passwort","messages-class":"text-danger",name:"auth_hash","outer-class":"mb-4",placeholder:"Bspw. ●●●●●●●●",type:"password","validation-visibility":"live"},null,8,["modelValue","validation"])]),_:1})])):f("",!0),e("div",null,[s(t).state.misc.loaded_settings?(i(),l("button",{key:0,class:"btn btn-primary mt-4",type:"submit",onClick:p},[c.value?(i(),l("span",Wt)):f("",!0),c.value?f("",!0):(i(),l("i",jt)),D(" Speichern ")])):(i(),l("button",It,[zt,D(" Lädt... ")]))])])])])}}},At={class:"container"},Ht={class:"row my-3"},qt={class:"col-md-10 offset-md-1"},Jt={class:"card text-center shadow my-3"},Yt=e("div",{class:"card-header"},[e("h1",null,[e("i",{class:"bi bi-clock-history"}),D(" Offene Transaktionen ")])],-1),Gt={class:"card-body"},Xt={class:"row justify-content-center mt-2"},Qt={class:"input-group"},Zt={class:"input-group-prepend"},xt=["disabled","onUpdate:modelValue"],te=["disabled","onUpdate:modelValue"],ee=e("div",{class:"input-group-append"},[e("span",{class:"input-group-text"}," €")],-1),se={key:0,class:"input-group-append"},oe=["onClick"],ne=e("i",{class:"bi bi-arrow-up"},null,-1),ae=[ne],ie=["onClick"],le=e("i",{class:"bi bi-arrow-down"},null,-1),ce=[le],de={class:"input-group-append"},re=["onClick"],ue=e("i",{class:"bi bi-trash3"},null,-1),pe=[ue],be={class:"row justify-content-center mt-2"},_e={__name:"Transactions",setup(b){const t=N();return t.commit("getOpenTransactions"),(v,_)=>(i(),l("div",At,[e("div",Ht,[e("div",qt,[e("div",Jt,[Yt,e("div",Gt,[e("div",Xt,[(i(!0),l(T,null,L(s(t).state.data.open_transactions,(c,n)=>(i(),l("div",{key:c,class:"transaction"},[e("div",Qt,[e("div",Zt,[V(e("input",{disabled:s(t).state.locked,"onUpdate:modelValue":p=>s(t).state.data.open_transactions[n].label=p,class:"form-control"},null,8,xt),[[S,s(t).state.data.open_transactions[n].label]])]),V(e("input",{disabled:s(t).state.locked,"onUpdate:modelValue":p=>s(t).state.data.open_transactions[n].amount=p,type:"number",step:"0.01",class:"form-control"},null,8,te),[[S,s(t).state.data.open_transactions[n].amount]]),ee,s(t).state.locked?f("",!0):(i(),l("div",se,[e("button",{class:"btn btn-outline-primary",type:"button",onClick:p=>s(t).state.data.open_transactions.splice(n-1,0,s(t).state.data.open_transactions.splice(n,1)[0])},ae,8,oe),e("button",{class:"btn btn-outline-primary",type:"button",onClick:p=>s(t).state.data.open_transactions.splice(n+1,0,s(t).state.data.open_transactions.splice(n,1)[0])},ce,8,ie)])),e("div",de,[e("button",{class:"btn btn-outline-danger",type:"button",onClick:p=>s(t).state.data.open_transactions.splice(n,1)&&s(t).commit("setModifiedWhileLocked",!0)},pe,8,re)])])]))),128)),e("div",be,[s(t).state.locked?f("",!0):(i(),l("button",{key:0,class:"btn btn-outline-primary",type:"button",onClick:_[0]||(_[0]=c=>s(t).state.data.open_transactions.push({label:"",amount:""}))}," Transaktion hinzufügen "))])])])])])])]))}},me={class:"col-md-auto p-1"},he=e("i",{class:"bi bi-arrow-left"},null,-1),ge=[he],fe={key:0},ve={key:1},ke=e("i",{class:"bi bi-arrow-right"},null,-1),$e=[ke],O={__name:"DatePicker",props:{title:String,modelValue:String},emits:["update:modelValue"],setup(b,{emit:t}){const v=b,_=U(v.modelValue);function c(p){_.value===null&&(_.value=new Date().toLocaleDateString("en-CA",{year:"numeric",month:"2-digit"}));const m=new Date(_.value);m.setMonth(m.getMonth()+p),m.setDate(1);const o=m.toLocaleDateString("en-CA",{year:"numeric",month:"2-digit"});_.value=o,t("update:modelValue",o)}function n(){_.value=null,t("update:modelValue",null)}return(p,m)=>(i(),l("div",me,[e("button",{class:"btn btn-outline-primary",type:"button",onClick:m[0]||(m[0]=o=>c(-1))},ge),D(C(v.title)+" ",1),b.modelValue!==null?(i(),l("span",fe,C(b.modelValue),1)):(i(),l("span",ve,"∞ ")),e("button",{class:"btn btn-outline-primary",type:"button",onClick:m[1]||(m[1]=o=>c(1))},$e),e("button",{class:"btn btn-outline-secondary",onClick:n}," ∞ ")]))}},ye={class:"container"},we={class:"row my-3"},Ve={class:"col-md-10 offset-md-1"},Ce={class:"card text-center shadow my-3"},De={class:"card-header"},Be=e("i",{class:"bi bi-receipt-cutoff"},null,-1),Se=["disabled"],Ue=e("i",{class:"bi bi-arrow-left"},null,-1),Me=[Ue],Te=["disabled"],Ne=e("i",{class:"bi bi-arrow-right"},null,-1),Ke=[Ne],Ee=e("div",{class:"col-md-auto p-1"},null,-1),Le={class:"card-body"},Fe={class:"row justify-content-center mt-2"},Oe={class:"accordion",id:"accordionBudgets"},Pe=["id"],We=["data-bs-target","aria-controls"],je=["data-bs-target","aria-controls"],Ie=["onUpdate:modelValue"],ze=["onClick"],Re=e("i",{class:"bi bi-trash3"},null,-1),Ae=[Re],He=["id","aria-labelledby"],qe={class:"accordion-body"},Je={key:0,class:"input-group"},Ye={class:"input-group-prepend"},Ge=["disabled","onUpdate:modelValue"],Xe=["disabled","onUpdate:modelValue"],Qe=e("div",{class:"input-group-append"},[e("span",{class:"input-group-text"}," €")],-1),Ze={key:0,class:"input-group-append"},xe=["onClick"],ts=e("i",{class:"bi bi-x"},null,-1),es=[ts],ss=["onClick"],os=e("i",{class:"bi bi-arrow-up"},null,-1),ns=[os],as=["onClick"],is=e("i",{class:"bi bi-arrow-down"},null,-1),ls=[is],cs=["onClick"],ds=e("i",{class:"bi bi-trash3"},null,-1),rs=[ds],us={key:1,class:"input-group-append"},ps=["disabled","onUpdate:modelValue"],bs=e("option",{value:"monthly"},"Monatlich",-1),_s=e("option",{value:"weekly"},"Wöchentlich",-1),ms=e("option",{value:"yearly"},"Jährlich",-1),hs=e("option",{value:"one-time"},"Einmalig",-1),gs=[bs,_s,ms,hs],fs={class:"input-group-append"},vs=["onClick"],ks=e("i",{class:"bi bi-check"},null,-1),$s=[ks],ys=["onClick"],ws={class:"row justify-content-center mt-2"},Vs={__name:"Budgets",setup(b){const t=N();t.commit("getBudgets");function v(d){return parseFloat(d).toFixed(2)}function _(d){let u=0;for(let h=0;h<t.state.data.budgets[d].entries.length;h++)if(m(t.state.data.budgets[d].entries[h])){let a=parseFloat(t.state.data.budgets[d].entries[h].amount);isNaN(a)||(u+=a)}return v(u)}function c(){let d=new Date(t.state.display_month),u=new Date;return d.getMonth()===u.getMonth()&&d.getFullYear()===u.getFullYear()}const n=U(0);function p(d){n.value+=d;let u=new Date().setMonth(new Date().getMonth()+n.value);t.commit("setDisplayMonth",new Date(u).toISOString().slice(0,7))}function m(d){return c()?!k(d)&&r(d):r(d)}function o(d){return t.state.locked&&c()?!k(d)&&r(d):r(d)}function r(d){let u=new Date(t.state.display_month),h=new Date("1970-01-01"),a=new Date("2100-01-01");return d.valid_from_to[0]!==null&&(h=new Date(d.valid_from_to[0])),d.valid_from_to[1]!==null&&(a=new Date(d.valid_from_to[1])),u>=h&&u<=a}function k(d){return d.booked===t.state.display_month}return(d,u)=>(i(),l("div",ye,[e("div",we,[e("div",Ve,[e("div",Ce,[e("div",De,[e("h1",null,[Be,D(" Budgets "+C(s(t).state.display_month)+" ",1),e("button",{disabled:n.value<=0,class:"btn btn-outline-primary m-1",type:"button",onClick:u[0]||(u[0]=h=>p(-1))},Me,8,Se),e("button",{disabled:n.value>=13,class:"btn btn-outline-primary",type:"button",onClick:u[1]||(u[1]=h=>p(1))},Ke,8,Te)]),Ee]),e("div",Le,[e("div",Fe,[e("div",Oe,[(i(!0),l(T,null,L(s(t).state.data.budgets,(h,a)=>(i(),l("div",{key:h,class:"accordion-item"},[e("h2",{class:"accordion-header",id:"heading"+a},[s(t).state.locked?(i(),l("button",{key:0,class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapse"+a,"aria-expanded":"false","aria-controls":"collapse"+a},C(s(t).state.data.budgets[a].category)+": "+C(_(a))+" € ",9,We)):(i(),l("button",{key:1,class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapse"+a,"aria-expanded":"false","aria-controls":"collapse"+a},[V(e("input",{type:"text",class:"form-control",placeholder:"Kategorie","onUpdate:modelValue":w=>s(t).state.data.budgets[a].category=w},null,8,Ie),[[S,s(t).state.data.budgets[a].category]]),e("button",{class:"btn btn-outline-danger",type:"button",onClick:w=>s(t).state.data.budgets.splice(a,1)&&s(t).commit("setModifiedWhileLocked",!0)},Ae,8,ze)],8,je))],8,Pe),e("div",{id:"collapse"+a,class:"accordion-collapse collapse","aria-labelledby":"heading"+a,"data-bs-parent":"#accordionBudgets"},[e("div",qe,[(i(!0),l(T,null,L(s(t).state.data.budgets[a].entries,(w,g)=>(i(),l("div",{key:w},[o(s(t).state.data.budgets[a].entries[g])?(i(),l("div",Je,[e("div",Ye,[V(e("input",{disabled:s(t).state.locked,"onUpdate:modelValue":$=>s(t).state.data.budgets[a].entries[g].label=$,class:"form-control"},null,8,Ge),[[S,s(t).state.data.budgets[a].entries[g].label]])]),V(e("input",{disabled:s(t).state.locked,"onUpdate:modelValue":$=>s(t).state.data.budgets[a].entries[g].amount=$,type:"number",step:"0.01",class:"form-control"},null,8,Xe),[[S,s(t).state.data.budgets[a].entries[g].amount]]),Qe,s(t).state.locked?f("",!0):(i(),l("div",Ze,[c()&&k(s(t).state.data.budgets[a].entries[g])?(i(),l("button",{key:0,class:"btn btn-outline-danger",type:"button",onClick:$=>s(t).state.data.budgets[a].entries[g].booked=""},es,8,xe)):f("",!0),e("button",{class:"btn btn-outline-primary",type:"button",onClick:$=>s(t).state.data.budgets[a].entries.splice(g-1,0,s(t).state.data.budgets[a].entries.splice(g,1)[a])},ns,8,ss),e("button",{class:"btn btn-outline-primary",type:"button",onClick:$=>s(t).state.data.budgets[a].entries.splice(g+1,0,s(t).state.data.budgets[a].entries.splice(g,1)[a])},ls,8,as),e("button",{class:"btn btn-outline-danger",type:"button",onClick:$=>s(t).state.data.budgets[a].entries.splice(g,1)},rs,8,cs),s(t).state.locked?f("",!0):(i(),l("div",us,[V(e("select",{disabled:s(t).state.locked,"onUpdate:modelValue":$=>s(t).state.data.budgets[a].entries[g].type=$,class:"form-control"},gs,8,ps),[[W,s(t).state.data.budgets[a].entries[g].type]])])),y(O,{title:"von",modelValue:s(t).state.data.budgets[a].entries[g].valid_from_to[0],"onUpdate:modelValue":$=>s(t).state.data.budgets[a].entries[g].valid_from_to[0]=$},null,8,["modelValue","onUpdate:modelValue"]),y(O,{title:"bis",modelValue:s(t).state.data.budgets[a].entries[g].valid_from_to[1],"onUpdate:modelValue":$=>s(t).state.data.budgets[a].entries[g].valid_from_to[1]=$},null,8,["modelValue","onUpdate:modelValue"])])),e("div",fs,[c()&&s(t).state.locked&&!k(s(t).state.data.budgets[a].entries[g])?(i(),l("button",{key:0,class:"btn btn-outline-success",type:"button",onClick:$=>{s(t).commit("setModifiedWhileLocked",!0),s(t).state.data.budgets[a].entries[g].booked=s(t).state.display_month}},$s,8,vs)):f("",!0)])])):f("",!0)]))),128)),s(t).state.locked?f("",!0):(i(),l("button",{key:0,class:"btn btn-outline-primary",type:"button",onClick:w=>s(t).state.data.budgets[a].entries.push({label:"",amount:"",valid_from_to:[null,null],booked:""})}," Eintrag hinzufügen ",8,ys))])],8,He)]))),128))]),e("div",ws,[s(t).state.locked?f("",!0):(i(),l("button",{key:0,class:"btn btn-outline-primary",type:"button",onClick:u[2]||(u[2]=h=>s(t).state.data.budgets.push({category:"Kategorie",amount:"",entries:[]}))}," Kategorie hinzufügen "))])])])])])])]))}},Cs={__name:"_Main",setup(b){return(t,v)=>(i(),l("main",null,[y(Tt),y(_e),y(Vs),y(Rt)]))}},Ds=H({history:q(),routes:[{path:"/:pathMatch(.*)*",component:Cs}]});const Bs={id:"footer"},Ss={class:"container text-center"},Us={class:"text-bg-dark credit"},Ms=e("a",{href:"https://github.com/rix1337/BudgeTeer/",target:"_blank",rel:"noopener noreferrer"},"RiX",-1),Ts={class:"sticky-bottom float-end"},Ns={class:"col-md-auto p-1"},Ks=e("i",{class:"bi bi-save"},null,-1),Es=[Ks],Ls=e("i",{class:"bi bi-unlock"},null,-1),Fs=[Ls],Os=e("i",{class:"bi bi-lock"},null,-1),Ps=[Os],Ws={key:0,class:"bi bi-sun"},js={key:1,class:"bi bi-moon-stars"},Is=e("i",{class:"bi bi-gear"},null,-1),zs=[Is],Rs={__name:"App",setup(b){const t=x(),v=tt(t),_=N(),c=F();function n(u){B.post("api/json/"+u+"/",_.state.data[u]).then(function(){console.log(u+" gespeichert.")},function(){console.log("Konnte "+u+" nicht speichern!"),c.error("Konnte "+u+" nicht speichern!")})}function p(){n("balances"),n("budgets"),n("open_transactions"),_.commit("setLocked",!0),_.commit("setModifiedWhileLocked",!1)}z(()=>{k(),setInterval(k,300*1e3)});function m(){window.open("https://github.com/rix1337/BudgeTeer/releases/latest","_blank")}const o=U(""),r=U(!1);function k(){B.get("api/version/").then(function(u){o.value=u.data.version.ver,console.info("%c BudgeTeer %c ".concat(o.value," "),"color: white; background: #303030; font-weight: 700; font-size: 24px; font-family: Monospace;","color: #303030; background: white; font-weight: 700; font-size: 24px; font-family: Monospace;"),console.info("%c ❤ Projekt unterstützen %c ".concat("https://github.com/sponsors/rix1337 ❤"," "),"color: white; background: #dc3545; font-weight: 700;","color: #dc3545; background: white; font-weight: 700;"),r.value=u.data.version.update_ready,_.commit("setDocker",u.data.version.docker),r.value&&(d("BudgeTeer - Update verfügbar! - "),console.log("Update steht bereit! Weitere Informationen unter https://github.com/rix1337/BudgeTeer/releases/latest"),c.info(`Update steht bereit! Weitere Informationen unter:
https://github.com/rix1337/BudgeTeer/releases/latest`,{timeout:15e3,onClick:m}))},function(){console.log("Konnte Version nicht abrufen!"),c.error("Konnte Version nicht abrufen!")})}function d(u){document.title=u,setTimeout(function(){d(u.substr(1)+u.substr(0,1))},200)}return(u,h)=>{const a=j("router-view");return i(),l(T,null,[y(a),e("div",Bs,[e("div",Ss,[e("p",Us,[D("BudgeTeer "+C(o.value)+" by ",1),Ms])])]),e("div",Ts,[e("div",Ns,[s(_).state.modified_while_locked?(i(),l("button",{key:0,class:"btn btn-outline-warning bg-dark m-1",type:"button",onClick:h[0]||(h[0]=w=>p())},Es)):s(_).state.locked?(i(),l("button",{key:1,class:"btn btn-outline-success bg-dark m-1",type:"button",onClick:h[1]||(h[1]=w=>s(_).commit("setLocked",!1))},Fs)):(i(),l("button",{key:2,class:"btn btn-outline-danger bg-dark m-1",type:"button",onClick:h[2]||(h[2]=w=>p())},Ps)),e("button",{type:"button",class:"btn btn-outline-secondary bg-dark text-warning m-1",onClick:h[3]||(h[3]=w=>s(v)())},[s(t)?(i(),l("i",Ws)):(i(),l("i",js))]),e("button",{"aria-controls":"offcanvasBottomSettings",class:"btn btn-outline-primary bg-dark m-1","data-bs-target":"#offcanvasBottomSettings","data-bs-toggle":"offcanvas",type:"button",onClick:h[4]||(h[4]=w=>s(_).commit("getSettings"))},zs)])])],64)}}},E=F(),As=A({state(){return{data:{balances:[],open_transactions:[],budgets:[]},display_month:new Date().toISOString().slice(0,7),locked:!0,modified_while_locked:!1,settings:{},misc:{loaded_settings:!1,docker:!1}}},mutations:{setDisplayMonth(b,t){b.display_month=t},getSettings(b){B.get("api/settings/").then(function(t){b.settings=t.data.settings,b.misc.loaded_settings=!0},function(){console.log("Konnte Einstellungen nicht abrufen!"),E.error("Konnte Einstellungen nicht abrufen!")})},getBalances(b){B.get("api/json/balances/").then(function(t){b.data.balances=t.data.balances},function(){console.log("Konnte Kontostände nicht abrufen!"),E.error("Konnte Kontostände nicht abrufen!")})},getOpenTransactions(b){B.get("api/json/open_transactions/").then(function(t){b.data.open_transactions=t.data.open_transactions},function(){console.log("Konnte offene Transaktionen nicht abrufen!"),E.error("Konnte offene Transaktionen nicht abrufen!")})},getBudgets(b){B.get("api/json/budgets/").then(function(t){b.data.budgets=t.data.budgets},function(){console.log("Konnte Budgets nicht abrufen!"),E.error("Konnte Budgets nicht abrufen!")})},setDocker(b,t){b.misc.docker=t},setLocked(b,t){b.locked=t},setModifiedWhileLocked(b,t){b.modified_while_locked=t}}}),M=R(Rs);M.use(As);M.use(Ds);M.use(J,{position:"top-center",draggable:!1,maxToasts:1,bodyClassName:["toast-body"],toastDefaults:{[K.ERROR]:{icon:"bi bi-exclamation-triangle"},[K.WARNING]:{icon:"bi bi-exclamation-circle"},[K.INFO]:{icon:"bi bi-info-circle"},[K.SUCCESS]:{icon:"bi bi-check-circle-fill",timeout:3e3}}});M.use(Z);M.use(G,X({locales:{de:Q},locale:"de"}));M.mount("#app");
