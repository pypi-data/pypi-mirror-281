!function(){function e(r){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(r)}function r(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function t(r,t,n){return(t=function(r){var t=function(r,t){if("object"!==e(r)||null===r)return r;var n=r[Symbol.toPrimitive];if(void 0!==n){var a=n.call(r,t||"default");if("object"!==e(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(r)}(r,"string");return"symbol"===e(t)?t:String(t)}(t))in r?Object.defineProperty(r,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[t]=n,r}function n(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */n=function(){return t};var r,t={},a=Object.prototype,o=a.hasOwnProperty,i=Object.defineProperty||function(e,r,t){e[r]=t.value},l="function"==typeof Symbol?Symbol:{},u=l.iterator||"@@iterator",s=l.asyncIterator||"@@asyncIterator",c=l.toStringTag||"@@toStringTag";function d(e,r,t){return Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}),e[r]}try{d({},"")}catch(r){d=function(e,r,t){return e[r]=t}}function f(e,r,t,n){var a=r&&r.prototype instanceof y?r:y,o=Object.create(a.prototype),l=new A(n||[]);return i(o,"_invoke",{value:j(e,t,l)}),o}function m(e,r,t){try{return{type:"normal",arg:e.call(r,t)}}catch(e){return{type:"throw",arg:e}}}t.wrap=f;var v="suspendedStart",p="suspendedYield",b="executing",h="completed",g={};function y(){}function _(){}function w(){}var k={};d(k,u,(function(){return this}));var x=Object.getPrototypeOf,z=x&&x(x(q([])));z&&z!==a&&o.call(z,u)&&(k=z);var O=w.prototype=y.prototype=Object.create(k);function E(e){["next","throw","return"].forEach((function(r){d(e,r,(function(e){return this._invoke(r,e)}))}))}function L(r,t){function n(a,i,l,u){var s=m(r[a],r,i);if("throw"!==s.type){var c=s.arg,d=c.value;return d&&"object"==e(d)&&o.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,l,u)}),(function(e){n("throw",e,l,u)})):t.resolve(d).then((function(e){c.value=e,l(c)}),(function(e){return n("throw",e,l,u)}))}u(s.arg)}var a;i(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,a){n(e,r,t,a)}))}return a=a?a.then(o,o):o()}})}function j(e,t,n){var a=v;return function(o,i){if(a===b)throw new Error("Generator is already running");if(a===h){if("throw"===o)throw i;return{value:r,done:!0}}for(n.method=o,n.arg=i;;){var l=n.delegate;if(l){var u=C(l,n);if(u){if(u===g)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===v)throw a=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=b;var s=m(e,t,n);if("normal"===s.type){if(a=n.done?h:p,s.arg===g)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(a=h,n.method="throw",n.arg=s.arg)}}}function C(e,t){var n=t.method,a=e.iterator[n];if(a===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=r,C(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var o=m(a,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,g;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=r),t.delegate=null,g):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,g)}function P(e){var r={tryLoc:e[0]};1 in e&&(r.catchLoc=e[1]),2 in e&&(r.finallyLoc=e[2],r.afterLoc=e[3]),this.tryEntries.push(r)}function S(e){var r=e.completion||{};r.type="normal",delete r.arg,e.completion=r}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function q(t){if(t||""===t){var n=t[u];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,i=function e(){for(;++a<t.length;)if(o.call(t,a))return e.value=t[a],e.done=!1,e;return e.value=r,e.done=!0,e};return i.next=i}}throw new TypeError(e(t)+" is not iterable")}return _.prototype=w,i(O,"constructor",{value:w,configurable:!0}),i(w,"constructor",{value:_,configurable:!0}),_.displayName=d(w,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var r="function"==typeof e&&e.constructor;return!!r&&(r===_||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,d(e,c,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},E(L.prototype),d(L.prototype,s,(function(){return this})),t.AsyncIterator=L,t.async=function(e,r,n,a,o){void 0===o&&(o=Promise);var i=new L(f(e,r,n,a),o);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},E(O),d(O,c,"Generator"),d(O,u,(function(){return this})),d(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var r=Object(e),t=[];for(var n in r)t.push(n);return t.reverse(),function e(){for(;t.length;){var n=t.pop();if(n in r)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=q,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&o.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=r)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,a){return l.type="throw",l.arg=e,t.next=n,a&&(t.method="next",t.arg=r),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],l=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=o.call(i,"catchLoc"),s=o.call(i,"finallyLoc");if(u&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,r){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=r&&r<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=r,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(i)},complete:function(e,r){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&r&&(this.next=r),g},finish:function(e){for(var r=this.tryEntries.length-1;r>=0;--r){var t=this.tryEntries[r];if(t.finallyLoc===e)return this.complete(t.completion,t.afterLoc),S(t),g}},catch:function(e){for(var r=this.tryEntries.length-1;r>=0;--r){var t=this.tryEntries[r];if(t.tryLoc===e){var n=t.completion;if("throw"===n.type){var a=n.arg;S(t)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:q(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=r),g}},t}function a(e,r,t,n,a,o,i){try{var l=e[o](i),u=l.value}catch(s){return void t(s)}l.done?r(u):Promise.resolve(u).then(n,a)}function o(e){return function(){var r=this,t=arguments;return new Promise((function(n,o){var i=e.apply(r,t);function l(e){a(i,n,o,l,u,"next",e)}function u(e){a(i,n,o,l,u,"throw",e)}l(void 0)}))}}System.register(["vue","./sentry-legacy.5.0.2.dev21639.js","./_commonjsHelpers-legacy.5.0.2.dev21639.js"],(function(e,a){"use strict";var i,l,u,s,c,d,f,m,v,p,b,h,g,y,_,w,k,x,z,O,E,L,j,C,P,S,A,q,M,T,R,N,B,V,D,I,H,G,F,Y,U,W,J,$,Z,K,Q,X,ee,re,te,ne,ae,oe,ie,le,ue,se,ce,de,fe,me,ve;return{setters:[function(e){i=e.defineComponent,l=e.resolveComponent,u=e.openBlock,s=e.createElementBlock,c=e.createElementVNode,d=e.normalizeClass,f=e.createCommentVNode,m=e.createVNode,v=e.withCtx,p=e.createTextVNode,b=e.toDisplayString,h=e.unref,g=e.ref,y=e.onMounted,_=e.Fragment,w=e.renderList,k=e.createBlock,x=e.renderSlot,z=e.watchEffect,O=e.Teleport,E=e.withModifiers,L=e.computed,j=e.createApp},function(e){C=e._,P=e.c,S=e.i,A=e.E,q=e.b,M=e.q,T=e.v,R=e.aA,N=e.e,B=e.a,V=e.j,D=e.J,I=e.a8,H=e.aB,G=e.aC,F=e.aD,Y=e.aE,U=e.af,W=e.aF,J=e.aG,$=e.aH,Z=e.aI,K=e.aJ,Q=e.d,X=e.aK,ee=e.al,re=e.aL,te=e.aM,ne=e.aq,ae=e.am,oe=e.at,ie=e.au,le=e.ag,ue=e.av,se=e.V,ce=e.aN,de=e.aO,fe=e.aw,me=e.ax,ve=e.ay},null],execute:function(){var e=document.createElement("style");e.textContent=".fr-sidemenu__link[data-v-6240fbee]{padding:.25rem .375rem}.fr-sidemenu__link[aria-current][data-v-6240fbee]:before{width:0}.fr-sidemenu__link[data-v-6240fbee]:has(>[aria-current]){border-radius:2px;background-color:var(--background-alt-grey);color:var(--text-default-grey);font-weight:800}.fr-sidemenu__link[data-v-6240fbee]:has(>[aria-current]):hover{background-color:var(--background-alt-grey-hover)}.fr-sidemenu__link[data-v-6240fbee]:has(>[aria-current]):active{background-color:var(--background-alt-grey-active)}.fr-sidemenu__btn[data-v-02c4027f]{background-color:var(--background-alt-grey);border-bottom:1px solid var(--border-default-grey)}.fr-sidemenu__btn[data-v-02c4027f]:hover{background-color:var(--background-alt-grey-hover)}.fr-sidemenu__btn[data-v-02c4027f]:active{background-color:var(--background-alt-grey-active)}.fr-sidemenu__btn[aria-current][data-v-02c4027f]{background-color:var(--background-default-grey);color:var(--text-default-grey)}.fr-sidemenu__btn[aria-current][data-v-02c4027f]:before{width:0}.fr-sidemenu__btn[aria-current][data-v-02c4027f]:hover{background-color:var(--hover-tint)}.fr-sidemenu__btn[aria-current][data-v-02c4027f]:active{background-color:var(--active-tint)}html,body{height:100%}#app{display:flex;flex-direction:column;height:100%}.fr-sidemenu .fr-sidemenu__item:first-child:before,.fr-sidemenu .fr-sidemenu__item:last-child:before,.fr-sidemenu .fr-sidemenu__item:before{box-shadow:none}.fr-sidemenu[data-v-b1b3ed4f]{padding:0}.fr-sidemenu .fr-sidemenu__inner[data-v-b1b3ed4f]{padding:0;box-shadow:1px 0 0 0 var(--border-default-grey);background-color:var(--grey-1000-50)}@media (min-width: 48em){.fr-sidemenu[data-v-b1b3ed4f],.fr-sidemenu__inner[data-v-b1b3ed4f]{height:100%}}\n",document.head.appendChild(e);var a,pe={class:"fr-sidemenu__item"},be=["innerHTML"],he=C(i({__name:"AdminSidebarLink",props:{label:{},icon:{},iconHtml:{},to:{}},setup:function(e){return function(e,r){var t=l("router-link");return u(),s("li",pe,[c("div",{class:d([{"fr-icon-svg fr-icon--sm":e.iconHtml},"fr-enlarge-link fr-sidemenu__link fr-mb-1w"])},[e.iconHtml?(u(),s("div",{key:0,class:"fr-mr-1w fr-grid-row",innerHTML:e.iconHtml},null,8,be)):e.icon?(u(),s("div",{key:1,class:d([e.icon,"fr-mr-1w fr-icon--sm"]),"aria-hidden":"true"},null,2)):f("",!0),m(t,{to:e.to},{default:v((function(){return[p(b(e.label),1)]})),_:1},8,["to"])],2)])}}}),[["__scopeId","data-v-6240fbee"]]),ge=["aria-expanded","aria-controls","aria-current"],ye={class:"logo logo--sm"},_e={class:"fr-mx-1w fr-col text-overflow-ellipsis"},we=["id"],ke={class:"fr-sidemenu__list fr-mx-1w fr-my-3v"},xe=i({__name:"AdminSidebarOrganizationMenu",props:{organization:{},isOpened:{type:Boolean}},setup:function(e){var r=P().t,t=S("organization-menu");return function(e,n){return u(),s("li",{class:d(["fr-sidemenu__item",{"fr-sidemenu__item--active":e.isOpened}])},[c("button",{class:"fr-sidemenu__btn","aria-expanded":e.isOpened,"aria-controls":h(t),"aria-current":e.isOpened},[c("div",ye,[m(A,{type:"organization",src:e.organization.logo_thumbnail,size:20},null,8,["src"])]),c("p",_e,b(e.organization.name),1)],8,ge),c("div",{class:"fr-collapse","data-fr-js-collapse":"",id:h(t)},[c("ul",ke,[m(he,{iconHtml:h('<svg width="24" height="24" stroke-width="1.5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M5 12V18C5 18 5 21 12 21C19 21 19 18 19 18V12" stroke="currentColor" stroke-width="1.5"/>\n<path d="M5 6V12C5 12 5 15 12 15C19 15 19 12 19 12V6" stroke="currentColor" stroke-width="1.5"/>\n<path d="M12 3C19 3 19 6 19 6C19 6 19 9 12 9C5 9 5 6 5 6C5 6 5 3 12 3Z" stroke="currentColor" stroke-width="1.5"/>\n</svg>\n'),label:h(r)("Datasets"),to:{name:"organization-datasets",params:{oid:e.organization.id}}},null,8,["iconHtml","label","to"]),m(he,{icon:"fr-icon-line-chart-line",label:h(r)("Reuses"),to:{name:"organization-reuses",params:{oid:e.organization.id}}},null,8,["label","to"]),m(he,{icon:"fr-icon-parent-line",label:h(r)("Members"),to:{name:"organization-members",params:{oid:e.organization.id}}},null,8,["label","to"]),m(he,{icon:"fr-icon-user-line",label:h(r)("Profile"),to:{name:"organization-profile",params:{oid:e.organization.id}}},null,8,["label","to"])])],8,we)],2)}}}),ze=C(xe,[["__scopeId","data-v-02c4027f"]]);function Oe(){return q(),a||(a=M.get(T("me/")).then((function(e){return e.data})))}var Ee={class:"fr-container--fluid h-100"},Le={class:"fr-grid-row h-100 bg-grey-50"},je={class:"fr-col-12 fr-col-md-4 fr-col-lg-3 fr-col-xl-2"},Ce=["aria-label"],Pe={class:"fr-sidemenu__inner"},Se=["aria-controls"],Ae=["id"],qe={class:"fr-sidemenu__list"},Me={class:"fr-sidemenu__item"},Te=["aria-controls"],Re={class:"fr-mx-1v"},Ne=["id"],Be={class:"fr-col-12 fr-col-md-8 fr-col-lg-9 fr-col-xl-10 h-100 fr-px-2w"},Ve=i({__name:"Admin",setup:function(e){var r=P().t,t=R(),a=S("menu"),i=S("profil-submenu"),d=g(null),v=g(null);return y(o(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oe();case 2:d.value=e.sent,d.value.organizations.length>0&&(t.params.oid?v.value=t.params.oid:v.value=d.value.organizations[0].id);case 4:case"end":return e.stop()}}),e)})))),function(e,n){var o=l("router-view");return u(),s("div",Ee,[c("div",Le,[c("div",je,[c("nav",{class:"fr-sidemenu","aria-label":h(r)("Administration menu")},[c("div",Pe,[c("button",{class:"fr-sidemenu__btn",hidden:"","aria-controls":h(a),"aria-expanded":"false"},b(h(r)("Open menu")),9,Se),c("div",{class:"fr-collapse",id:h(a)},[c("ul",qe,[c("li",Me,[c("button",{class:"fr-sidemenu__btn border-bottom border-default-grey","aria-expanded":"false","aria-controls":h(i)},[m(N,{user:h(B),size:24,rounded:!0},null,8,["user"]),c("p",Re,b(h(r)("My Profil")),1)],8,Te),c("div",{class:"fr-collapse",id:h(i)},[m(he,{icon:"fr-icon-account-circle-line",label:h(r)("Me"),to:"/me"},null,8,["label"])],8,Ne)]),d.value?(u(!0),s(_,{key:0},w(d.value.organizations,(function(e){return u(),k(ze,{organization:e,"is-opened":(r=e.id,r===v.value)},null,8,["organization","is-opened"]);var r})),256)):f("",!0)])],8,Ae)])],8,Ce)]),c("div",Be,[(u(),k(o,{key:h(t).fullPath}))])])])}}}),De=C(Ve,[["__scopeId","data-v-b1b3ed4f"]]),Ie=["aria-label"],He={class:"fr-breadcrumb__list"},Ge={__name:"Breadcrumb",setup:function(e){var r=P().t;return function(e,t){return u(),s("nav",{rol:"navigation","aria-label":h(r)("You're here:"),class:"fr-breadcrumb fr-mb-5v"},[c("ol",He,[x(e.$slots,"default")])],8,Ie)}}},Fe={class:"fr-container--fluid"},Ye={key:0},Ue={class:"fr-breadcrumb__link","aria-current":"page"},We={class:"fr-alert fr-alert--info"},Je={class:"fr-alert__title"},$e=i({__name:"Datasets",props:{oid:{}},setup:function(e){var r=P().t,t=e,a="/admin/organization/".concat(t.oid,"/"),i=g(null),d=g(null);return y(o(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oe();case 2:return e.abrupt("return",i.value=e.sent);case 3:case"end":return e.stop()}}),e)})))),z((function(){var e,r;d.value=null!==(e=null===(r=i.value)||void 0===r?void 0:r.organizations.find((function(e){return e.id===t.oid})))&&void 0!==e?e:null})),function(e,t){var n=l("router-link");return u(),s("div",Fe,[m(Ge,null,{default:v((function(){return[c("li",null,[m(n,{class:"fr-breadcrumb__link",to:"/"},{default:v((function(){return[p(b(h(r)("Administration")),1)]})),_:1})]),d.value?(u(),s("li",Ye,[m(n,{class:"fr-breadcrumb__link",to:"/"},{default:v((function(){return[p(b(d.value.name),1)]})),_:1})])):f("",!0),c("li",null,[c("a",Ue,b(h(r)("Datasets")),1)])]})),_:1}),c("div",We,[c("h3",Je,b(h(r)("This is a WIP page")),1),c("p",null,[c("a",{href:a},b(h(r)("You can manage your datasets on the current admin.")),1)])])])}}}),Ze={class:"fr-container--fluid"},Ke={key:0},Qe={class:"fr-breadcrumb__link","aria-current":"page"},Xe={class:"fr-alert fr-alert--info"},er={class:"fr-alert__title"},rr=i({__name:"Reuses",props:{oid:{}},setup:function(e){var r=P().t,t=e,a="/admin/organization/".concat(t.oid,"/"),i=g(null),d=g(null);return y(o(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oe();case 2:return e.abrupt("return",i.value=e.sent);case 3:case"end":return e.stop()}}),e)})))),z((function(){var e,r;d.value=null!==(e=null===(r=i.value)||void 0===r?void 0:r.organizations.find((function(e){return e.id===t.oid})))&&void 0!==e?e:null})),function(e,t){var n=l("router-link");return u(),s("div",Ze,[m(Ge,null,{default:v((function(){return[c("li",null,[m(n,{class:"fr-breadcrumb__link",to:"/"},{default:v((function(){return[p(b(h(r)("Administration")),1)]})),_:1})]),d.value?(u(),s("li",Ke,[m(n,{class:"fr-breadcrumb__link",to:"/"},{default:v((function(){return[p(b(d.value.name),1)]})),_:1})])):f("",!0),c("li",null,[c("a",Qe,b(h(r)("Reuses")),1)])]})),_:1}),c("div",Xe,[c("h3",er,b(h(r)("This is a WIP page")),1),c("p",null,[c("a",{href:a},b(h(r)("You can manage your reuses on the current admin.")),1)])])])}}}),tr={class:"fr-container--fluid"},nr={class:"fr-breadcrumb__link","aria-current":"page"},ar={key:0,class:"fr-h1"},or={class:"fr-alert fr-alert--info"},ir={class:"fr-alert__title"},lr={href:"/admin/me/"},ur=i({__name:"Me",setup:function(e){var r=P().t,t=g(null);return y(o(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oe();case 2:return e.abrupt("return",t.value=e.sent);case 3:case"end":return e.stop()}}),e)})))),function(e,n){var a=l("router-link");return u(),s("div",tr,[m(Ge,null,{default:v((function(){return[c("li",null,[m(a,{class:"fr-breadcrumb__link",to:"/"},{default:v((function(){return[p(b(h(r)("Administration")),1)]})),_:1})]),c("li",null,[c("a",nr,b(h(r)("Me")),1)])]})),_:1}),t.value?(u(),s("h1",ar,b(t.value.first_name)+" "+b(t.value.last_name),1)):f("",!0),c("div",or,[c("h3",ir,b(h(r)("This is a WIP page")),1),c("p",null,[c("a",lr,b(h(r)("You can edit your profil on the current admin.")),1)])])])}}}),sr={class:"fr-grid-row fr-grid-row--gutters fr-grid-row--middle"},cr=i({__name:"AdminDangerZone",setup:function(e){return function(e,r){return u(),k(h(V),{color:"error",type:"secondary",weight:"regular"},{default:v((function(){return[c("div",sr,[x(e.$slots,"default")])]})),_:3})}}}),dr={class:"fr-mt-n9v fr-mb-2w"},fr={class:"fr-badge fr-badge--info fr-badge--no-icon"},mr=c("span",{class:"fr-icon-user-add-line","aria-hidden":"true"},null,-1),vr={class:"fr-grid-row fr-grid-row--gutters fr-grid-row--middle"},pr={class:"fr-col"},br={class:"fr-grid-row fr-grid-row--middle"},hr={class:"fr-ml-3v fr-mt-1-5v fr-mb-0 filet filet-default-grey fr-text--sm"},gr={key:0,class:"fr-col-auto fr-grid-row flex-direction-column"},yr=["disabled"],_r=["disabled","aria-controls"],wr=["aria-labelledby","id"],kr={class:"fr-container fr-container--fluid fr-container-md"},xr={class:"fr-grid-row fr-grid-row--center"},zr={class:"fr-col-12 fr-col-md-8"},Or={class:"fr-modal__body"},Er={class:"fr-modal__header"},Lr=["title","aria-controls"],jr={class:"fr-modal__content"},Cr=["id"],Pr={class:"fr-grid-row fr-grid-row--gutters fr-grid-row--right"},Sr={class:"fr-col-auto"},Ar=["disabled"],qr={class:"fr-col-auto"},Mr=["disabled"],Tr=i({__name:"MembershipRequest",props:{loading:{type:Boolean},oid:{},request:{},showActions:{type:Boolean}},emits:["accept","refuse"],setup:function(e,r){var t=r.emit,n=e,a=t,o=P().t,i=g(""),d=S("modal"),y=S("modalTitle");function _(){var e=document.getElementById(d);globalThis.dsfr(e).modal.conceal()}function w(){a("refuse",n.request.id,i.value),_()}function x(){i.value="",_()}return function(e,r){var t=l("MembershipRequest",!0);return u(),k(D,{class:"drop-shadow rounded-xxs fr-mt-3w"},{default:v((function(){return[c("div",dr,[c("p",fr,[mr,p(" "+b(h(o)("Membership Request")),1)])]),c("div",vr,[c("div",pr,[c("div",br,[m(N,{class:"fr-mr-1v",user:e.request.user,rounded:!0,size:24},null,8,["user"]),p(" "+b(h(o)("{fullName} asks to join the organization.",{fullName:e.request.user.first_name+" "+e.request.user.last_name})),1)]),c("div",hr,b(e.request.comment),1)]),e.showActions?(u(),s("div",gr,[c("button",{class:"fr-btn fr-btn--sm fr-btn--icon-left fr-mb-1w fr-icon-check-line",onClick:r[0]||(r[0]=function(r){return e.$emit("accept",e.request.id)}),disabled:e.loading,"data-testid":"accept"},b(h(o)("Accept request")),9,yr),c("button",{class:"fr-btn fr-btn--icon-left fr-btn--sm fr-btn--secondary fr-btn--secondary--error fr-icon-close-line",disabled:e.loading,"data-fr-opened":"false","aria-controls":h(d),"data-testid":"refuse"},b(h(o)("Refuse")),9,_r),(u(),k(O,{to:"body"},[c("dialog",{"aria-labelledby":h(y),role:"dialog",id:h(d),class:"fr-modal","data-testid":"modal"},[c("div",kr,[c("div",xr,[c("div",zr,[c("div",Or,[c("div",Er,[c("button",{class:"fr-btn--close fr-btn",title:h(o)("Close the modal dialog"),"aria-controls":h(d),onClick:E(x,["prevent"])},b(h(o)("Close")),9,Lr)]),c("div",jr,[c("h1",{id:h(y),class:"fr-modal__title fr-mb-2w"},b(h(o)("Refuse membership request")),9,Cr),m(t,{class:"fr-mt-4w fr-mb-2w",loading:!1,oid:e.oid,request:e.request,"show-actions":!1},null,8,["oid","request"]),c("form",{onSubmit:E(w,["prevent"]),onReset:x},[m(I,{label:h(o)("You can provide the refusal reason:"),modelValue:i.value,"onUpdate:modelValue":r[1]||(r[1]=function(e){return i.value=e}),"data-testid":"comment-group"},null,8,["label","modelValue"]),c("div",Pr,[c("div",Sr,[c("button",{class:"fr-btn fr-btn--secondary fr-btn--secondary-grey-500",type:"reset",disabled:e.loading,"data-testid":"cancel-modal-button"},b(h(o)("Cancel")),9,Ar)]),c("div",qr,[c("button",{class:"fr-btn",type:"submit",disabled:e.loading,"data-testid":"refuse-modal-button"},b(h(o)("Refuse request")),9,Mr)])])],32)])])])])])],8,wr)]))])):f("",!0)])]})),_:1})}}}),Rr={key:0},Nr=c("li",null,null,-1),Br={class:"fr-h1 fr-mb-2w"},Vr={class:"subtitle subtitle--uppercase"},Dr={class:"subtitle subtitle--uppercase fr-mt-2w fr-mb-1v"},Ir={class:"fr-table fr-table--layout-fixed"},Hr={scope:"col"},Gr={scope:"col"},Fr={key:0,scope:"col"},Yr={class:"fr-badge"},Ur={key:0},Wr=["aria-controls"],Jr=["aria-labelledby","id"],$r={class:"fr-container fr-container--fluid fr-container-md"},Zr={class:"fr-grid-row fr-grid-row--center"},Kr={class:"fr-col-12 fr-col-md-8"},Qr={class:"fr-modal__body"},Xr={class:"fr-modal__header"},et=["title","aria-controls"],rt={class:"fr-modal__content"},tt=["id"],nt={class:"fr-grid-row fr-grid-row--middle fr-text--bold fr-mb-2w"},at=["onSubmit"],ot={class:"fr-col"},it={class:"fr-col-auto"},lt=["disabled"],ut={class:"fr-col"},st={class:"fr-m-0 text-grey-500"},ct={class:"fr-m-0 fr-text--xs text-default-error"},dt={class:"fr-col-auto"},ft=["disabled","onClick"],mt=i({__name:"Members",props:{oid:{}},setup:function(e){var a=e,i=P().t,d=Q().toast,x=g([]),j=L((function(){return H||A.value.some((function(e){var r;return e.user.id===(null===(r=B)||void 0===r?void 0:r.id)&&"admin"===e.role}))})),C=g([]),S={name:"SomeName"},A=g([]),q=g(!1);function M(e){return"fr-modal-user-"+e}function T(e){return"fr-modal-title-user-"+e}function R(e){var r=document.getElementById(M(e));globalThis.dsfr(r).modal.conceal()}function V(){return(V=o(n().mark((function e(r){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.newRole){e.next=3;break}return R(r.user.id),e.abrupt("return");case 3:return e.prev=3,q.value=!0,e.next=7,W(a.oid,r.user.id,r.newRole);case 7:X(),R(r.user.id),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),d.error(i("An error occurred while updating the member role."));case 14:return e.prev=14,q.value=!1,e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[3,11,14,17]])})))).apply(this,arguments)}function D(){return(D=o(n().mark((function e(r){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,q.value=!0,e.next=4,J(a.oid,r.user.id);case 4:X(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),d.error(i("An error occurred while removing this member."));case 10:return e.prev=10,q.value=!1,e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[0,7,10,13]])})))).apply(this,arguments)}function I(e){return C.value.map((function(n){var a=function(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?r(Object(a),!0).forEach((function(r){t(e,r,a[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))}))}return e}({},n);return a.value===e&&(a.selected=!0),a}))}function X(){return ee.apply(this,arguments)}function ee(){return(ee=o(n().mark((function e(){var r;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$(a.oid);case 2:r=e.sent,A.value=r.members;case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function re(){return te.apply(this,arguments)}function te(){return(te=o(n().mark((function e(){var r;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G(a.oid);case 2:r=e.sent,x.value=r;case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ne(e){return ae.apply(this,arguments)}function ae(){return(ae=o(n().mark((function e(r){var t;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return q.value=!0,t=[],e.prev=2,e.next=5,Z(a.oid,r);case 5:t.push(re()),t.push(X()),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),d.error(i("An error occurred while accepting this membership."));case 12:return e.prev=12,Promise.all(t).finally((function(){return q.value=!1})),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[2,9,12,15]])})))).apply(this,arguments)}function oe(e,r){return ie.apply(this,arguments)}function ie(){return(ie=o(n().mark((function e(r,t){var o;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return q.value=!0,o=[],e.prev=2,e.next=5,K(a.oid,r,t);case 5:o.push(re()),o.push(X()),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),d.error(i("An error occurred while refusing this membership."));case 12:return e.prev=12,Promise.all(o).finally((function(){return q.value=!1})),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[2,9,12,15]])})))).apply(this,arguments)}return z((function(){j.value&&G(a.oid).then((function(e){return x.value=e}))})),y((function(){F().then(Y).then((function(e){return C.value=e})),X()})),function(e,r){var t=l("router-link");return u(),s("div",null,[m(Ge,null,{default:v((function(){return[c("li",null,[m(t,{class:"fr-breadcrumb__link",to:"/"},{default:v((function(){return[p(b(h(i)("Administration")),1)]})),_:1})]),S?(u(),s("li",Rr,[m(t,{class:"fr-breadcrumb__link",to:"/"},{default:v((function(){return[p(b(S.name),1)]})),_:1})])):f("",!0),Nr]})),_:1}),c("h1",Br,b(h(i)("Members")),1),x.value.length?(u(),s(_,{key:0},[c("h2",Vr,b(h(i)("{n} requests",{n:x.value.length})),1),(u(!0),s(_,null,w(x.value,(function(r){return u(),k(Tr,{class:"fr-mb-4w",key:r.id,loading:q.value,oid:e.oid,request:r,"show-actions":!0,onAccept:ne,onRefuse:oe},null,8,["loading","oid","request"])})),128))],64)):f("",!0),c("h2",Dr,b(h(i)("{n} members",{n:A.value.length})),1),c("div",Ir,[c("table",null,[c("thead",null,[c("tr",null,[c("th",Hr,b(h(i)("Members")),1),c("th",Gr,b(h(i)("Status")),1),j.value?(u(),s("th",Fr,b(h(i)("Action")),1)):f("",!0)])]),c("tbody",null,[(u(!0),s(_,null,w(A.value,(function(e){return u(),s("tr",{key:e.user.id},[c("td",null,b(e.user.first_name)+" "+b(e.user.last_name),1),c("td",null,[c("p",Yr,b((r=e.role,null!==(t=null===(n=C.value.find((function(e){return e.value===r})))||void 0===n?void 0:n.label)&&void 0!==t?t:r)),1)]),j.value?(u(),s("td",Ur,[c("button",{class:"fr-btn fr-btn--sm fr-btn--tertiary-no-outline fr-icon-pencil-line","data-fr-opened":"false","aria-controls":M(e.user.id)},b(h(i)("Edit")),9,Wr),(u(),k(O,{to:"body"},[c("dialog",{"aria-labelledby":T(e.user.id),role:"dialog",id:M(e.user.id),class:"fr-modal"},[c("div",$r,[c("div",Zr,[c("div",Kr,[c("div",Qr,[c("div",Xr,[c("button",{class:"fr-btn--close fr-btn",title:h(i)("Close the modal dialog"),"aria-controls":M(e.user.id)},b(h(i)("Close")),9,et)]),c("div",rt,[c("h1",{id:T(e.user.id),class:"fr-modal__title fr-mb-2w"},b(h(i)("Edit member")),9,tt),c("p",nt,[m(N,{class:"fr-mr-1v",user:e.user,rounded:!0,size:24},null,8,["user"]),p(" "+b(e.user.first_name)+" "+b(e.user.last_name),1)]),c("form",{class:"fr-grid-row fr-grid-row--gutters fr-grid-row--bottom",onSubmit:E((function(r){return function(e){return V.apply(this,arguments)}(e)}),["prevent"])},[c("div",ot,[C.value.length>0?(u(),k(U,{key:0,label:h(i)("Role of the member"),"model-value":e.role,"onUpdate:modelValue":function(r){return e.newRole=r},options:I(e.role)},null,8,["label","model-value","onUpdate:modelValue","options"])):f("",!0)]),c("div",it,[c("button",{class:"fr-btn",type:"submit",disabled:q.value},b(h(i)("Validate")),9,lt)])],40,at),m(cr,{class:"fr-mt-2w"},{default:v((function(){return[c("div",ut,[c("p",st,b(h(i)("Remove member from the organization")),1),c("p",ct,b(h(i)("Be careful, this action can't be reverse.")),1)]),c("div",dt,[c("button",{class:"fr-btn fr-btn--secondary fr-btn--secondary--error fr-btn--icon-left fr-icon-logout-box-r-line",disabled:q.value,onClick:function(r){return function(e){return D.apply(this,arguments)}(e)}},b(h(i)("Remove member")),9,ft)])]})),_:2},1024)])])])])])],8,Jr)]))])):f("",!0)]);var r,t,n})),128))])])])])}}}),vt={class:"fr-container--fluid"},pt={key:0},bt={class:"fr-breadcrumb__link","aria-current":"page"},ht=["id"],gt=["disabled","onClick"],yt={class:"fr-col"},_t={class:"fr-m-0 text-grey-500"},wt={class:"fr-m-0 fr-text--xs text-default-error"},kt={class:"fr-col-auto"},xt=["disabled","aria-controls"],zt=["aria-labelledby","id"],Ot={class:"fr-container fr-container--fluid fr-container-md"},Et={class:"fr-grid-row fr-grid-row--center"},Lt={class:"fr-col-12 fr-col-md-8"},jt={class:"fr-modal__body"},Ct={class:"fr-modal__header"},Pt=["title","aria-controls"],St={class:"fr-modal__content"},At=["id"],qt={class:"fr-text--bold"},Mt={class:"fr-modal__footer"},Tt={class:"fr-btns-group fr-btns-group--right fr-btns-group--inline-reverse fr-btns-group--inline-lg fr-btns-group--icon-left"},Rt=["disabled"],Nt=i({__name:"Profile",props:{oid:{}},setup:function(e){var r=P().t,t=Q().toast,a=e,i=X(),d=g(null),_=g(null),w=g(null),x=g([]),E=g(!1),L=S("modal"),j=S("modalTitle");function C(){w.value&&(E.value=!0,re(w.value.id).then((function(){i.replace("/"),window.location.reload()})).catch((function(){return t.error(r("An error occured when deleting the organization."))})).finally((function(){return E.value=!1})))}function A(e,n){E.value=!0,te(e).then((function(){return t.success(r("Organization updated !"))})).catch((function(){return t.error(r("An error occured when updating the organization."))})).finally((function(){return E.value=!1}))}return y(o(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oe();case 2:return e.abrupt("return",d.value=e.sent);case 3:case"end":return e.stop()}}),e)})))),z(o(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$(a.oid);case 2:w.value=e.sent;case 3:case"end":return e.stop()}}),e)})))),function(e,t){var n=l("router-link");return u(),s("div",vt,[m(Ge,null,{default:v((function(){return[c("li",null,[m(n,{class:"fr-breadcrumb__link",to:"/"},{default:v((function(){return[p(b(h(r)("Administration")),1)]})),_:1})]),w.value?(u(),s("li",pt,[m(n,{class:"fr-breadcrumb__link",to:"/"},{default:v((function(){return[p(b(w.value.name),1)]})),_:1})])):f("",!0),c("li",null,[c("a",bt,b(h(r)("Profile")),1)])]})),_:1}),_.value?(u(),s("h2",{key:0,class:"subtitle subtitle--uppercase fr-mb-5v",id:_.value.legend},b(h(r)("Edit profile")),9,ht)):f("",!0),w.value?(u(),k(ee,{key:1,organization:w.value,errors:x.value,showLegend:!1,showWell:!1,ref_key:"form",ref:_,onSubmit:A},{submitButton:v((function(e){var t=e.submit;return[c("button",{class:"fr-btn fr-btn--icon-left fr-icon-save-line",disabled:E.value,"data-testid":"submitButton",onClick:t},b(h(r)("Save")),9,gt)]})),default:v((function(){return[m(cr,{class:"fr-mt-6w"},{default:v((function(){return[c("div",yt,[c("p",_t,b(h(r)("Delete the organization")),1),c("p",wt,b(h(r)("Be careful, this action can't be reverse.")),1)]),c("div",kt,[c("button",{class:"fr-btn fr-btn--secondary fr-btn--secondary--error fr-btn--icon-left fr-icon-delete-line",disabled:E.value,"data-fr-opened":"false","aria-controls":h(L)},b(h(r)("Delete")),9,xt),(u(),k(O,{to:"body"},[c("dialog",{"aria-labelledby":h(j),role:"dialog",id:h(L),class:"fr-modal"},[c("div",Ot,[c("div",Et,[c("div",Lt,[c("div",jt,[c("div",Ct,[c("button",{class:"fr-btn--close fr-btn",title:h(r)("Close the modal dialog"),"aria-controls":h(L)},b(h(r)("Close")),9,Pt)]),c("div",St,[c("h1",{id:h(j),class:"fr-modal__title fr-mb-2w"},b(h(r)("Are you sure you want to delete this organization ?")),9,At),c("p",qt,b(h(r)("This action can't be reverse.")),1),c("p",null,b(h(r)("All content published with this organization will stay online, with the same URL but in an anonymous form, i.e. without being linked to a data producer.")),1),c("p",null,b(h(r)("If you want to delete your published content too, start by deleting the contents before deleting your account.")),1)]),c("div",Mt,[c("div",Tt,[c("button",{class:"fr-btn fr-btn--secondary fr-btn--secondary--error",role:"button",disabled:E.value,onClick:C},b(h(r)("Delete")),9,Rt)])])])])])])],8,zt)]))])]})),_:1})]})),_:1},8,["organization","errors"])):f("",!0)])}}});ne({admin_root:ae,default_lang:oe.global.locale.value,explorable_resources:ie,only_locales:oe.global.locale.value,schema_documentation_url:le,schema_validata_url:ue,show_copy_resource_permalink:!0,title:se});var Bt=[{path:"/me",component:ur},{path:"/organizations/:oid",children:[{path:"datasets",component:$e,props:!0,name:"organization-datasets"},{path:"reuses",component:rr,props:!0,name:"organization-reuses"},{path:"members",component:mt,props:!0,name:"organization-members"},{path:"profile",component:Nt,props:!0,name:"organization-profile"}]}],Vt=ce({history:de(),routes:Bt}),Dt=j(De);fe(Dt),Dt.use(me),Dt.use(ve),Dt.use(oe),Dt.use(Vt),Dt.mount("#admin"),globalThis.dsfr.start(),console.log("JS is injected !")}}}))}();
