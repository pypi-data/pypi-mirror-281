"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[743],{51624:(e,a,i)=>{var n=i(29079),s=i(78434),t=i.n(s),l=i(97598),r=i.n(l),d=i(86326),c=i(35623),u=i(42430),o=i(6423),m=i(30319),f=i(89152),y=i(96478),p=i(49528),g=i(18606);const F=n.Ay.bind(null,{endpoint:"users.user_emails",rules:[{args:["user_id"],converters:{user_id:"IntegerConverter"},defaults:{},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"user",isDynamic:!1},{data:"/",isDynamic:!1},{data:"user_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"emails",isDynamic:!1},{data:"/",isDynamic:!1}]},{args:[],converters:{},defaults:{},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"user",isDynamic:!1},{data:"/",isDynamic:!1},{data:"emails",isDynamic:!1},{data:"/",isDynamic:!1}]}]},"/"),D=n.Ay.bind(null,{endpoint:"users.user_profile_update",rules:[{args:["user_id"],converters:{user_id:"IntegerConverter"},defaults:{},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"user",isDynamic:!1},{data:"/",isDynamic:!1},{data:"user_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"profile",isDynamic:!1},{data:"/",isDynamic:!1}]},{args:[],converters:{},defaults:{},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"user",isDynamic:!1},{data:"/",isDynamic:!1},{data:"profile",isDynamic:!1},{data:"/",isDynamic:!1}]}]},"/");function k(e){let{userId:a,userValues:i,currentAffiliation:n,titles:s,syncedValues:l,lockedFields:r,lockedFieldMessage:c,hasPredefinedAffiliations:k}=e;const b=null!==a?{user_id:a}:{},E=s.map((e=>({key:e.name,value:e.name,text:e.title})));return d.createElement("div",null,d.createElement(u.Form,{onSubmit:async(e,a)=>{const i=(0,f.getChangedValues)(e,a);k?i.affiliation_data&&(i.affiliation=i.affiliation_data.text.trim(),i.affiliation_id=i.affiliation_data.id,delete i.affiliation_data):delete i.affiliation_data;try{await p.indicoAxios.patch(D(b),i)}catch(e){return(0,f.handleSubmitError)(e)}location.reload(),await new Promise((()=>{}))},initialValues:i,initialValuesEqual:t(),subscription:{}},(e=>d.createElement(o.A,{onSubmit:e.handleSubmit},d.createElement(u.Field,{name:"synced_fields",isEqual:t(),render:()=>null}),d.createElement(f.FinalDropdown,{name:"title",options:E,selection:!0,parse:f.parsers.nullIfEmpty,label:y.Translate.string("Title"),placeholder:y.Translate.string("None")}),d.createElement(o.A.Group,{widths:"equal"},d.createElement(m.SyncedFinalInput,{name:"first_name",label:y.Translate.string("First name"),required:!0,syncedValues:l,lockedFields:r,lockedFieldMessage:c}),d.createElement(m.SyncedFinalInput,{name:"last_name",label:y.Translate.string("Last name"),required:!0,syncedValues:l,lockedFields:r,lockedFieldMessage:c})),k?d.createElement(m.SyncedFinalAffiliationDropdown,{name:"affiliation_data",syncName:"affiliation",currentAffiliation:n,syncedValues:l,lockedFields:r,lockedFieldMessage:c}):d.createElement(m.SyncedFinalInput,{name:"affiliation",label:y.Translate.string("Affiliation"),syncedValues:l,lockedFields:r,lockedFieldMessage:c}),d.createElement(m.SyncedFinalTextArea,{name:"address",label:y.Translate.string("Address"),syncedValues:l,lockedFields:r,lockedFieldMessage:c}),d.createElement(m.SyncedFinalInput,{name:"phone",label:y.Translate.string("Phone number"),syncedValues:l,lockedFields:r,lockedFieldMessage:c}),d.createElement(m.SyncedFinalInput,{name:"email",label:y.Translate.string("Email address"),syncedValues:l,lockedFields:r,lockedFieldMessage:c,readOnly:!0},d.createElement(y.Translate,null,"You can manage your email addresses"," ",d.createElement(y.Param,{name:"link",wrapper:d.createElement("a",{href:F(b)})},"here"),".")),(0,g.renderPluginComponents)("user-personal-data-form-inputs",{userValues:i,syncedValues:l,lockedFields:r,lockedFieldMessage:c}),d.createElement(f.FinalSubmitButton,{label:y.Translate.string("Save changes"),className:"submit-button"})))))}k.propTypes={userId:r().number,userValues:r().object.isRequired,currentAffiliation:r().object,titles:r().arrayOf(r().shape({name:r().string.isRequired,title:r().string.isRequired})).isRequired,syncedValues:r().objectOf(r().string).isRequired,lockedFields:r().arrayOf(r().string).isRequired,lockedFieldMessage:r().string.isRequired,hasPredefinedAffiliations:r().bool.isRequired},k.defaultProps={userId:null,currentAffiliation:null},window.setupPersonalDataForm=function(e,a,i,n,s,t,l,r){document.addEventListener("DOMContentLoaded",(()=>{c.render(d.createElement(k,{userId:e,userValues:a,currentAffiliation:i,titles:n,syncedValues:s,lockedFields:t,lockedFieldMessage:l,hasPredefinedAffiliations:r}),document.querySelector("#personal-details-form-container"))}))}}},e=>{e.O(0,[4644,4394,2076],(()=>{return a=51624,e(e.s=a);var a}));e.O()}]);
//# sourceMappingURL=module_users.personal_data.0ae13a74.bundle.js.map