"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6642],{4109:(e,n,t)=>{var r=t(29079),l=t(86326),a=t(35623),s=t(23507),u=t(59865),i=t(77940),o=t(97598),c=t.n(o),m=t(6423),d=t(87597),g=t(57427),p=t(53225),E=t(56237),A=t(89152),h=t(96478),y=t(49528);const f={regex:c().string.isRequired,url:c().string.isRequired},v=r.Ay.bind(null,{endpoint:"events.autolinker_config",rules:[{args:[],converters:{},defaults:{},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"admin",isDynamic:!1},{data:"/",isDynamic:!1},{data:"autolinker",isDynamic:!1},{data:"/",isDynamic:!1},{data:"config",isDynamic:!1}]}]},"/");function C(e){let{regex:n,url:t,onChange:r}=e;function a(e,l){const a={regex:n,url:t};a[e]=l,r(a)}return l.createElement(l.Fragment,null,l.createElement(m.A.Input,{fluid:!0,placeholder:h.Translate.string("Regex Pattern"),value:n,onChange:(e,n)=>{let{value:t}=n;return a("regex",t)}}),l.createElement(m.A.Input,{fluid:!0,placeholder:h.Translate.string("URL with placeholder(s)"),value:t,onChange:(e,n)=>{let{value:t}=n;return a("url",t)}}))}function k(e){let{rules:n,onChange:t}=e;const[r,a]=(0,l.useState)({regex:"",url:""}),[s,u]=(0,l.useState)(null);return l.createElement(l.Fragment,null,s?l.createElement(d.A,{error:!0},s):null,l.createElement(g.A,{className:"events-client-js-components-___AutoLinkerConfig-module__list-segment___Jnra3"},l.createElement(p.A,{divided:!0,relaxed:!0},n.map(((e,r)=>{let{regex:s,url:i}=e;const o=encodeURIComponent(i.replace(/\{(\d+)\}/g,"\\$1")),c=encodeURIComponent(s.replace(/"/g,'\\"'));return l.createElement(p.A.Item,{key:s},l.createElement(p.A.Content,{floated:"right"},l.createElement(E.A,{basic:!0,icon:"share",as:"a",target:"_blank",title:h.Translate.string("Analyze on regex101.com"),href:`https://regex101.com/?flavor=python&regex=${c}&subst=${o}&flags=g`,rel:"noreferrer"}),l.createElement(E.A,{icon:"trash alternate outline",color:"red",title:h.Translate.string("Delete entry"),onClick:()=>{u(null),(async e=>{try{const r=[...n],[l]=r.splice(e,1);await y.indicoAxios.post(v(),{rules:r}),t(r),a(l)}catch(e){(0,y.handleAxiosError)(e)}})(r)}})),l.createElement(p.A.Content,null,l.createElement(p.A.Header,null,s),i))}))),l.createElement(m.A,null,l.createElement(m.A.Group,{widths:"equal",className:"events-client-js-components-___AutoLinkerConfig-module__rule-editor-row___0I6rn"},l.createElement(C,(0,i.A)({},r,{onChange:a})),l.createElement(E.A,{icon:"plus",title:h.Translate.string("Add entry"),onClick:()=>{u(null),(async()=>{try{const e=[...n,r];await y.indicoAxios.post(v(),{rules:e}),t(e),a({regex:"",url:""})}catch(n){var e;null!=n&&null!==(e=n.response)&&void 0!==e&&null!==(e=e.data)&&void 0!==e&&null!==(e=e.error)&&void 0!==e&&e.message?u(n.response.data.error.message):u((0,A.handleSubmissionError)(n).rules)}})()},primary:!0})))))}C.propTypes={regex:c().string.isRequired,url:c().string.isRequired,onChange:c().func.isRequired},k.propTypes={rules:c().arrayOf(c().shape(f)).isRequired,onChange:c().func.isRequired};var _=t(47279),x=t(52379),w=t(94900);function D(e){let{rules:n}=e;const[t,r]=(0,l.useState)("");return l.createElement(g.A,null,l.createElement("h2",null,l.createElement(_.A,{name:"car"}),l.createElement(h.Translate,null,"Test drive")),l.createElement("p",null,l.createElement(h.Translate,null,"You can write some markdown below and see how the above rules are applied")),l.createElement(m.A,null,l.createElement(x.A,{columns:2},l.createElement(x.A.Column,null,l.createElement(m.A.TextArea,{placeholder:h.Translate.string("Write some Markdown here..."),value:t,onChange:(e,n)=>{let{value:t}=n;return(e=>{r(e)})(t)}})),l.createElement(x.A.Column,null,t?l.createElement(g.A,null,l.createElement(w.Markdown,{targetBlank:!0,remarkPlugins:[[w.AutoLinkerPlugin,{rules:n}]]},t)):null))))}D.propTypes={rules:c().arrayOf(c().shape(f)).isRequired};const T=r.Ay.bind(null,{endpoint:"events.autolinker_rules",rules:[{args:[],converters:{},defaults:{},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"api",isDynamic:!1},{data:"/",isDynamic:!1},{data:"autolinker-rules",isDynamic:!1}]}]},"/");function R(){const[e,n]=(0,l.useState)(null),{data:t,loading:r}=(0,u.Ku)(T(),{camelize:!0}),a=e||(null==t?void 0:t.rules);return r?l.createElement(s.A,null):l.createElement(l.Fragment,null,l.createElement(k,{rules:a,onChange:n}),l.createElement(D,{rules:a}))}window.setupAutoLinkerConfig=e=>{const n=document.getElementById(e);n&&a.render(l.createElement(R,null),n)}}},e=>{e.O(0,[4644,4394,2076],(()=>{return n=4109,e(e.s=n);var n}));e.O()}]);
//# sourceMappingURL=module_events.admin.7935fe9f.bundle.js.map