"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3489],{83783:(e,i,a)=>{a(42383);var n=a(29079),t=a(97598),s=a.n(t),r=a(86326),o=a(35623),d=a(68820),l=a(89152),c=a(96478),f=a(49528),m=a(24372);const p=n.Ay.bind(null,{endpoint:"persons.update_person",rules:[{args:["event_id","person_id"],converters:{event_id:"IntegerConverter",person_id:"IntegerConverter"},defaults:{},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"manage",isDynamic:!1},{data:"/",isDynamic:!1},{data:"persons",isDynamic:!1},{data:"/",isDynamic:!1},{data:"person_id",isDynamic:!0}]}]},"/");function u(e){let{eventId:i,person:a,hasPredefinedAffiliations:n,replacePersonRow:t}=e;const[s,o]=(0,r.useState)(!1);return r.createElement(r.Fragment,null,r.createElement("a",{className:"i-link icon-edit",title:c.Translate.string("Edit person information"),onClick:()=>o(!0)}),s&&r.createElement(d.PersonDetailsModal,{person:a,hasPredefinedAffiliations:n,hideEmailField:!0,onClose:()=>o(!1),onSubmit:async(e,s)=>{const r=(0,l.getChangedValues)(e,s);let o;n?r.affiliationData&&(r.affiliation=r.affiliationData.text.trim(),r.affiliationId=r.affiliationData.id,delete r.affiliationData):delete r.affiliationData;try{o=await f.indicoAxios.patch(p({event_id:i,person_id:a.id}),(0,m.snakifyKeys)(r))}catch(e){return(0,l.handleSubmitError)(e)}t(o.data.html),await new Promise((()=>{}))}}))}u.propTypes={eventId:s().number.isRequired,person:s().object.isRequired,hasPredefinedAffiliations:s().bool.isRequired,replacePersonRow:s().func.isRequired},window.setupEditEventPerson=(e,i,a)=>{const n=document.querySelector(`#edit-person-${i.id}`);o.render(r.createElement(u,{eventId:e,person:(0,m.camelizeKeys)(i),hasPredefinedAffiliations:a,replacePersonRow:e=>{o.unmountComponentAtNode(n),$(`#person-${i.id}`).html(e)}}),n)}}},e=>{e.O(0,[4644,4394,2076],(()=>{return i=83783,e(e.s=i);var i}));e.O()}]);
//# sourceMappingURL=module_events.persons.75af0cc1.bundle.js.map