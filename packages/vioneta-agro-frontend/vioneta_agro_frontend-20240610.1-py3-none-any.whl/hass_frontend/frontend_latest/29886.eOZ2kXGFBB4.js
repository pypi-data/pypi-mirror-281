export const id=29886;export const ids=[29886];export const modules={29886:(e,t,i)=>{i.a(e,(async(e,n)=>{try{i.r(t);var s=i(62659),o=i(76504),r=i(80792),d=i(18791),a=i(77664),l=i(40068),u=i(3414),c=i(50308),h=e([c]);c=(h.then?(await h)():h)[0];(0,s.A)([(0,d.EM)("hui-conditional-card")],(function(e,t){class n extends t{constructor(...t){super(...t),e(this)}}return{F:n,d:[{kind:"method",static:!0,key:"getConfigElement",value:async function(){return await Promise.all([i.e(27311),i.e(88201),i.e(49774),i.e(47420),i.e(22984),i.e(20593),i.e(38716),i.e(62223),i.e(92717),i.e(23006),i.e(80416),i.e(95997),i.e(65525),i.e(68639),i.e(78340)]).then(i.bind(i,46937)),document.createElement("hui-conditional-card-editor")}},{kind:"method",static:!0,key:"getStubConfig",value:function(){return{type:"conditional",conditions:[],card:{}}}},{kind:"method",key:"setConfig",value:function(e){if(this.validateConfig(e),!e.card)throw new Error("No card configured");this._element=this._createCardElement(e.card)}},{kind:"method",key:"getCardSize",value:function(){return(0,l.Z)(this._element)}},{kind:"method",key:"_createCardElement",value:function(e){const t=(0,c.te)(e);return this.hass&&(t.hass=this.hass),t.addEventListener("ll-rebuild",(t=>{t.stopPropagation(),this._rebuildCard(e)}),{once:!0}),t}},{kind:"method",key:"_rebuildCard",value:function(e){this._element=this._createCardElement(e),this.lastChild&&this.replaceChild(this._element,this.lastChild)}},{kind:"method",key:"setVisibility",value:function(e){const t=this.editMode||e,i=this.hidden;(0,o.A)((0,r.A)(n.prototype),"setVisibility",this).call(this,e),i!==this.hidden&&(0,a.r)(this,"card-visibility-changed",{value:t})}}]}}),u.E);n()}catch(e){n(e)}}))},60368:(e,t,i)=>{i.d(t,{CZ:()=>m,Wx:()=>u,XH:()=>l,db:()=>h,gW:()=>y,lB:()=>f});var n=i(68286),s=i(96516),o=i(55970),r=i(83378);function d(e,t){var i;if((0,o.n)(t)&&e.states[t])return null===(i=e.states[t])||void 0===i?void 0:i.state}function a(e,t){var i;const s=e.entity&&t.states[e.entity]?t.states[e.entity].state:r.Hh;let o=null!==(i=e.state)&&void 0!==i?i:e.state_not;if(Array.isArray(o)){const e=o.map((e=>d(t,e))).filter((e=>void 0!==e));o=[...o,...e]}else if("string"==typeof o){const e=d(t,o);o=[o],e&&o.push(e)}return null!=e.state?(0,n.e)(o).includes(s):!(0,n.e)(o).includes(s)}function l(e,t){return e.every((e=>{if("condition"in e)switch(e.condition){case"screen":return!!(i=e).media_query&&matchMedia(i.media_query).matches;case"user":return function(e,t){var i;return!(!e.users||null===(i=t.user)||void 0===i||!i.id)&&e.users.includes(t.user.id)}(e,t);case"numeric_state":return function(e,t){var i;const n=null===(i=e.entity?t.states[e.entity]:void 0)||void 0===i?void 0:i.state;let s=e.above,o=e.below;var r,a;"string"==typeof s&&(s=null!==(r=d(t,s))&&void 0!==r?r:s),"string"==typeof o&&(o=null!==(a=d(t,o))&&void 0!==a?a:o);const l=Number(n),u=Number(s),c=Number(o);return!isNaN(l)&&(null==e.above||isNaN(u)||u<l)&&(null==e.below||isNaN(c)||c>l)}(e,t);case"and":return function(e,t){return!e.conditions||l(e.conditions,t)}(e,t);case"or":return function(e,t){return!e.conditions||e.conditions.some((e=>l([e],t)))}(e,t);default:return a(e,t)}var i;return a(e,t)}))}function u(e){const t=new Set;for(const r of e)if("numeric_state"===r.condition)"string"==typeof r.above&&(0,o.n)(r.above)&&t.add(r.above),"string"==typeof r.below&&(0,o.n)(r.below)&&t.add(r.below);else if("state"===r.condition){var i,s;[...null!==(i=(0,n.e)(r.state))&&void 0!==i?i:[],...null!==(s=(0,n.e)(r.state_not))&&void 0!==s?s:[]].forEach((e=>{e&&(0,o.n)(e)&&t.add(e)}))}else if("conditions"in r&&r.conditions)return new Set([...t,...u(r.conditions)]);return t}function c(e){return null!=e.entity&&(null!=e.state||null!=e.state_not)}function h(e){return e.every((e=>{if("condition"in e)switch(e.condition){case"screen":return null!=e.media_query;case"user":return function(e){return null!=e.users}(e);case"numeric_state":return function(e){return null!=e.entity&&(null!=e.above||null!=e.below)}(e);case"and":case"or":return function(e){return null!=e.conditions}(e);default:return c(e)}return c(e)}))}function f(e,t){return"conditions"in e&&e.conditions?{...e,conditions:e.conditions.map((e=>f(e,t)))}:"state"===e.condition||"numeric_state"===e.condition?{...e,entity:t}:e}function y(e){return e.reduce(((e,t)=>("conditions"in t&&t.conditions&&e.push(...y(t.conditions)),"screen"===t.condition&&t.media_query&&e.push(t.media_query),e)),[])}function m(e,t){return y(e).map((e=>(0,s.m)(e,(e=>{t(e)}))))}},3414:(e,t,i)=>{i.d(t,{E:()=>u});var n=i(62659),s=i(76504),o=i(80792),r=(i(86176),i(40924)),d=i(18791),a=i(61314),l=i(60368);let u=(0,n.A)([(0,d.EM)("hui-conditional-base")],(function(e,t){class i extends t{constructor(...t){super(...t),e(this)}}return{F:i,d:[{kind:"field",decorators:[(0,d.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,d.MZ)({type:Boolean})],key:"editMode",value:()=>!1},{kind:"field",decorators:[(0,d.wk)()],key:"_config",value:void 0},{kind:"field",key:"_element",value:void 0},{kind:"field",key:"_listeners",value:()=>[]},{kind:"field",key:"_mediaQueries",value:()=>[]},{kind:"method",key:"createRenderRoot",value:function(){return this}},{kind:"method",key:"validateConfig",value:function(e){if(!e.conditions)throw new Error("No conditions configured");if(!Array.isArray(e.conditions))throw new Error("Conditions need to be an array");if(!(0,l.db)(e.conditions))throw new Error("Conditions are invalid");this.lastChild&&this.removeChild(this.lastChild),this._config=e}},{kind:"method",key:"disconnectedCallback",value:function(){(0,s.A)((0,o.A)(i.prototype),"disconnectedCallback",this).call(this),this._clearMediaQueries()}},{kind:"method",key:"connectedCallback",value:function(){(0,s.A)((0,o.A)(i.prototype),"connectedCallback",this).call(this),this._listenMediaQueries(),this._updateVisibility()}},{kind:"method",key:"_clearMediaQueries",value:function(){this._listeners.forEach((e=>e())),this._listeners=[]}},{kind:"method",key:"_listenMediaQueries",value:function(){if(!this._config||!this.hass)return;const e=this._config.conditions.filter((e=>"condition"in e)),t=(0,l.gW)(e);if((0,a.b)(t,this._mediaQueries))return;this._clearMediaQueries();const i=this._config.conditions,n=1===i.length&&"condition"in i[0]&&"screen"===i[0].condition&&!!i[0].media_query;this._listeners=(0,l.CZ)(e,(e=>{n?this.setVisibility(e):this._updateVisibility()}))}},{kind:"method",key:"update",value:function(e){(0,s.A)((0,o.A)(i.prototype),"update",this).call(this,e),(e.has("_element")||e.has("_config")||e.has("hass")||e.has("editMode"))&&(this._listenMediaQueries(),this._updateVisibility())}},{kind:"method",key:"_updateVisibility",value:function(){if(!this._element||!this.hass||!this._config)return;this._element.editMode=this.editMode;const e=(0,l.XH)(this._config.conditions,this.hass);this.setVisibility(e)}},{kind:"method",key:"setVisibility",value:function(e){if(!this._element||!this.hass)return;const t=this.editMode||e;this.hidden!==!t&&(this.toggleAttribute("hidden",!t),this.style.setProperty("display",t?"":"none")),t?(this._element.hass=this.hass,this._element.parentElement||this.appendChild(this._element)):this._element.parentElement&&this.removeChild(this._element)}}]}}),r.mN)}};
//# sourceMappingURL=29886.eOZ2kXGFBB4.js.map