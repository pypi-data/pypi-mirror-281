"use strict";(self.webpackChunkvioneta_agro_frontend=self.webpackChunkvioneta_agro_frontend||[]).push([[7339],{16168:function(e,t,n){var i=n(1781).A,a=n(94881).A;n.a(e,function(){var e=i(a().mark((function e(t,i){var r,l,o,s,u,d,c,h,v,f,p,k,b,m,_,y,g,A,x,M,Z,w,B,C,D,E,q,F,L,I,O,P,V,j,z,S,T,N,W,H,G,R,U,J,K,Q,X,Y,$,ee,te,ne,ie,ae,re,le,oe,se;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r=n(61780),l=n(94881),o=n(1781),s=n(36683),u=n(89231),d=n(29864),c=n(83647),h=n(8364),v=n(6238),f=n(77052),n.n(f),p=n(69466),n.n(p),k=n(4187),n.n(k),b=n(53501),n.n(b),m=n(21950),n.n(m),_=n(36724),n.n(_),y=n(848),n.n(y),g=n(43859),n.n(g),A=n(68113),n.n(A),x=n(84368),n.n(x),M=n(57733),n.n(M),Z=n(34517),n.n(Z),w=n(56262),n.n(w),B=n(66274),n.n(B),C=n(38129),n.n(C),D=n(85038),n.n(D),E=n(85767),n.n(E),q=n(84531),n.n(q),F=n(98168),n.n(F),L=n(22836),n.n(L),I=n(15445),n.n(I),O=n(24483),n.n(O),P=n(13478),n.n(P),V=n(46355),n.n(V),j=n(14612),n.n(j),z=n(53691),n.n(z),S=n(48455),n.n(S),T=n(34290),n.n(T),N=n(8339),n.n(N),W=n(40924),H=n(196),G=n(69760),R=n(45081),U=n(77664),J=n(47038),K=n(38696),Q=n(1169),X=n(51477),Y=n(94027),$=n(72590),ee=n(35641),n(12731),n(39335),n(1683),!(te=t([ee])).then){e.next=91;break}return e.next=87,te;case 87:e.t1=e.sent,e.t0=(0,e.t1)(),e.next=92;break;case 91:e.t0=te;case 92:ee=e.t0[0],re="___ADD_NEW___",le="___NO_LABELS___",oe="___ADD_NEW_SUGGESTION___",se=function(e){return(0,W.qy)(ne||(ne=(0,v.A)(['<ha-list-item graphic="icon" class="','"> '," "," </ha-list-item>"])),(0,G.H)({"add-new":e.label_id===re}),e.icon?(0,W.qy)(ie||(ie=(0,v.A)(['<ha-icon slot="graphic" .icon="','"></ha-icon>'])),e.icon):W.s6,e.name)},(0,h.A)([(0,H.EM)("ha-label-picker")],(function(e,t){var n,i,a=function(t){function n(){var t;(0,u.A)(this,n);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return t=(0,d.A)(this,n,[].concat(a)),e(t),t}return(0,c.A)(n,t),(0,s.A)(n)}(t);return{F:a,d:[{kind:"field",decorators:[(0,H.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,H.MZ)()],key:"label",value:void 0},{kind:"field",decorators:[(0,H.MZ)()],key:"value",value:void 0},{kind:"field",decorators:[(0,H.MZ)()],key:"helper",value:void 0},{kind:"field",decorators:[(0,H.MZ)()],key:"placeholder",value:void 0},{kind:"field",decorators:[(0,H.MZ)({type:Boolean,attribute:"no-add"})],key:"noAdd",value:function(){return!1}},{kind:"field",decorators:[(0,H.MZ)({type:Array,attribute:"include-domains"})],key:"includeDomains",value:void 0},{kind:"field",decorators:[(0,H.MZ)({type:Array,attribute:"exclude-domains"})],key:"excludeDomains",value:void 0},{kind:"field",decorators:[(0,H.MZ)({type:Array,attribute:"include-device-classes"})],key:"includeDeviceClasses",value:void 0},{kind:"field",decorators:[(0,H.MZ)({type:Array,attribute:"exclude-label"})],key:"excludeLabels",value:void 0},{kind:"field",decorators:[(0,H.MZ)({attribute:!1})],key:"deviceFilter",value:void 0},{kind:"field",decorators:[(0,H.MZ)({attribute:!1})],key:"entityFilter",value:void 0},{kind:"field",decorators:[(0,H.MZ)({type:Boolean})],key:"disabled",value:function(){return!1}},{kind:"field",decorators:[(0,H.MZ)({type:Boolean})],key:"required",value:function(){return!1}},{kind:"field",decorators:[(0,H.wk)()],key:"_opened",value:void 0},{kind:"field",decorators:[(0,H.wk)()],key:"_labels",value:void 0},{kind:"field",decorators:[(0,H.P)("ha-combo-box",!0)],key:"comboBox",value:void 0},{kind:"field",key:"_suggestion",value:void 0},{kind:"field",key:"_init",value:function(){return!1}},{kind:"method",key:"open",value:(i=(0,o.A)((0,l.A)().mark((function e(){var t;return(0,l.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.updateComplete;case 2:return e.next=4,null===(t=this.comboBox)||void 0===t?void 0:t.open();case 4:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{kind:"method",key:"focus",value:(n=(0,o.A)((0,l.A)().mark((function e(){var t;return(0,l.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.updateComplete;case 2:return e.next=4,null===(t=this.comboBox)||void 0===t?void 0:t.focus();case 4:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{kind:"method",key:"hassSubscribe",value:function(){var e=this;return[(0,X.o5)(this.hass.connection,(function(t){e._labels=t}))]}},{kind:"field",key:"_getLabels",value:function(){var e=this;return(0,R.A)((function(t,n,i,a,l,o,s,u,d,c,h){var v,f,p={};(l||o||s||u||d)&&(p=(0,Q.g2)(a),v=i,f=a.filter((function(e){return e.labels.length>0})),l&&(v=v.filter((function(e){var t=p[e.id];return!(!t||!t.length)&&p[e.id].some((function(e){return l.includes((0,J.m)(e.entity_id))}))})),f=f.filter((function(e){return l.includes((0,J.m)(e.entity_id))}))),o&&(v=v.filter((function(e){var t=p[e.id];return!t||!t.length||a.every((function(e){return!o.includes((0,J.m)(e.entity_id))}))})),f=f.filter((function(e){return!o.includes((0,J.m)(e.entity_id))}))),s&&(v=v.filter((function(t){var n=p[t.id];return!(!n||!n.length)&&p[t.id].some((function(t){var n=e.hass.states[t.entity_id];return!!n&&(n.attributes.device_class&&s.includes(n.attributes.device_class))}))})),f=f.filter((function(t){var n=e.hass.states[t.entity_id];return n.attributes.device_class&&s.includes(n.attributes.device_class)}))),u&&(v=v.filter((function(e){return u(e)}))),d&&(v=v.filter((function(t){var n=p[t.id];return!(!n||!n.length)&&p[t.id].some((function(t){var n=e.hass.states[t.entity_id];return!!n&&d(n)}))})),f=f.filter((function(t){var n=e.hass.states[t.entity_id];return!!n&&d(n)}))));var k,b,m=t,_=new Set;(v&&(k=v.filter((function(e){return e.area_id})).map((function(e){return e.area_id})),v.forEach((function(e){e.labels.forEach((function(e){return _.add(e)}))}))),f)&&(k=(null!==(b=k)&&void 0!==b?b:[]).concat(f.filter((function(e){return e.area_id})).map((function(e){return e.area_id}))),f.forEach((function(e){e.labels.forEach((function(e){return _.add(e)}))})));return k&&k.forEach((function(e){n[e].labels.forEach((function(e){return _.add(e)}))})),h&&(m=m.filter((function(e){return!h.includes(e.label_id)}))),(v||f)&&(m=m.filter((function(e){return _.has(e.label_id)}))),m.length||(m=[{label_id:le,name:e.hass.localize("ui.components.label-picker.no_match"),icon:null,color:null,description:null}]),c?m:[].concat((0,r.A)(m),[{label_id:re,name:e.hass.localize("ui.components.label-picker.add_new"),icon:"mdi:plus",color:null,description:null}])}))}},{kind:"method",key:"updated",value:function(e){if(!this._init&&this.hass&&this._labels||this._init&&e.has("_opened")&&this._opened){this._init=!0;var t=this._getLabels(this._labels,this.hass.areas,Object.values(this.hass.devices),Object.values(this.hass.entities),this.includeDomains,this.excludeDomains,this.includeDeviceClasses,this.deviceFilter,this.entityFilter,this.noAdd,this.excludeLabels).map((function(e){return Object.assign(Object.assign({},e),{},{strings:[e.label_id,e.name]})}));this.comboBox.items=t,this.comboBox.filteredItems=t}}},{kind:"method",key:"render",value:function(){var e,t=this;return(0,W.qy)(ae||(ae=(0,v.A)([' <ha-combo-box .hass="','" .helper="','" item-value-path="label_id" item-id-path="label_id" item-label-path="name" .value="','" .disabled="','" .required="','" .label="','" .placeholder="','" .renderer="','" @filter-changed="','" @opened-changed="','" @value-changed="','"> </ha-combo-box> '])),this.hass,this.helper,this._value,this.disabled,this.required,void 0===this.label&&this.hass?this.hass.localize("ui.components.label-picker.label"):this.label,this.placeholder?null===(e=this._labels)||void 0===e||null===(e=e.find((function(e){return e.label_id===t.placeholder})))||void 0===e?void 0:e.name:void 0,se,this._filterChanged,this._openedChanged,this._labelChanged)}},{kind:"method",key:"_filterChanged",value:function(e){var t,n=e.target,i=e.detail.value;if(i){var a=(0,K.H)(i,(null===(t=n.items)||void 0===t?void 0:t.filter((function(e){return![le,re].includes(e.label_id)})))||[]);0===a.length?this.noAdd?this.comboBox.filteredItems=[{label_id:le,name:this.hass.localize("ui.components.label-picker.no_match"),icon:null,color:null}]:(this._suggestion=i,this.comboBox.filteredItems=[{label_id:oe,name:this.hass.localize("ui.components.label-picker.add_new_sugestion",{name:this._suggestion}),icon:"mdi:plus",color:null}]):this.comboBox.filteredItems=a}else this.comboBox.filteredItems=this.comboBox.items}},{kind:"get",key:"_value",value:function(){return this.value||""}},{kind:"method",key:"_openedChanged",value:function(e){this._opened=e.detail.value}},{kind:"method",key:"_labelChanged",value:function(e){var t=this;e.stopPropagation();var n,i=e.detail.value;if(i===le)return i="",void this.comboBox.setInputValue("");[oe,re].includes(i)?(e.target.value=this._value,this.hass.loadFragmentTranslation("config"),(0,$.f)(this,{entry:void 0,suggestedName:i===oe?this._suggestion:"",createEntry:(n=(0,o.A)((0,l.A)().mark((function e(n){var i,a;return(0,l.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,X._9)(t.hass,n);case 2:return i=e.sent,a=[].concat((0,r.A)(t._labels),[i]),t.comboBox.filteredItems=t._getLabels(a,t.hass.areas,Object.values(t.hass.devices),Object.values(t.hass.entities),t.includeDomains,t.excludeDomains,t.includeDeviceClasses,t.deviceFilter,t.entityFilter,t.noAdd,t.excludeLabels),e.next=7,t.updateComplete;case 7:return e.next=9,t.comboBox.updateComplete;case 9:return t._setValue(i.label_id),e.abrupt("return",i);case 11:case"end":return e.stop()}}),e)}))),function(e){return n.apply(this,arguments)})}),this._suggestion=void 0,this.comboBox.setInputValue("")):i!==this._value&&this._setValue(i)}},{kind:"method",key:"_setValue",value:function(e){var t=this;this.value=e,setTimeout((function(){(0,U.r)(t,"value-changed",{value:e}),(0,U.r)(t,"change")}),0)}}]}}),(0,Y.E)(W.WF)),i(),e.next=104;break;case 101:e.prev=101,e.t2=e.catch(0),i(e.t2);case 104:case"end":return e.stop()}}),e,null,[[0,101]])})));return function(t,n){return e.apply(this,arguments)}}())},7339:function(e,t,n){var i=n(1781).A,a=n(94881).A;n.a(e,function(){var e=i(a().mark((function e(t,i){var r,l,o,s,u,d,c,h,v,f,p,k,b,m,_,y,g,A,x,M,Z,w,B,C,D,E,q,F,L,I,O,P,V,j,z,S,T,N,W;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r=n(61780),l=n(6238),o=n(94881),s=n(1781),u=n(36683),d=n(89231),c=n(29864),h=n(83647),v=n(8364),f=n(77052),n.n(f),p=n(69466),n.n(p),k=n(53501),n.n(k),b=n(36724),n.n(b),m=n(14460),n.n(m),_=n(848),n.n(_),y=n(68113),n.n(y),g=n(34517),n.n(g),A=n(66274),n.n(A),x=n(85038),n.n(x),M=n(84531),n.n(M),Z=n(98168),n.n(Z),w=n(34290),n.n(w),B=n(40924),C=n(196),D=n(66580),E=n(45081),q=n(16895),F=n(77664),L=n(95507),I=n(51477),O=n(94027),P=n(72590),n(9028),n(2090),V=n(16168),!(j=t([V])).then){e.next=57;break}return e.next=53,j;case 53:e.t1=e.sent,e.t0=(0,e.t1)(),e.next=58;break;case 57:e.t0=j;case 58:V=e.t0[0],(0,v.A)([(0,C.EM)("ha-labels-picker")],(function(e,t){var n,i,a=function(t){function n(){var t;(0,d.A)(this,n);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return t=(0,c.A)(this,n,[].concat(a)),e(t),t}return(0,h.A)(n,t),(0,u.A)(n)}(t);return{F:a,d:[{kind:"field",decorators:[(0,C.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,C.MZ)()],key:"label",value:void 0},{kind:"field",decorators:[(0,C.MZ)({attribute:!1})],key:"value",value:void 0},{kind:"field",decorators:[(0,C.MZ)()],key:"helper",value:void 0},{kind:"field",decorators:[(0,C.MZ)()],key:"placeholder",value:void 0},{kind:"field",decorators:[(0,C.MZ)({type:Boolean,attribute:"no-add"})],key:"noAdd",value:function(){return!1}},{kind:"field",decorators:[(0,C.MZ)({type:Array,attribute:"include-domains"})],key:"includeDomains",value:void 0},{kind:"field",decorators:[(0,C.MZ)({type:Array,attribute:"exclude-domains"})],key:"excludeDomains",value:void 0},{kind:"field",decorators:[(0,C.MZ)({type:Array,attribute:"include-device-classes"})],key:"includeDeviceClasses",value:void 0},{kind:"field",decorators:[(0,C.MZ)({type:Array,attribute:"exclude-label"})],key:"excludeLabels",value:void 0},{kind:"field",decorators:[(0,C.MZ)({attribute:!1})],key:"deviceFilter",value:void 0},{kind:"field",decorators:[(0,C.MZ)({attribute:!1})],key:"entityFilter",value:void 0},{kind:"field",decorators:[(0,C.MZ)({type:Boolean})],key:"disabled",value:function(){return!1}},{kind:"field",decorators:[(0,C.MZ)({type:Boolean})],key:"required",value:function(){return!1}},{kind:"field",decorators:[(0,C.wk)()],key:"_labels",value:void 0},{kind:"field",decorators:[(0,C.P)("ha-label-picker",!0)],key:"labelPicker",value:void 0},{kind:"method",key:"open",value:(i=(0,s.A)((0,o.A)().mark((function e(){var t;return(0,o.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.updateComplete;case 2:return e.next=4,null===(t=this.labelPicker)||void 0===t?void 0:t.open();case 4:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{kind:"method",key:"focus",value:(n=(0,s.A)((0,o.A)().mark((function e(){var t;return(0,o.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.updateComplete;case 2:return e.next=4,null===(t=this.labelPicker)||void 0===t?void 0:t.focus();case 4:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{kind:"method",key:"hassSubscribe",value:function(){var e=this;return[(0,I.o5)(this.hass.connection,(function(t){var n={};t.forEach((function(e){n[e.label_id]=e})),e._labels=n}))]}},{kind:"field",key:"_sortedLabels",value:function(){return(0,E.A)((function(e,t,n){return null==e?void 0:e.map((function(e){return null==t?void 0:t[e]})).sort((function(e,t){return(0,L.x)((null==e?void 0:e.name)||"",(null==t?void 0:t.name)||"",n)}))}))}},{kind:"method",key:"render",value:function(){var e=this,t=this._sortedLabels(this.value,this._labels,this.hass.locale.language);return(0,B.qy)(z||(z=(0,l.A)([" ",' <ha-label-picker .hass="','" .helper="','" .disabled="','" .required="','" .label="','" .placeholder="','" .excludeLabels="','" @value-changed="','"> </ha-label-picker> '])),null!=t&&t.length?(0,B.qy)(S||(S=(0,l.A)(["<ha-chip-set> "," </ha-chip-set>"])),(0,D.u)(t,(function(e){return null==e?void 0:e.label_id}),(function(t){var n=null!=t&&t.color?(0,q.M)(t.color):void 0;return(0,B.qy)(T||(T=(0,l.A)([' <ha-input-chip .item="','" @remove="','" @click="','" .label="','" selected="selected" style="','"> '," </ha-input-chip> "])),t,e._removeItem,e._openDetail,null==t?void 0:t.name,n?"--color: ".concat(n):"",null!=t&&t.icon?(0,B.qy)(N||(N=(0,l.A)(['<ha-icon slot="icon" .icon="','"></ha-icon>'])),t.icon):B.s6)}))):B.s6,this.hass,this.helper,this.disabled,this.required,void 0===this.label&&this.hass?this.hass.localize("ui.components.label-picker.add_label"):this.label,this.placeholder,this.value,this._labelChanged)}},{kind:"get",key:"_value",value:function(){return this.value||[]}},{kind:"method",key:"_removeItem",value:function(e){var t=e.currentTarget.item;this._setValue(this._value.filter((function(e){return e!==t.label_id})))}},{kind:"method",key:"_openDetail",value:function(e){var t,n=this,i=e.currentTarget.item;(0,P.f)(this,{entry:i,updateEntry:(t=(0,s.A)((0,o.A)().mark((function e(t){var a;return(0,o.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,I.Rp)(n.hass,i.label_id,t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})})}},{kind:"method",key:"_labelChanged",value:function(e){e.stopPropagation();var t=e.detail.value;t&&!this._value.includes(t)&&(this._setValue([].concat((0,r.A)(this._value),[t])),this.labelPicker.value="")}},{kind:"method",key:"_setValue",value:function(e){var t=this;this.value=e,setTimeout((function(){(0,F.r)(t,"value-changed",{value:e}),(0,F.r)(t,"change")}),0)}},{kind:"field",static:!0,key:"styles",value:function(){return(0,B.AH)(W||(W=(0,l.A)(["ha-chip-set{margin-bottom:8px}ha-input-chip{--md-input-chip-selected-container-color:var(--color, var(--grey-color));--ha-input-chip-selected-container-opacity:0.5}"])))}}]}}),(0,O.E)(B.WF)),i(),e.next=66;break;case 63:e.prev=63,e.t2=e.catch(0),i(e.t2);case 66:case"end":return e.stop()}}),e,null,[[0,63]])})));return function(t,n){return e.apply(this,arguments)}}())}}]);
//# sourceMappingURL=7339.RNm9vKFID1o.js.map