(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7705],{79257:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/groups",function(){return n(7277)}])},7277:function(e,r,n){"use strict";n.r(r);var t=n(85893);n(67294);var i=n(19803),u=function(){return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(i.Z,{})})};r.default=u},19803:function(e,r,n){"use strict";n.d(r,{Z:function(){return G}});var t=n(47568),i=n(10092),u=n(85893),l=n(69397),s=n(4592),a=n(21987),c=n(13614),o=n(37858),d=n(75921),h=n(98102),f=n(58439),p=n(37645),v=n(64666),x=n(91894),Z=n(35713),g=n(11163),j=n(67294),m=n(46291),_=n(87357),b=n(66489);function w(e){var r,n=e.currentGroup,l=void 0===n?"":n,p=e.excludeList,v=void 0===p?[]:p,x=e.selectCallback,Z=void 0===x?function(){return null}:x,g=(0,j.useState)([]),w=g[0],C=g[1],G=(0,j.useState)(!1),y=G[0],N=G[1],k=(0,m.rt)(),S=(r=(0,t.Z)(function(){var e,r=arguments;return(0,i.__generator)(this,function(n){return e=r.length>0&&void 0!==r[0]?r[0]:null,Z&&e&&(N(!0),Z(e)),[2]})}),function(){return r.apply(this,arguments)});return(0,j.useEffect)((0,t.Z)(function(){var e,r;return(0,i.__generator)(this,function(r){switch(r.label){case 0:return N(!0),[4,k.getGroups()];case 1:return(e=r.sent())&&(v.push(l),C(e.filter(function(e){return!v.includes(e)}))),N(!1),[2]}})}),[]),(0,u.jsx)(u.Fragment,{children:y?(0,u.jsx)(_.Z,{sx:{display:"flex",justifyContent:"center"},children:(0,u.jsx)(b.Z,{})}):(0,u.jsx)(s.Z,{component:a.Z,children:(0,u.jsxs)(c.Z,{sx:{minWidth:300},"aria-label":"Embedded Group Table",children:[(0,u.jsx)(o.Z,{children:(0,u.jsx)(d.Z,{children:(0,u.jsx)(h.Z,{children:"Name"})})}),(0,u.jsx)(f.Z,{children:null==w?void 0:w.map(function(e,r){return(0,u.jsx)(d.Z,{onClick:function(){return S(e)},style:{cursor:"pointer"},hover:!0,children:(0,u.jsx)(h.Z,{children:e})},r)})})]})})})}var C=n(62232);function G(e){var r,n,_,b=e.embeddedMode,G=void 0!==b&&b,y=e.selectCallback,N=void 0===y?function(){return null}:y,k=e.roleNameProp,S=void 0===k?"":k,E=e.groupNameProp,P=void 0===E?"":E,F=(0,g.useRouter)(),T=(0,j.useState)(!1),A=T[0],M=T[1],W=(0,j.useState)(""),I=W[0],L=W[1],O=(0,j.useState)(""),R=O[0],X=O[1],B=(0,j.useState)([]),D=B[0],q=B[1],z=(0,m.rt)(),H=function(){L(""),X(""),M(!0)},J=function(){M(!1),L("")},K=(r=(0,t.Z)(function(){var e,r=arguments;return(0,i.__generator)(this,function(n){switch(n.label){case 0:if(e=r.length>0&&void 0!==r[0]?r[0]:null,!(N&&e))return[3,2];return[4,N(e)];case 1:n.sent(),n.label=2;case 2:return J(),[2]}})}),function(){return r.apply(this,arguments)}),Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e&&F.push("/admin/group/"+e)},U=(n=(0,t.Z)(function(e){var r,n;return(0,i.__generator)(this,function(r){switch(r.label){case 0:if(e.preventDefault(),!((null==I?void 0:I.trim())&&I.replaceAll("_","").length>2))return[3,4];return[4,z.addGroup(I)];case 1:if(!r.sent())return[3,3];return[4,z.getGroups()];case 2:q(r.sent()),r.label=3;case 3:return J(),[3,5];case 4:X("Please enter a name. Must be 3 characters or longer."),r.label=5;case 5:return[2]}})}),function(e){return n.apply(this,arguments)}),V=(_=(0,t.Z)(function(){var e;return(0,i.__generator)(this,function(r){switch(r.label){case 0:if(e=[],!S)return[3,2];return[4,z.getGroupsForRole(S)];case 1:case 3:return e=r.sent(),[3,6];case 2:if(!P)return[3,4];return[4,z.getChildGroups(P)];case 4:return[4,z.getGroups()];case 5:e=r.sent(),r.label=6;case 6:return e&&q(e),[2]}})}),function(){return _.apply(this,arguments)});return(0,j.useEffect)((0,t.Z)(function(){return(0,i.__generator)(this,function(e){switch(e.label){case 0:if(G)return[3,2];return[4,V()];case 1:e.sent(),e.label=2;case 2:return[2]}})}),[]),(0,j.useEffect)((0,t.Z)(function(){return(0,i.__generator)(this,function(e){return G&&!A&&V(),[2]})}),[A]),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("strong",{style:{float:"left"},children:"Groups"}),(0,u.jsx)(l.Z,{style:{float:"right",marginBottom:"0.5em"},onClick:H,children:"Add Group"}),(0,u.jsx)(s.Z,{component:a.Z,children:(0,u.jsxs)(c.Z,{sx:{minWidth:300},"aria-label":"Admin Group Table",children:[(0,u.jsx)(o.Z,{children:(0,u.jsx)(d.Z,{children:(0,u.jsx)(h.Z,{children:"Name"})})}),(0,u.jsx)(f.Z,{children:null==D?void 0:D.map(function(e,r){return(0,u.jsx)(d.Z,{hover:!0,children:(0,u.jsx)(h.Z,{children:(0,u.jsx)(l.Z,{onClick:function(){return Q(e)},children:e})})},r)})})]})}),(0,u.jsxs)(v.Z,{fullWidth:!0,maxWidth:"sm",open:A,onClose:J,"aria-labelledby":"dialog-title","aria-describedby":"dialog-description",children:[(0,u.jsx)(p.Z,{id:"dialog-title",children:G?"Select New Group":"New Group"}),(0,u.jsx)(Z.Z,{children:G?(0,u.jsx)(w,{currentGroup:P,excludeList:D,selectCallback:K}):(0,u.jsx)(C.Z,{placeholder:"New Group...",valueProp:I,setState:L,errorMessage:R})}),(0,u.jsxs)(x.Z,{children:[G?null:(0,u.jsx)(l.Z,{onClick:U,children:"Submit"}),(0,u.jsx)(l.Z,{onClick:J,children:"Close"})]})]})]})}},62232:function(e,r,n){"use strict";n.d(r,{Z:function(){return u}});var t=n(85893),i=n(22715);function u(e){var r=e.placeholder,n=void 0===r?"":r,u=e.valueProp,l=void 0===u?"":u,s=e.setState,a=void 0===s?function(){return null}:s,c=e.errorMessage,o=void 0===c?"":c;return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(i.Z,{variant:"outlined",style:{width:"100%"},error:!!o,helperText:o,placeholder:n,onChange:function(e){var r,n=e.target.value;if(""===n){a(n);return}var t=null!==(r=e.target.value)&&void 0!==r?r:"";if(t.trim()){var i=t.replaceAll(" ","_"),u=i[i.length-1],s=l[l.length-1];(s!==u||s===u&&"_"!==s)&&a(i)}},inputProps:{"aria-label":"".concat(n+" "," policy name text input"),"data-testid":"newPolicyNameInputId"},value:l})})}n(67294)}},function(e){e.O(0,[9774,2888,179],function(){return e(e.s=79257)}),_N_E=e.O()}]);