(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4167],{53411:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/group/[groupName]",function(){return n(99938)}])},99938:function(e,r,n){"use strict";n.r(r),n.d(r,{default:function(){return f}});var t=n(85893),i=n(11163);n(67294);var s=n(47568),l=n(10092),u=n(87357),c=n(48263),a=n(46291),o=n(19803),d=n(42207);function h(e){var r,n,i=e.groupName,h=void 0===i?"":i,f=(0,a.rt)(),p=(r=(0,s.Z)(function(e){return(0,l.__generator)(this,function(r){switch(r.label){case 0:if(!(h&&e))return[3,2];return[4,f.addGroupResource(h,e.Name,e.Variant,e.ResType)];case 1:r.sent(),r.label=2;case 2:return[2]}})}),function(e){return r.apply(this,arguments)}),x=(n=(0,s.Z)(function(){var e,r=arguments;return(0,l.__generator)(this,function(n){switch(n.label){case 0:if(e=r.length>0&&void 0!==r[0]?r[0]:null,!(h&&e))return[3,2];return[4,f.addGroupToGroup(e,h)];case 1:n.sent(),n.label=2;case 2:return[2]}})}),function(){return n.apply(this,arguments)});return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("h2",{children:["Group: ",h.toUpperCase()]}),(0,t.jsx)(u.Z,{sx:{flexGrow:1},children:(0,t.jsxs)(c.ZP,{container:!0,spacing:2,children:[(0,t.jsx)(c.ZP,{item:!0,xs:12,children:(0,t.jsx)(d.Z,{groupNameProp:h,selectCallback:p})}),(0,t.jsx)(c.ZP,{item:!0,xs:12,children:(0,t.jsx)(o.Z,{embeddedMode:!0,groupNameProp:h,selectCallback:x})})]})})]})}var f=function(){var e=(0,i.useRouter)().query.groupName;return e?(0,t.jsx)(h,{groupName:e}):null}},19803:function(e,r,n){"use strict";n.d(r,{Z:function(){return C}});var t=n(47568),i=n(10092),s=n(85893),l=n(69397),u=n(4592),c=n(21987),a=n(13614),o=n(37858),d=n(75921),h=n(98102),f=n(58439),p=n(37645),x=n(64666),Z=n(91894),j=n(35713),v=n(11163),g=n(67294),m=n(46291),b=n(87357),_=n(66489);function y(e){var r,n=e.currentGroup,l=void 0===n?"":n,p=e.excludeList,x=void 0===p?[]:p,Z=e.selectCallback,j=void 0===Z?function(){return null}:Z,v=(0,g.useState)([]),y=v[0],N=v[1],C=(0,g.useState)(!1),w=C[0],G=C[1],k=(0,m.rt)(),R=(r=(0,t.Z)(function(){var e,r=arguments;return(0,i.__generator)(this,function(n){return e=r.length>0&&void 0!==r[0]?r[0]:null,j&&e&&(G(!0),j(e)),[2]})}),function(){return r.apply(this,arguments)});return(0,g.useEffect)((0,t.Z)(function(){var e,r;return(0,i.__generator)(this,function(r){switch(r.label){case 0:return G(!0),[4,k.getGroups()];case 1:return(e=r.sent())&&(x.push(l),N(e.filter(function(e){return!x.includes(e)}))),G(!1),[2]}})}),[]),(0,s.jsx)(s.Fragment,{children:w?(0,s.jsx)(b.Z,{sx:{display:"flex",justifyContent:"center"},children:(0,s.jsx)(_.Z,{})}):(0,s.jsx)(u.Z,{component:c.Z,children:(0,s.jsxs)(a.Z,{sx:{minWidth:300},"aria-label":"Embedded Group Table",children:[(0,s.jsx)(o.Z,{children:(0,s.jsx)(d.Z,{children:(0,s.jsx)(h.Z,{children:"Name"})})}),(0,s.jsx)(f.Z,{children:null==y?void 0:y.map(function(e,r){return(0,s.jsx)(d.Z,{onClick:function(){return R(e)},style:{cursor:"pointer"},hover:!0,children:(0,s.jsx)(h.Z,{children:e})},r)})})]})})})}var N=n(62232);function C(e){var r,n,b,_=e.embeddedMode,C=void 0!==_&&_,w=e.selectCallback,G=void 0===w?function(){return null}:w,k=e.roleNameProp,R=void 0===k?"":k,P=e.groupNameProp,T=void 0===P?"":P,S=(0,v.useRouter)(),E=(0,g.useState)(!1),F=E[0],W=E[1],A=(0,g.useState)(""),V=A[0],L=A[1],M=(0,g.useState)(""),I=M[0],U=M[1],B=(0,g.useState)([]),O=B[0],X=B[1],q=(0,m.rt)(),D=function(){L(""),U(""),W(!0)},z=function(){W(!1),L("")},H=(r=(0,t.Z)(function(){var e,r=arguments;return(0,i.__generator)(this,function(n){switch(n.label){case 0:if(e=r.length>0&&void 0!==r[0]?r[0]:null,!(G&&e))return[3,2];return[4,G(e)];case 1:n.sent(),n.label=2;case 2:return z(),[2]}})}),function(){return r.apply(this,arguments)}),J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e&&S.push("/admin/group/"+e)},K=(n=(0,t.Z)(function(e){var r,n;return(0,i.__generator)(this,function(r){switch(r.label){case 0:if(e.preventDefault(),!((null==V?void 0:V.trim())&&V.replaceAll("_","").length>2))return[3,4];return[4,q.addGroup(V)];case 1:if(!r.sent())return[3,3];return[4,q.getGroups()];case 2:X(r.sent()),r.label=3;case 3:return z(),[3,5];case 4:U("Please enter a name. Must be 3 characters or longer."),r.label=5;case 5:return[2]}})}),function(e){return n.apply(this,arguments)}),Q=(b=(0,t.Z)(function(){var e;return(0,i.__generator)(this,function(r){switch(r.label){case 0:if(e=[],!R)return[3,2];return[4,q.getGroupsForRole(R)];case 1:case 3:return e=r.sent(),[3,6];case 2:if(!T)return[3,4];return[4,q.getChildGroups(T)];case 4:return[4,q.getGroups()];case 5:e=r.sent(),r.label=6;case 6:return e&&X(e),[2]}})}),function(){return b.apply(this,arguments)});return(0,g.useEffect)((0,t.Z)(function(){return(0,i.__generator)(this,function(e){switch(e.label){case 0:if(C)return[3,2];return[4,Q()];case 1:e.sent(),e.label=2;case 2:return[2]}})}),[]),(0,g.useEffect)((0,t.Z)(function(){return(0,i.__generator)(this,function(e){return C&&!F&&Q(),[2]})}),[F]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("strong",{style:{float:"left"},children:"Groups"}),(0,s.jsx)(l.Z,{style:{float:"right",marginBottom:"0.5em"},onClick:D,children:"Add Group"}),(0,s.jsx)(u.Z,{component:c.Z,children:(0,s.jsxs)(a.Z,{sx:{minWidth:300},"aria-label":"Admin Group Table",children:[(0,s.jsx)(o.Z,{children:(0,s.jsx)(d.Z,{children:(0,s.jsx)(h.Z,{children:"Name"})})}),(0,s.jsx)(f.Z,{children:null==O?void 0:O.map(function(e,r){return(0,s.jsx)(d.Z,{hover:!0,children:(0,s.jsx)(h.Z,{children:(0,s.jsx)(l.Z,{onClick:function(){return J(e)},children:e})})},r)})})]})}),(0,s.jsxs)(x.Z,{fullWidth:!0,maxWidth:"sm",open:F,onClose:z,"aria-labelledby":"dialog-title","aria-describedby":"dialog-description",children:[(0,s.jsx)(p.Z,{id:"dialog-title",children:C?"Select New Group":"New Group"}),(0,s.jsx)(j.Z,{children:C?(0,s.jsx)(y,{currentGroup:T,excludeList:O,selectCallback:H}):(0,s.jsx)(N.Z,{placeholder:"New Group...",valueProp:V,setState:L,errorMessage:I})}),(0,s.jsxs)(Z.Z,{children:[C?null:(0,s.jsx)(l.Z,{onClick:K,children:"Submit"}),(0,s.jsx)(l.Z,{onClick:z,children:"Close"})]})]})]})}},62232:function(e,r,n){"use strict";n.d(r,{Z:function(){return s}});var t=n(85893),i=n(22715);function s(e){var r=e.placeholder,n=void 0===r?"":r,s=e.valueProp,l=void 0===s?"":s,u=e.setState,c=void 0===u?function(){return null}:u,a=e.errorMessage,o=void 0===a?"":a;return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(i.Z,{variant:"outlined",style:{width:"100%"},error:!!o,helperText:o,placeholder:n,onChange:function(e){var r,n=e.target.value;if(""===n){c(n);return}var t=null!==(r=e.target.value)&&void 0!==r?r:"";if(t.trim()){var i=t.replaceAll(" ","_"),s=i[i.length-1],u=l[l.length-1];(u!==s||u===s&&"_"!==u)&&c(i)}},inputProps:{"aria-label":"".concat(n+" "," policy name text input"),"data-testid":"newPolicyNameInputId"},value:l})})}n(67294)},42207:function(e,r,n){"use strict";n.d(r,{Z:function(){return y}});var t=n(47568),i=n(10092),s=n(85893),l=n(69397),u=n(4592),c=n(21987),a=n(13614),o=n(37858),d=n(75921),h=n(98102),f=n(58439),p=n(64666),x=n(91894),Z=n(35713),j=n(37645),v=n(67294),g=n(46291),m=n(87357),b=n(66489);function _(e){var r,n=e.selectCallback,l=void 0===n?function(){return null}:n,p=e.excludeList,x=void 0===p?[]:p,Z=(0,v.useState)([]),j=Z[0],_=Z[1],y=(0,v.useState)(!1),N=y[0],C=y[1],w=(0,g.rt)(),G=(r=(0,t.Z)(function(){var e,r=arguments;return(0,i.__generator)(this,function(n){switch(n.label){case 0:if(e=r.length>0&&void 0!==r[0]?r[0]:null,!(l&&e))return[3,2];return C(!0),[4,l(e)];case 1:n.sent(),n.label=2;case 2:return[2]}})}),function(){return r.apply(this,arguments)});return(0,v.useEffect)((0,t.Z)(function(){var e,r;return(0,i.__generator)(this,function(r){switch(r.label){case 0:return C(!0),[4,w.getResources()];case 1:return(e=r.sent())&&_(e.filter(function(e){return!x.find(function(r){return r.Name===e.Name&&r.ResType===e.ResType&&r.Variant===e.Variant})})),C(!1),[2]}})}),[]),(0,s.jsx)(s.Fragment,{children:N?(0,s.jsx)(m.Z,{sx:{display:"flex",justifyContent:"center"},children:(0,s.jsx)(b.Z,{})}):(null==j?void 0:j.length)?(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(u.Z,{component:c.Z,children:(0,s.jsxs)(a.Z,{sx:{minWidth:300},"aria-label":"Embedded Resource Table",children:[(0,s.jsx)(o.Z,{children:(0,s.jsxs)(d.Z,{children:[(0,s.jsx)(h.Z,{children:"Name"}),(0,s.jsx)(h.Z,{children:"Variant"}),(0,s.jsx)(h.Z,{children:"Type"})]})}),(0,s.jsx)(f.Z,{children:null==j?void 0:j.map(function(e,r){var n;return(0,s.jsxs)(d.Z,{onClick:function(){return G(e)},style:{cursor:"pointer"},hover:!0,children:[(0,s.jsx)(h.Z,{children:e.Name}),(0,s.jsx)(h.Z,{children:e.Variant}),(0,s.jsx)(h.Z,{children:(n=e.ResType).split("_").map(function(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()}).join(" ")})]},r)})})]})})}):(0,s.jsx)("span",{children:"No Existing Resources!"})})}function y(e){var r,n=e.selectCallback,m=void 0===n?function(){return null}:n,b=e.userNameProp,y=void 0===b?"":b,N=e.roleNameProp,C=void 0===N?"":N,w=e.groupNameProp,G=void 0===w?"":w,k=(0,v.useState)([]),R=k[0],P=k[1],T=(0,v.useState)(!1),S=T[0],E=T[1],F=(0,g.rt)(),W=function(){E(!0)},A=function(){E(!1)},V=(r=(0,t.Z)(function(){var e,r=arguments;return(0,i.__generator)(this,function(n){switch(n.label){case 0:if(e=r.length>0&&void 0!==r[0]?r[0]:null,!(m&&e))return[3,2];return[4,m(e)];case 1:n.sent(),A(),n.label=2;case 2:return[2]}})}),function(){return r.apply(this,arguments)});return(0,v.useEffect)((0,t.Z)(function(){var e;return(0,i.__generator)(this,function(r){switch(r.label){case 0:if(S)return[3,7];if(e=[],!y)return[3,2];return[4,F.getUserResources(y)];case 1:case 3:return e=r.sent(),[3,6];case 2:if(!C)return[3,4];return[4,F.getRoleResources(C)];case 4:if(!G)return[3,6];return[4,F.getGroupResources(G)];case 5:e=r.sent(),r.label=6;case 6:e&&P(e),r.label=7;case 7:return[2]}})}),[S]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("strong",{style:{float:"left"},children:"Resources"}),(0,s.jsx)(l.Z,{style:{float:"right",marginBottom:"0.5em"},onClick:W,"data-testid":"addResourceTestId",children:"Add Resource"}),(0,s.jsx)(u.Z,{component:c.Z,children:(0,s.jsxs)(a.Z,{sx:{minWidth:300},"aria-label":"Admin Resource Table",children:[(0,s.jsx)(o.Z,{children:(0,s.jsxs)(d.Z,{children:[(0,s.jsx)(h.Z,{children:"Name"}),(0,s.jsx)(h.Z,{children:"Variant"}),(0,s.jsx)(h.Z,{children:"Type"})]})}),(0,s.jsx)(f.Z,{children:null==R?void 0:R.map(function(e,r){return(0,s.jsxs)(d.Z,{hover:!0,children:[(0,s.jsx)(h.Z,{children:e.Name}),(0,s.jsx)(h.Z,{children:e.Variant}),(0,s.jsx)(h.Z,{children:e.ResType})]},r)})})]})}),(0,s.jsxs)(p.Z,{fullWidth:!0,maxWidth:"sm",open:S,onClose:A,"aria-labelledby":"dialog-title","aria-describedby":"dialog-description",children:[(0,s.jsx)(j.Z,{id:"dialog-title",children:"Select new resource"}),(0,s.jsx)(Z.Z,{children:(0,s.jsx)(_,{excludeList:R,selectCallback:V})}),(0,s.jsx)(x.Z,{children:(0,s.jsx)(l.Z,{onClick:A,children:"Close"})})]})]})}}},function(e){e.O(0,[9774,2888,179],function(){return e(e.s=53411)}),_N_E=e.O()}]);