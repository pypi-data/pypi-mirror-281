(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1668],{93587:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/roles",function(){return t(69606)}])},69606:function(e,n,t){"use strict";t.r(n);var r=t(85893);t(67294);var l=t(41912),i=function(){return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(l.Z,{})})};n.default=i},62232:function(e,n,t){"use strict";t.d(n,{Z:function(){return i}});var r=t(85893),l=t(22715);function i(e){var n=e.placeholder,t=void 0===n?"":n,i=e.valueProp,s=void 0===i?"":i,a=e.setState,u=void 0===a?function(){return null}:a,c=e.errorMessage,o=void 0===c?"":c;return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(l.Z,{variant:"outlined",style:{width:"100%"},error:!!o,helperText:o,placeholder:t,onChange:function(e){var n,t=e.target.value;if(""===t){u(t);return}var r=null!==(n=e.target.value)&&void 0!==n?n:"";if(r.trim()){var l=r.replaceAll(" ","_"),i=l[l.length-1],a=s[s.length-1];(a!==i||a===i&&"_"!==a)&&u(l)}},inputProps:{"aria-label":"".concat(t+" "," policy name text input"),"data-testid":"newPolicyNameInputId"},value:s})})}t(67294)},41912:function(e,n,t){"use strict";t.d(n,{Z:function(){return C}});var r=t(47568),l=t(10092),i=t(85893),s=t(69397),a=t(4592),u=t(21987),c=t(13614),o=t(37858),d=t(75921),h=t(98102),f=t(58439),v=t(37645),x=t(64666),Z=t(91894),p=t(35713),j=t(11163),g=t(67294),m=t(46291),b=t(87357),_=t(66489);function w(e){var n,t=e.currentRole,s=void 0===t?"":t,v=e.excludeList,x=void 0===v?[]:v,Z=e.selectCallback,p=void 0===Z?function(){return null}:Z,j=(0,g.useState)([]),w=j[0],R=j[1],C=(0,g.useState)(!1),y=C[0],N=C[1],k=(0,m.rt)(),S=(n=(0,r.Z)(function(){var e,n=arguments;return(0,l.__generator)(this,function(t){switch(t.label){case 0:if(e=n.length>0&&void 0!==n[0]?n[0]:null,!(p&&e))return[3,2];return N(!0),[4,p(e)];case 1:t.sent(),t.label=2;case 2:return[2]}})}),function(){return n.apply(this,arguments)});return(0,g.useEffect)((0,r.Z)(function(){var e,n;return(0,l.__generator)(this,function(n){switch(n.label){case 0:return N(!0),[4,k.getRoles()];case 1:return(e=n.sent())&&(x.push(s),R(e.filter(function(e){return!x.includes(e)}))),N(!1),[2]}})}),[]),(0,i.jsx)(i.Fragment,{children:y?(0,i.jsx)(b.Z,{sx:{display:"flex",justifyContent:"center"},children:(0,i.jsx)(_.Z,{})}):(0,i.jsx)(a.Z,{component:u.Z,children:(0,i.jsxs)(c.Z,{sx:{minWidth:300},"aria-label":"Admin Role Table",children:[(0,i.jsx)(o.Z,{children:(0,i.jsx)(d.Z,{children:(0,i.jsx)(h.Z,{children:"Name"})})}),(0,i.jsx)(f.Z,{children:null==w?void 0:w.map(function(e,n){return(0,i.jsx)(d.Z,{onClick:function(){return S(e)},style:{cursor:"pointer"},hover:!0,children:(0,i.jsx)(h.Z,{children:e})},n)})})]})})})}var R=t(62232);function C(e){var n,t,b,_=e.selectMode,C=void 0!==_&&_,y=e.embeddedMode,N=void 0!==y&&y,k=e.selectCallback,S=void 0===k?function(){return null}:k,P=e.userNameProp,E=void 0===P?"":P,T=e.roleNameProp,A=void 0===T?"":T,M=(0,j.useRouter)(),F=(0,g.useState)(!1),W=F[0],I=F[1],L=(0,g.useState)(""),O=L[0],X=L[1],B=(0,g.useState)(""),D=B[0],U=B[1],q=(0,g.useState)([]),z=q[0],G=q[1],H=(0,m.rt)(),J=function(){X(""),U(""),I(!0)},K=function(){I(!1),X("")},Q=(n=(0,r.Z)(function(e){var n,t;return(0,l.__generator)(this,function(n){switch(n.label){case 0:if(e.preventDefault(),!((null==O?void 0:O.trim())&&O.replaceAll("_","").length>2))return[3,4];return[4,H.addRole(O)];case 1:if(!n.sent())return[3,3];return[4,H.getRoles()];case 2:G(n.sent()),n.label=3;case 3:return K(),[3,5];case 4:U("Please enter a name. Must be 3 characters or longer."),n.label=5;case 5:return[2]}})}),function(e){return n.apply(this,arguments)}),V=(t=(0,r.Z)(function(){var e,n=arguments;return(0,l.__generator)(this,function(t){switch(t.label){case 0:if(e=n.length>0&&void 0!==n[0]?n[0]:null,!(S&&e))return[3,2];return[4,S(e)];case 1:t.sent(),t.label=2;case 2:return K(),[2]}})}),function(){return t.apply(this,arguments)}),Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e&&M.push("/admin/role/"+e)},$=(b=(0,r.Z)(function(){var e;return(0,l.__generator)(this,function(n){switch(n.label){case 0:if(e=[],!E)return[3,2];return[4,H.getUserRoles(E)];case 1:case 3:return e=n.sent(),[3,6];case 2:if(!A)return[3,4];return[4,H.getChildRoles(A)];case 4:return[4,H.getRoles()];case 5:e=n.sent(),n.label=6;case 6:return e&&G(e),[2]}})}),function(){return b.apply(this,arguments)});return(0,g.useEffect)((0,r.Z)(function(){return(0,l.__generator)(this,function(e){switch(e.label){case 0:if(N)return[3,2];return[4,$()];case 1:e.sent(),e.label=2;case 2:return[2]}})}),[]),(0,g.useEffect)((0,r.Z)(function(){return(0,l.__generator)(this,function(e){return N&&!W&&$(),[2]})}),[W]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("strong",{style:{float:"left"},children:"Roles"}),C?null:(0,i.jsx)(s.Z,{style:{float:"right",marginBottom:"0.5em"},onClick:J,"data-testid":"addRoleTestId",children:"Add Role"}),(0,i.jsx)(a.Z,{component:u.Z,children:(0,i.jsxs)(c.Z,{sx:{minWidth:300},"aria-label":"Admin Role Table",children:[(0,i.jsx)(o.Z,{children:(0,i.jsx)(d.Z,{children:(0,i.jsx)(h.Z,{children:"Name"})})}),(0,i.jsx)(f.Z,{children:null==z?void 0:z.map(function(e,n){return(0,i.jsx)(d.Z,{hover:!0,children:C?(0,i.jsx)(h.Z,{children:e}):(0,i.jsx)(h.Z,{children:(0,i.jsx)(s.Z,{onClick:function(){return Y(e)},children:e})})},n)})})]})}),(0,i.jsxs)(x.Z,{fullWidth:!0,maxWidth:"sm",open:W,onClose:K,"aria-labelledby":"dialog-title","aria-describedby":"dialog-description",children:[(0,i.jsx)(v.Z,{id:"dialog-title",children:N?"Select New Role":"New Role"}),(0,i.jsx)(p.Z,{children:N?(0,i.jsx)(w,{currentRole:A,excludeList:z,selectCallback:V}):(0,i.jsx)(R.Z,{placeholder:"New Role...",valueProp:O,setState:X,errorMessage:D})}),(0,i.jsxs)(Z.Z,{children:[N?null:(0,i.jsx)(s.Z,{onClick:Q,children:"Submit"}),(0,i.jsx)(s.Z,{onClick:K,children:"Close"})]})]})]})}}},function(e){e.O(0,[9774,2888,179],function(){return e(e.s=93587)}),_N_E=e.O()}]);