(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{99120:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/user/[userName]",function(){return r(18790)}])},18790:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return f}});var t=r(85893),s=r(11163);r(67294);var i=r(47568),l=r(10092),c=r(87357),a=r(48263),u=r(46291),o=r(42207),d=r(41912);function h(e){var n,r,s=e.userName,h=void 0===s?"":s,f=(0,u.rt)(),x=(n=(0,i.Z)(function(){var e,n=arguments;return(0,l.__generator)(this,function(r){switch(r.label){case 0:if(e=n.length>0&&void 0!==n[0]?n[0]:null,!(h&&e))return[3,2];return[4,f.addUserRole(h,e)];case 1:r.sent(),r.label=2;case 2:return[2]}})}),function(){return n.apply(this,arguments)}),Z=(r=(0,i.Z)(function(e){return(0,l.__generator)(this,function(n){switch(n.label){case 0:if(!(h&&e))return[3,2];return[4,f.addUserResource(h,e.Name,e.Variant,e.ResType)];case 1:n.sent(),n.label=2;case 2:return[2]}})}),function(e){return r.apply(this,arguments)});return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("h2",{children:["User: ",h.toUpperCase()]}),(0,t.jsx)(c.Z,{sx:{flexGrow:1},children:(0,t.jsxs)(a.ZP,{container:!0,spacing:2,children:[(0,t.jsx)(a.ZP,{item:!0,xs:6,children:(0,t.jsx)(d.Z,{userNameProp:h,embeddedMode:!0,selectCallback:x})}),(0,t.jsx)(a.ZP,{item:!0,xs:6,children:(0,t.jsx)(o.Z,{userNameProp:h,selectCallback:Z})})]})})]})}var f=function(){var e=(0,s.useRouter)().query.userName;return e?(0,t.jsx)(h,{userName:e}):null}},62232:function(e,n,r){"use strict";r.d(n,{Z:function(){return i}});var t=r(85893),s=r(22715);function i(e){var n=e.placeholder,r=void 0===n?"":n,i=e.valueProp,l=void 0===i?"":i,c=e.setState,a=void 0===c?function(){return null}:c,u=e.errorMessage,o=void 0===u?"":u;return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(s.Z,{variant:"outlined",style:{width:"100%"},error:!!o,helperText:o,placeholder:r,onChange:function(e){var n,r=e.target.value;if(""===r){a(r);return}var t=null!==(n=e.target.value)&&void 0!==n?n:"";if(t.trim()){var s=t.replaceAll(" ","_"),i=s[s.length-1],c=l[l.length-1];(c!==i||c===i&&"_"!==c)&&a(s)}},inputProps:{"aria-label":"".concat(r+" "," policy name text input"),"data-testid":"newPolicyNameInputId"},value:l})})}r(67294)},42207:function(e,n,r){"use strict";r.d(n,{Z:function(){return R}});var t=r(47568),s=r(10092),i=r(85893),l=r(69397),c=r(4592),a=r(21987),u=r(13614),o=r(37858),d=r(75921),h=r(98102),f=r(58439),x=r(64666),Z=r(91894),j=r(35713),p=r(37645),v=r(67294),m=r(46291),g=r(87357),b=r(66489);function _(e){var n,r=e.selectCallback,l=void 0===r?function(){return null}:r,x=e.excludeList,Z=void 0===x?[]:x,j=(0,v.useState)([]),p=j[0],_=j[1],R=(0,v.useState)(!1),y=R[0],N=R[1],C=(0,m.rt)(),w=(n=(0,t.Z)(function(){var e,n=arguments;return(0,s.__generator)(this,function(r){switch(r.label){case 0:if(e=n.length>0&&void 0!==n[0]?n[0]:null,!(l&&e))return[3,2];return N(!0),[4,l(e)];case 1:r.sent(),r.label=2;case 2:return[2]}})}),function(){return n.apply(this,arguments)});return(0,v.useEffect)((0,t.Z)(function(){var e,n;return(0,s.__generator)(this,function(n){switch(n.label){case 0:return N(!0),[4,C.getResources()];case 1:return(e=n.sent())&&_(e.filter(function(e){return!Z.find(function(n){return n.Name===e.Name&&n.ResType===e.ResType&&n.Variant===e.Variant})})),N(!1),[2]}})}),[]),(0,i.jsx)(i.Fragment,{children:y?(0,i.jsx)(g.Z,{sx:{display:"flex",justifyContent:"center"},children:(0,i.jsx)(b.Z,{})}):(null==p?void 0:p.length)?(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(c.Z,{component:a.Z,children:(0,i.jsxs)(u.Z,{sx:{minWidth:300},"aria-label":"Embedded Resource Table",children:[(0,i.jsx)(o.Z,{children:(0,i.jsxs)(d.Z,{children:[(0,i.jsx)(h.Z,{children:"Name"}),(0,i.jsx)(h.Z,{children:"Variant"}),(0,i.jsx)(h.Z,{children:"Type"})]})}),(0,i.jsx)(f.Z,{children:null==p?void 0:p.map(function(e,n){var r;return(0,i.jsxs)(d.Z,{onClick:function(){return w(e)},style:{cursor:"pointer"},hover:!0,children:[(0,i.jsx)(h.Z,{children:e.Name}),(0,i.jsx)(h.Z,{children:e.Variant}),(0,i.jsx)(h.Z,{children:(r=e.ResType).split("_").map(function(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()}).join(" ")})]},n)})})]})})}):(0,i.jsx)("span",{children:"No Existing Resources!"})})}function R(e){var n,r=e.selectCallback,g=void 0===r?function(){return null}:r,b=e.userNameProp,R=void 0===b?"":b,y=e.roleNameProp,N=void 0===y?"":y,C=e.groupNameProp,w=void 0===C?"":C,k=(0,v.useState)([]),P=k[0],T=k[1],S=(0,v.useState)(!1),E=S[0],A=S[1],W=(0,m.rt)(),F=function(){A(!0)},U=function(){A(!1)},V=(n=(0,t.Z)(function(){var e,n=arguments;return(0,s.__generator)(this,function(r){switch(r.label){case 0:if(e=n.length>0&&void 0!==n[0]?n[0]:null,!(g&&e))return[3,2];return[4,g(e)];case 1:r.sent(),U(),r.label=2;case 2:return[2]}})}),function(){return n.apply(this,arguments)});return(0,v.useEffect)((0,t.Z)(function(){var e;return(0,s.__generator)(this,function(n){switch(n.label){case 0:if(E)return[3,7];if(e=[],!R)return[3,2];return[4,W.getUserResources(R)];case 1:case 3:return e=n.sent(),[3,6];case 2:if(!N)return[3,4];return[4,W.getRoleResources(N)];case 4:if(!w)return[3,6];return[4,W.getGroupResources(w)];case 5:e=n.sent(),n.label=6;case 6:e&&T(e),n.label=7;case 7:return[2]}})}),[E]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("strong",{style:{float:"left"},children:"Resources"}),(0,i.jsx)(l.Z,{style:{float:"right",marginBottom:"0.5em"},onClick:F,"data-testid":"addResourceTestId",children:"Add Resource"}),(0,i.jsx)(c.Z,{component:a.Z,children:(0,i.jsxs)(u.Z,{sx:{minWidth:300},"aria-label":"Admin Resource Table",children:[(0,i.jsx)(o.Z,{children:(0,i.jsxs)(d.Z,{children:[(0,i.jsx)(h.Z,{children:"Name"}),(0,i.jsx)(h.Z,{children:"Variant"}),(0,i.jsx)(h.Z,{children:"Type"})]})}),(0,i.jsx)(f.Z,{children:null==P?void 0:P.map(function(e,n){return(0,i.jsxs)(d.Z,{hover:!0,children:[(0,i.jsx)(h.Z,{children:e.Name}),(0,i.jsx)(h.Z,{children:e.Variant}),(0,i.jsx)(h.Z,{children:e.ResType})]},n)})})]})}),(0,i.jsxs)(x.Z,{fullWidth:!0,maxWidth:"sm",open:E,onClose:U,"aria-labelledby":"dialog-title","aria-describedby":"dialog-description",children:[(0,i.jsx)(p.Z,{id:"dialog-title",children:"Select new resource"}),(0,i.jsx)(j.Z,{children:(0,i.jsx)(_,{excludeList:P,selectCallback:V})}),(0,i.jsx)(Z.Z,{children:(0,i.jsx)(l.Z,{onClick:U,children:"Close"})})]})]})}},41912:function(e,n,r){"use strict";r.d(n,{Z:function(){return N}});var t=r(47568),s=r(10092),i=r(85893),l=r(69397),c=r(4592),a=r(21987),u=r(13614),o=r(37858),d=r(75921),h=r(98102),f=r(58439),x=r(37645),Z=r(64666),j=r(91894),p=r(35713),v=r(11163),m=r(67294),g=r(46291),b=r(87357),_=r(66489);function R(e){var n,r=e.currentRole,l=void 0===r?"":r,x=e.excludeList,Z=void 0===x?[]:x,j=e.selectCallback,p=void 0===j?function(){return null}:j,v=(0,m.useState)([]),R=v[0],y=v[1],N=(0,m.useState)(!1),C=N[0],w=N[1],k=(0,g.rt)(),P=(n=(0,t.Z)(function(){var e,n=arguments;return(0,s.__generator)(this,function(r){switch(r.label){case 0:if(e=n.length>0&&void 0!==n[0]?n[0]:null,!(p&&e))return[3,2];return w(!0),[4,p(e)];case 1:r.sent(),r.label=2;case 2:return[2]}})}),function(){return n.apply(this,arguments)});return(0,m.useEffect)((0,t.Z)(function(){var e,n;return(0,s.__generator)(this,function(n){switch(n.label){case 0:return w(!0),[4,k.getRoles()];case 1:return(e=n.sent())&&(Z.push(l),y(e.filter(function(e){return!Z.includes(e)}))),w(!1),[2]}})}),[]),(0,i.jsx)(i.Fragment,{children:C?(0,i.jsx)(b.Z,{sx:{display:"flex",justifyContent:"center"},children:(0,i.jsx)(_.Z,{})}):(0,i.jsx)(c.Z,{component:a.Z,children:(0,i.jsxs)(u.Z,{sx:{minWidth:300},"aria-label":"Admin Role Table",children:[(0,i.jsx)(o.Z,{children:(0,i.jsx)(d.Z,{children:(0,i.jsx)(h.Z,{children:"Name"})})}),(0,i.jsx)(f.Z,{children:null==R?void 0:R.map(function(e,n){return(0,i.jsx)(d.Z,{onClick:function(){return P(e)},style:{cursor:"pointer"},hover:!0,children:(0,i.jsx)(h.Z,{children:e})},n)})})]})})})}var y=r(62232);function N(e){var n,r,b,_=e.selectMode,N=void 0!==_&&_,C=e.embeddedMode,w=void 0!==C&&C,k=e.selectCallback,P=void 0===k?function(){return null}:k,T=e.userNameProp,S=void 0===T?"":T,E=e.roleNameProp,A=void 0===E?"":E,W=(0,v.useRouter)(),F=(0,m.useState)(!1),U=F[0],V=F[1],M=(0,m.useState)(""),L=M[0],I=M[1],B=(0,m.useState)(""),G=B[0],O=B[1],X=(0,m.useState)([]),q=X[0],D=X[1],z=(0,g.rt)(),H=function(){I(""),O(""),V(!0)},J=function(){V(!1),I("")},K=(n=(0,t.Z)(function(e){var n,r;return(0,s.__generator)(this,function(n){switch(n.label){case 0:if(e.preventDefault(),!((null==L?void 0:L.trim())&&L.replaceAll("_","").length>2))return[3,4];return[4,z.addRole(L)];case 1:if(!n.sent())return[3,3];return[4,z.getRoles()];case 2:D(n.sent()),n.label=3;case 3:return J(),[3,5];case 4:O("Please enter a name. Must be 3 characters or longer."),n.label=5;case 5:return[2]}})}),function(e){return n.apply(this,arguments)}),Q=(r=(0,t.Z)(function(){var e,n=arguments;return(0,s.__generator)(this,function(r){switch(r.label){case 0:if(e=n.length>0&&void 0!==n[0]?n[0]:null,!(P&&e))return[3,2];return[4,P(e)];case 1:r.sent(),r.label=2;case 2:return J(),[2]}})}),function(){return r.apply(this,arguments)}),Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e&&W.push("/admin/role/"+e)},$=(b=(0,t.Z)(function(){var e;return(0,s.__generator)(this,function(n){switch(n.label){case 0:if(e=[],!S)return[3,2];return[4,z.getUserRoles(S)];case 1:case 3:return e=n.sent(),[3,6];case 2:if(!A)return[3,4];return[4,z.getChildRoles(A)];case 4:return[4,z.getRoles()];case 5:e=n.sent(),n.label=6;case 6:return e&&D(e),[2]}})}),function(){return b.apply(this,arguments)});return(0,m.useEffect)((0,t.Z)(function(){return(0,s.__generator)(this,function(e){switch(e.label){case 0:if(w)return[3,2];return[4,$()];case 1:e.sent(),e.label=2;case 2:return[2]}})}),[]),(0,m.useEffect)((0,t.Z)(function(){return(0,s.__generator)(this,function(e){return w&&!U&&$(),[2]})}),[U]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("strong",{style:{float:"left"},children:"Roles"}),N?null:(0,i.jsx)(l.Z,{style:{float:"right",marginBottom:"0.5em"},onClick:H,"data-testid":"addRoleTestId",children:"Add Role"}),(0,i.jsx)(c.Z,{component:a.Z,children:(0,i.jsxs)(u.Z,{sx:{minWidth:300},"aria-label":"Admin Role Table",children:[(0,i.jsx)(o.Z,{children:(0,i.jsx)(d.Z,{children:(0,i.jsx)(h.Z,{children:"Name"})})}),(0,i.jsx)(f.Z,{children:null==q?void 0:q.map(function(e,n){return(0,i.jsx)(d.Z,{hover:!0,children:N?(0,i.jsx)(h.Z,{children:e}):(0,i.jsx)(h.Z,{children:(0,i.jsx)(l.Z,{onClick:function(){return Y(e)},children:e})})},n)})})]})}),(0,i.jsxs)(Z.Z,{fullWidth:!0,maxWidth:"sm",open:U,onClose:J,"aria-labelledby":"dialog-title","aria-describedby":"dialog-description",children:[(0,i.jsx)(x.Z,{id:"dialog-title",children:w?"Select New Role":"New Role"}),(0,i.jsx)(p.Z,{children:w?(0,i.jsx)(R,{currentRole:A,excludeList:q,selectCallback:Q}):(0,i.jsx)(y.Z,{placeholder:"New Role...",valueProp:L,setState:I,errorMessage:G})}),(0,i.jsxs)(j.Z,{children:[w?null:(0,i.jsx)(l.Z,{onClick:K,children:"Submit"}),(0,i.jsx)(l.Z,{onClick:J,children:"Close"})]})]})]})}}},function(e){e.O(0,[9774,2888,179],function(){return e(e.s=99120)}),_N_E=e.O()}]);