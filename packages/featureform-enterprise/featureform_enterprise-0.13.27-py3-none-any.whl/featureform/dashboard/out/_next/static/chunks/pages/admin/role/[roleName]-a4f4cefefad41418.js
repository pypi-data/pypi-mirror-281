(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8621],{77902:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/role/[roleName]",function(){return n(39623)}])},39623:function(e,r,n){"use strict";n.r(r),n.d(r,{default:function(){return Z}});var t=n(85893),i=n(11163);n(67294);var l=n(47568),s=n(10092),c=n(87357),a=n(48263),u=n(46291),o=n(19803),d=n(42207),h=n(41912),f=n(57225);function x(e){var r,n,i,x=e.roleName,Z=void 0===x?"":x,j=(0,u.rt)(),p=(r=(0,l.Z)(function(){var e,r=arguments;return(0,s.__generator)(this,function(n){switch(n.label){case 0:if(e=r.length>0&&void 0!==r[0]?r[0]:null,!(Z&&e))return[3,2];return[4,j.addChildRole(Z,e)];case 1:n.sent(),n.label=2;case 2:return[2]}})}),function(){return r.apply(this,arguments)}),v=(n=(0,l.Z)(function(){var e,r=arguments;return(0,s.__generator)(this,function(n){switch(n.label){case 0:if(e=r.length>0&&void 0!==r[0]?r[0]:null,!(Z&&e))return[3,2];return[4,j.addRoleToGroup(Z,e)];case 1:n.sent(),n.label=2;case 2:return[2]}})}),function(){return n.apply(this,arguments)}),m=(i=(0,l.Z)(function(e){return(0,s.__generator)(this,function(r){switch(r.label){case 0:if(!(Z&&e))return[3,2];return[4,j.addRoleResource(Z,e.Name,e.Variant,e.ResType)];case 1:r.sent(),r.label=2;case 2:return[2]}})}),function(e){return i.apply(this,arguments)});return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("h2",{children:["Role: ",Z.toUpperCase()]}),(0,t.jsx)(c.Z,{sx:{flexGrow:1},children:(0,t.jsxs)(a.ZP,{container:!0,spacing:2,children:[(0,t.jsx)(a.ZP,{item:!0,xs:6,children:(0,t.jsx)(h.Z,{embeddedMode:!0,roleNameProp:Z,selectCallback:p})}),(0,t.jsx)(a.ZP,{item:!0,xs:6,children:(0,t.jsx)(d.Z,{roleNameProp:Z,selectCallback:m})}),(0,t.jsx)(a.ZP,{item:!0,xs:6,children:(0,t.jsx)(f.Z,{roleNameProp:Z})}),(0,t.jsx)(a.ZP,{item:!0,xs:6,children:(0,t.jsx)(o.Z,{embeddedMode:!0,roleNameProp:Z,selectCallback:v})})]})})]})}var Z=function(){var e=(0,i.useRouter)().query.roleName;return e?(0,t.jsx)(x,{roleName:e}):null}},19803:function(e,r,n){"use strict";n.d(r,{Z:function(){return R}});var t=n(47568),i=n(10092),l=n(85893),s=n(69397),c=n(4592),a=n(21987),u=n(13614),o=n(37858),d=n(75921),h=n(98102),f=n(58439),x=n(37645),Z=n(64666),j=n(91894),p=n(35713),v=n(11163),m=n(67294),g=n(46291),b=n(87357),_=n(66489);function y(e){var r,n=e.currentGroup,s=void 0===n?"":n,x=e.excludeList,Z=void 0===x?[]:x,j=e.selectCallback,p=void 0===j?function(){return null}:j,v=(0,m.useState)([]),y=v[0],C=v[1],R=(0,m.useState)(!1),N=R[0],w=R[1],k=(0,g.rt)(),P=(r=(0,t.Z)(function(){var e,r=arguments;return(0,i.__generator)(this,function(n){return e=r.length>0&&void 0!==r[0]?r[0]:null,p&&e&&(w(!0),p(e)),[2]})}),function(){return r.apply(this,arguments)});return(0,m.useEffect)((0,t.Z)(function(){var e,r;return(0,i.__generator)(this,function(r){switch(r.label){case 0:return w(!0),[4,k.getGroups()];case 1:return(e=r.sent())&&(Z.push(s),C(e.filter(function(e){return!Z.includes(e)}))),w(!1),[2]}})}),[]),(0,l.jsx)(l.Fragment,{children:N?(0,l.jsx)(b.Z,{sx:{display:"flex",justifyContent:"center"},children:(0,l.jsx)(_.Z,{})}):(0,l.jsx)(c.Z,{component:a.Z,children:(0,l.jsxs)(u.Z,{sx:{minWidth:300},"aria-label":"Embedded Group Table",children:[(0,l.jsx)(o.Z,{children:(0,l.jsx)(d.Z,{children:(0,l.jsx)(h.Z,{children:"Name"})})}),(0,l.jsx)(f.Z,{children:null==y?void 0:y.map(function(e,r){return(0,l.jsx)(d.Z,{onClick:function(){return P(e)},style:{cursor:"pointer"},hover:!0,children:(0,l.jsx)(h.Z,{children:e})},r)})})]})})})}var C=n(62232);function R(e){var r,n,b,_=e.embeddedMode,R=void 0!==_&&_,N=e.selectCallback,w=void 0===N?function(){return null}:N,k=e.roleNameProp,P=void 0===k?"":k,S=e.groupNameProp,T=void 0===S?"":S,G=(0,v.useRouter)(),E=(0,m.useState)(!1),W=E[0],A=E[1],F=(0,m.useState)(""),M=F[0],U=F[1],L=(0,m.useState)(""),V=L[0],B=L[1],I=(0,m.useState)([]),D=I[0],O=I[1],X=(0,g.rt)(),q=function(){U(""),B(""),A(!0)},z=function(){A(!1),U("")},H=(r=(0,t.Z)(function(){var e,r=arguments;return(0,i.__generator)(this,function(n){switch(n.label){case 0:if(e=r.length>0&&void 0!==r[0]?r[0]:null,!(w&&e))return[3,2];return[4,w(e)];case 1:n.sent(),n.label=2;case 2:return z(),[2]}})}),function(){return r.apply(this,arguments)}),J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e&&G.push("/admin/group/"+e)},K=(n=(0,t.Z)(function(e){var r,n;return(0,i.__generator)(this,function(r){switch(r.label){case 0:if(e.preventDefault(),!((null==M?void 0:M.trim())&&M.replaceAll("_","").length>2))return[3,4];return[4,X.addGroup(M)];case 1:if(!r.sent())return[3,3];return[4,X.getGroups()];case 2:O(r.sent()),r.label=3;case 3:return z(),[3,5];case 4:B("Please enter a name. Must be 3 characters or longer."),r.label=5;case 5:return[2]}})}),function(e){return n.apply(this,arguments)}),Q=(b=(0,t.Z)(function(){var e;return(0,i.__generator)(this,function(r){switch(r.label){case 0:if(e=[],!P)return[3,2];return[4,X.getGroupsForRole(P)];case 1:case 3:return e=r.sent(),[3,6];case 2:if(!T)return[3,4];return[4,X.getChildGroups(T)];case 4:return[4,X.getGroups()];case 5:e=r.sent(),r.label=6;case 6:return e&&O(e),[2]}})}),function(){return b.apply(this,arguments)});return(0,m.useEffect)((0,t.Z)(function(){return(0,i.__generator)(this,function(e){switch(e.label){case 0:if(R)return[3,2];return[4,Q()];case 1:e.sent(),e.label=2;case 2:return[2]}})}),[]),(0,m.useEffect)((0,t.Z)(function(){return(0,i.__generator)(this,function(e){return R&&!W&&Q(),[2]})}),[W]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("strong",{style:{float:"left"},children:"Groups"}),(0,l.jsx)(s.Z,{style:{float:"right",marginBottom:"0.5em"},onClick:q,children:"Add Group"}),(0,l.jsx)(c.Z,{component:a.Z,children:(0,l.jsxs)(u.Z,{sx:{minWidth:300},"aria-label":"Admin Group Table",children:[(0,l.jsx)(o.Z,{children:(0,l.jsx)(d.Z,{children:(0,l.jsx)(h.Z,{children:"Name"})})}),(0,l.jsx)(f.Z,{children:null==D?void 0:D.map(function(e,r){return(0,l.jsx)(d.Z,{hover:!0,children:(0,l.jsx)(h.Z,{children:(0,l.jsx)(s.Z,{onClick:function(){return J(e)},children:e})})},r)})})]})}),(0,l.jsxs)(Z.Z,{fullWidth:!0,maxWidth:"sm",open:W,onClose:z,"aria-labelledby":"dialog-title","aria-describedby":"dialog-description",children:[(0,l.jsx)(x.Z,{id:"dialog-title",children:R?"Select New Group":"New Group"}),(0,l.jsx)(p.Z,{children:R?(0,l.jsx)(y,{currentGroup:T,excludeList:D,selectCallback:H}):(0,l.jsx)(C.Z,{placeholder:"New Group...",valueProp:M,setState:U,errorMessage:V})}),(0,l.jsxs)(j.Z,{children:[R?null:(0,l.jsx)(s.Z,{onClick:K,children:"Submit"}),(0,l.jsx)(s.Z,{onClick:z,children:"Close"})]})]})]})}},62232:function(e,r,n){"use strict";n.d(r,{Z:function(){return l}});var t=n(85893),i=n(22715);function l(e){var r=e.placeholder,n=void 0===r?"":r,l=e.valueProp,s=void 0===l?"":l,c=e.setState,a=void 0===c?function(){return null}:c,u=e.errorMessage,o=void 0===u?"":u;return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(i.Z,{variant:"outlined",style:{width:"100%"},error:!!o,helperText:o,placeholder:n,onChange:function(e){var r,n=e.target.value;if(""===n){a(n);return}var t=null!==(r=e.target.value)&&void 0!==r?r:"";if(t.trim()){var i=t.replaceAll(" ","_"),l=i[i.length-1],c=s[s.length-1];(c!==l||c===l&&"_"!==c)&&a(i)}},inputProps:{"aria-label":"".concat(n+" "," policy name text input"),"data-testid":"newPolicyNameInputId"},value:s})})}n(67294)},42207:function(e,r,n){"use strict";n.d(r,{Z:function(){return y}});var t=n(47568),i=n(10092),l=n(85893),s=n(69397),c=n(4592),a=n(21987),u=n(13614),o=n(37858),d=n(75921),h=n(98102),f=n(58439),x=n(64666),Z=n(91894),j=n(35713),p=n(37645),v=n(67294),m=n(46291),g=n(87357),b=n(66489);function _(e){var r,n=e.selectCallback,s=void 0===n?function(){return null}:n,x=e.excludeList,Z=void 0===x?[]:x,j=(0,v.useState)([]),p=j[0],_=j[1],y=(0,v.useState)(!1),C=y[0],R=y[1],N=(0,m.rt)(),w=(r=(0,t.Z)(function(){var e,r=arguments;return(0,i.__generator)(this,function(n){switch(n.label){case 0:if(e=r.length>0&&void 0!==r[0]?r[0]:null,!(s&&e))return[3,2];return R(!0),[4,s(e)];case 1:n.sent(),n.label=2;case 2:return[2]}})}),function(){return r.apply(this,arguments)});return(0,v.useEffect)((0,t.Z)(function(){var e,r;return(0,i.__generator)(this,function(r){switch(r.label){case 0:return R(!0),[4,N.getResources()];case 1:return(e=r.sent())&&_(e.filter(function(e){return!Z.find(function(r){return r.Name===e.Name&&r.ResType===e.ResType&&r.Variant===e.Variant})})),R(!1),[2]}})}),[]),(0,l.jsx)(l.Fragment,{children:C?(0,l.jsx)(g.Z,{sx:{display:"flex",justifyContent:"center"},children:(0,l.jsx)(b.Z,{})}):(null==p?void 0:p.length)?(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(c.Z,{component:a.Z,children:(0,l.jsxs)(u.Z,{sx:{minWidth:300},"aria-label":"Embedded Resource Table",children:[(0,l.jsx)(o.Z,{children:(0,l.jsxs)(d.Z,{children:[(0,l.jsx)(h.Z,{children:"Name"}),(0,l.jsx)(h.Z,{children:"Variant"}),(0,l.jsx)(h.Z,{children:"Type"})]})}),(0,l.jsx)(f.Z,{children:null==p?void 0:p.map(function(e,r){var n;return(0,l.jsxs)(d.Z,{onClick:function(){return w(e)},style:{cursor:"pointer"},hover:!0,children:[(0,l.jsx)(h.Z,{children:e.Name}),(0,l.jsx)(h.Z,{children:e.Variant}),(0,l.jsx)(h.Z,{children:(n=e.ResType).split("_").map(function(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()}).join(" ")})]},r)})})]})})}):(0,l.jsx)("span",{children:"No Existing Resources!"})})}function y(e){var r,n=e.selectCallback,g=void 0===n?function(){return null}:n,b=e.userNameProp,y=void 0===b?"":b,C=e.roleNameProp,R=void 0===C?"":C,N=e.groupNameProp,w=void 0===N?"":N,k=(0,v.useState)([]),P=k[0],S=k[1],T=(0,v.useState)(!1),G=T[0],E=T[1],W=(0,m.rt)(),A=function(){E(!0)},F=function(){E(!1)},M=(r=(0,t.Z)(function(){var e,r=arguments;return(0,i.__generator)(this,function(n){switch(n.label){case 0:if(e=r.length>0&&void 0!==r[0]?r[0]:null,!(g&&e))return[3,2];return[4,g(e)];case 1:n.sent(),F(),n.label=2;case 2:return[2]}})}),function(){return r.apply(this,arguments)});return(0,v.useEffect)((0,t.Z)(function(){var e;return(0,i.__generator)(this,function(r){switch(r.label){case 0:if(G)return[3,7];if(e=[],!y)return[3,2];return[4,W.getUserResources(y)];case 1:case 3:return e=r.sent(),[3,6];case 2:if(!R)return[3,4];return[4,W.getRoleResources(R)];case 4:if(!w)return[3,6];return[4,W.getGroupResources(w)];case 5:e=r.sent(),r.label=6;case 6:e&&S(e),r.label=7;case 7:return[2]}})}),[G]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("strong",{style:{float:"left"},children:"Resources"}),(0,l.jsx)(s.Z,{style:{float:"right",marginBottom:"0.5em"},onClick:A,"data-testid":"addResourceTestId",children:"Add Resource"}),(0,l.jsx)(c.Z,{component:a.Z,children:(0,l.jsxs)(u.Z,{sx:{minWidth:300},"aria-label":"Admin Resource Table",children:[(0,l.jsx)(o.Z,{children:(0,l.jsxs)(d.Z,{children:[(0,l.jsx)(h.Z,{children:"Name"}),(0,l.jsx)(h.Z,{children:"Variant"}),(0,l.jsx)(h.Z,{children:"Type"})]})}),(0,l.jsx)(f.Z,{children:null==P?void 0:P.map(function(e,r){return(0,l.jsxs)(d.Z,{hover:!0,children:[(0,l.jsx)(h.Z,{children:e.Name}),(0,l.jsx)(h.Z,{children:e.Variant}),(0,l.jsx)(h.Z,{children:e.ResType})]},r)})})]})}),(0,l.jsxs)(x.Z,{fullWidth:!0,maxWidth:"sm",open:G,onClose:F,"aria-labelledby":"dialog-title","aria-describedby":"dialog-description",children:[(0,l.jsx)(p.Z,{id:"dialog-title",children:"Select new resource"}),(0,l.jsx)(j.Z,{children:(0,l.jsx)(_,{excludeList:P,selectCallback:M})}),(0,l.jsx)(Z.Z,{children:(0,l.jsx)(s.Z,{onClick:F,children:"Close"})})]})]})}},41912:function(e,r,n){"use strict";n.d(r,{Z:function(){return R}});var t=n(47568),i=n(10092),l=n(85893),s=n(69397),c=n(4592),a=n(21987),u=n(13614),o=n(37858),d=n(75921),h=n(98102),f=n(58439),x=n(37645),Z=n(64666),j=n(91894),p=n(35713),v=n(11163),m=n(67294),g=n(46291),b=n(87357),_=n(66489);function y(e){var r,n=e.currentRole,s=void 0===n?"":n,x=e.excludeList,Z=void 0===x?[]:x,j=e.selectCallback,p=void 0===j?function(){return null}:j,v=(0,m.useState)([]),y=v[0],C=v[1],R=(0,m.useState)(!1),N=R[0],w=R[1],k=(0,g.rt)(),P=(r=(0,t.Z)(function(){var e,r=arguments;return(0,i.__generator)(this,function(n){switch(n.label){case 0:if(e=r.length>0&&void 0!==r[0]?r[0]:null,!(p&&e))return[3,2];return w(!0),[4,p(e)];case 1:n.sent(),n.label=2;case 2:return[2]}})}),function(){return r.apply(this,arguments)});return(0,m.useEffect)((0,t.Z)(function(){var e,r;return(0,i.__generator)(this,function(r){switch(r.label){case 0:return w(!0),[4,k.getRoles()];case 1:return(e=r.sent())&&(Z.push(s),C(e.filter(function(e){return!Z.includes(e)}))),w(!1),[2]}})}),[]),(0,l.jsx)(l.Fragment,{children:N?(0,l.jsx)(b.Z,{sx:{display:"flex",justifyContent:"center"},children:(0,l.jsx)(_.Z,{})}):(0,l.jsx)(c.Z,{component:a.Z,children:(0,l.jsxs)(u.Z,{sx:{minWidth:300},"aria-label":"Admin Role Table",children:[(0,l.jsx)(o.Z,{children:(0,l.jsx)(d.Z,{children:(0,l.jsx)(h.Z,{children:"Name"})})}),(0,l.jsx)(f.Z,{children:null==y?void 0:y.map(function(e,r){return(0,l.jsx)(d.Z,{onClick:function(){return P(e)},style:{cursor:"pointer"},hover:!0,children:(0,l.jsx)(h.Z,{children:e})},r)})})]})})})}var C=n(62232);function R(e){var r,n,b,_=e.selectMode,R=void 0!==_&&_,N=e.embeddedMode,w=void 0!==N&&N,k=e.selectCallback,P=void 0===k?function(){return null}:k,S=e.userNameProp,T=void 0===S?"":S,G=e.roleNameProp,E=void 0===G?"":G,W=(0,v.useRouter)(),A=(0,m.useState)(!1),F=A[0],M=A[1],U=(0,m.useState)(""),L=U[0],V=U[1],B=(0,m.useState)(""),I=B[0],D=B[1],O=(0,m.useState)([]),X=O[0],q=O[1],z=(0,g.rt)(),H=function(){V(""),D(""),M(!0)},J=function(){M(!1),V("")},K=(r=(0,t.Z)(function(e){var r,n;return(0,i.__generator)(this,function(r){switch(r.label){case 0:if(e.preventDefault(),!((null==L?void 0:L.trim())&&L.replaceAll("_","").length>2))return[3,4];return[4,z.addRole(L)];case 1:if(!r.sent())return[3,3];return[4,z.getRoles()];case 2:q(r.sent()),r.label=3;case 3:return J(),[3,5];case 4:D("Please enter a name. Must be 3 characters or longer."),r.label=5;case 5:return[2]}})}),function(e){return r.apply(this,arguments)}),Q=(n=(0,t.Z)(function(){var e,r=arguments;return(0,i.__generator)(this,function(n){switch(n.label){case 0:if(e=r.length>0&&void 0!==r[0]?r[0]:null,!(P&&e))return[3,2];return[4,P(e)];case 1:n.sent(),n.label=2;case 2:return J(),[2]}})}),function(){return n.apply(this,arguments)}),Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e&&W.push("/admin/role/"+e)},$=(b=(0,t.Z)(function(){var e;return(0,i.__generator)(this,function(r){switch(r.label){case 0:if(e=[],!T)return[3,2];return[4,z.getUserRoles(T)];case 1:case 3:return e=r.sent(),[3,6];case 2:if(!E)return[3,4];return[4,z.getChildRoles(E)];case 4:return[4,z.getRoles()];case 5:e=r.sent(),r.label=6;case 6:return e&&q(e),[2]}})}),function(){return b.apply(this,arguments)});return(0,m.useEffect)((0,t.Z)(function(){return(0,i.__generator)(this,function(e){switch(e.label){case 0:if(w)return[3,2];return[4,$()];case 1:e.sent(),e.label=2;case 2:return[2]}})}),[]),(0,m.useEffect)((0,t.Z)(function(){return(0,i.__generator)(this,function(e){return w&&!F&&$(),[2]})}),[F]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("strong",{style:{float:"left"},children:"Roles"}),R?null:(0,l.jsx)(s.Z,{style:{float:"right",marginBottom:"0.5em"},onClick:H,"data-testid":"addRoleTestId",children:"Add Role"}),(0,l.jsx)(c.Z,{component:a.Z,children:(0,l.jsxs)(u.Z,{sx:{minWidth:300},"aria-label":"Admin Role Table",children:[(0,l.jsx)(o.Z,{children:(0,l.jsx)(d.Z,{children:(0,l.jsx)(h.Z,{children:"Name"})})}),(0,l.jsx)(f.Z,{children:null==X?void 0:X.map(function(e,r){return(0,l.jsx)(d.Z,{hover:!0,children:R?(0,l.jsx)(h.Z,{children:e}):(0,l.jsx)(h.Z,{children:(0,l.jsx)(s.Z,{onClick:function(){return Y(e)},children:e})})},r)})})]})}),(0,l.jsxs)(Z.Z,{fullWidth:!0,maxWidth:"sm",open:F,onClose:J,"aria-labelledby":"dialog-title","aria-describedby":"dialog-description",children:[(0,l.jsx)(x.Z,{id:"dialog-title",children:w?"Select New Role":"New Role"}),(0,l.jsx)(p.Z,{children:w?(0,l.jsx)(y,{currentRole:E,excludeList:X,selectCallback:Q}):(0,l.jsx)(C.Z,{placeholder:"New Role...",valueProp:L,setState:V,errorMessage:I})}),(0,l.jsxs)(j.Z,{children:[w?null:(0,l.jsx)(s.Z,{onClick:K,children:"Submit"}),(0,l.jsx)(s.Z,{onClick:J,children:"Close"})]})]})]})}},57225:function(e,r,n){"use strict";n.d(r,{Z:function(){return p}});var t=n(47568),i=n(10092),l=n(85893),s=n(4592),c=n(21987),a=n(13614),u=n(37858),o=n(75921),d=n(98102),h=n(58439),f=n(69397),x=n(11163),Z=n(67294),j=n(46291);function p(e){var r=e.roleNameProp,n=void 0===r?"":r,p=(0,x.useRouter)(),v=(0,Z.useState)([]),m=v[0],g=v[1],b=(0,j.rt)(),_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e&&p.push("/admin/user/"+e)};return(0,Z.useEffect)((0,t.Z)(function(){var e;return(0,i.__generator)(this,function(r){switch(r.label){case 0:if(e=[],!n)return[3,2];return[4,b.getRoleUsers(n)];case 1:return e=r.sent(),[3,4];case 2:return[4,b.getUsers()];case 3:e=r.sent(),r.label=4;case 4:return e&&g(e),[2]}})}),[]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("strong",{style:{float:"left",paddingBottom:"1em"},children:"Users"}),(0,l.jsx)(s.Z,{component:c.Z,children:(0,l.jsxs)(a.Z,{sx:{minWidth:300},"aria-label":"Admin User Table",children:[(0,l.jsx)(u.Z,{children:(0,l.jsx)(o.Z,{children:(0,l.jsx)(d.Z,{children:"Name"})})}),(0,l.jsx)(h.Z,{children:null==m?void 0:m.map(function(e,r){return(0,l.jsx)(o.Z,{hover:!0,children:(0,l.jsx)(d.Z,{children:(0,l.jsx)(f.Z,{onClick:function(){return _(e)},children:e})})},r)})})]})})]})}}},function(e){e.O(0,[9774,2888,179],function(){return e(e.s=77902)}),_N_E=e.O()}]);