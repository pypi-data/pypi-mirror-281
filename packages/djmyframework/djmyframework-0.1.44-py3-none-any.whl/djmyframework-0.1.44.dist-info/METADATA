Metadata-Version: 2.1
Name: djmyframework
Version: 0.1.44
Summary: django myframework
Home-page: https://github.com/xzregg/dj_myframework.git
Author: xzregg
Author-email: xzregg@gmail.com
License: UNKNOWN
Platform: UNKNOWN
Classifier: Programming Language :: Python :: 3
Classifier: License :: OSI Approved :: MIT License
Classifier: Operating System :: OS Independent
Requires-Python: >=3.6
Description-Content-Type: text/markdown
Requires-Dist: 2to3 (==1.0)
Requires-Dist: celery (==5.0.5)
Requires-Dist: Django (==3.1.10)
Requires-Dist: django-debug-toolbar (==3.2)
Requires-Dist: django-extensions (==2.1.6)
Requires-Dist: django-filter (==2.4.0)
Requires-Dist: djangorestframework (==3.12.2)
Requires-Dist: drf-dynamic-fields (==0.3.1)
Requires-Dist: drf-yasg (==1.20.0)
Requires-Dist: Faker (==1.0.5)
Requires-Dist: arrow (==0.13.2)
Requires-Dist: gunicorn (==20.0.4)
Requires-Dist: Jinja2 (==2.11.3)
Requires-Dist: MarkupSafe (==2.0.1)
Requires-Dist: Mako (==1.1.0)
Requires-Dist: Markdown (==3.1.1)
Requires-Dist: pillow-10.1.0
Requires-Dist: protobuf (==3.12.2)
Requires-Dist: PyMySQL (==1.0.2)
Requires-Dist: PyYAML (==5.4.1)
Requires-Dist: redis (==3.2.1)
Requires-Dist: requests (==2.25.1)
Requires-Dist: sqlparse (==0.3.0)
Requires-Dist: supervisor (==4.2.0)
Requires-Dist: supervisor-multiprocesslogging
Requires-Dist: vthread (==0.1.1)
Requires-Dist: rsa (==4.6)
Requires-Dist: objectdict
Requires-Dist: pypinyin (==0.41.0)
Requires-Dist: addict (==2.4.0)
Requires-Dist: furl (==2.1.2)
Requires-Dist: xlrd (==2.0.1)
Requires-Dist: uvicorn[standard]
Requires-Dist: channels (==3.0.3)
Requires-Dist: channels-redis (==3.2.0)
Requires-Dist: django-redis (==4.12.1)
Requires-Dist: sqlalchemy (==1.4.23)
Requires-Dist: ldaptor (==19.1.0)
Requires-Dist: django-celery-results (==2.0.1)
Requires-Dist: django-celery-beat (==2.2.0)
Requires-Dist: django-user-agents (==0.4.0)
Requires-Dist: python-ldap (==3.3.1)
Requires-Dist: etcd3 (==0.12.0)
Requires-Dist: pycryptodome (==3.9.4)
Requires-Dist: uvloop
Requires-Dist: python-decouple (==3.4)
Requires-Dist: django-timezone-field (==4.2.1)
Requires-Dist: djangorestframework-recursive (==0.1.2)
Requires-Dist: addict
Requires-Dist: django-mptt (==0.11.0)
Requires-Dist: django-log-request-id (==1.4.0)
Requires-Dist: raven (==6.10.0)
Requires-Dist: xlsxwriter (==3.0.5)
Requires-Dist: openpyxl (==3.0.9)


[![PyPI version](https://badge.fury.io/py/djmyframework.svg)](https://badge.fury.io/py/djmyframework)

## 通用后台框架 3.7

### 特性
 - 在settings 配置INSTALL_APPS即可.
 - 无需配置urls,文件,约定大于配置.
 - 功能按apps目录分离.
 - 前后端分离,后端只返回json
 - 快速生成CURD模型
 - 多国语言
   - python manage.py makemessages  -i venv -l en
   - python manage.py  compilemessages -l en
   > 不要使用 django-admin ，会把 venv 带进去
 - 支持OpenApi 自动生成文档,客户端
  - python manage.py generate_swagger -f json -o static/api.json
  - 使用 idea OpenAPI Generator 插件生成客户端,On an OpenAPI Definition JSON or YAML file: Code -> OpenAPI -> Generate from document
 - 使用 jinja2 模板引擎

 
 
#### 放弃rest ,不适合业务
 - status_code 不够使用
 - 地址/xx/{id} 形式,容易产生缓存,不容易测试,批量删除与修改不方便
 - rest_framework 默认是使用csrf_exempt
 - 只使用 post ,get 方法
 
### 设置apps目录 
```bash
pycharm -> project structure -> 设置apps目录为source
``` 
 
 
### 新建表结构
```bash
python3 manage.py migrate 
```

## 前端使用库
 - jquery https://jquery.com/
 - 表单 jquery.form http://malsup.com/jquery/form/
 - ui 框架 bootstrap-3 https://v3.bootcss.com/
 - Bootstrap Tags Input http://bootstrap-tagsinput.github.io/bootstrap-tagsinput/examples/
 - 弹出框 dialog http://demo.jb51.net/js/2011/artDialog/_doc/API.html
 - 表格 bootstrap-table https://examples.bootstrap-table.com/index.html?bootstrap3#view-source 
 - 选择框 select2 https://select2.org/
 - 日期框 daterangepicker https://www.daterangepicker.cn/
 - progress.js https://usablica.github.io/progress.js/
 - vue 2.6 https://vuejs.org/
 - ant design vue https://www.antdv.com/docs/vue/introduce-cn/


## redoc
 - 使用 swagger_auto_schema 添加注释文档
 - query_serializer 查询参数 get/post 使用
 - request_body 请求主体 post 用
 - responses 返回
 - 生成 json/yaml 文件
```
    python manage.py generate_swagger -f yaml - >static/yaml.json
```
 - OpenAPI Generator 自动生成客户端文件 pycharm 插件 code -> OpenApi 
 
### 需要解决
 - 统一用 swagger_auto_schema 添加api文档注释,并且增加参数校验
   - 侵入度低,使用 __annotations__ 辅助
  
 - 返回response 统一带 code 参数有,需要统一增加,返回错误代码,也许动态增加,建议不使用动态生成rsp
 - 请求 body ,query, 需要添加filter,page_size 参数
 
## 快速上手 开发流程
#### 创建 app
 1.  与 django 命令相同,不过默认使用 framework 下的 app 模板
```bash
pip3 install djmyframework
mkdir xxxProject
cd xxxProject
djmyframework_init 
python3 manage.py create_app xxxApp
python3 manage.py migrate
python3 manage.py create_root
python3 manage.py create_role
python3 manage.py create_menu -m config.system_menu

```

#### 创建增删改查
 1. 定义好 models 后, 执行自动创建 view,template 模板
 ```bash
python3  manage.py create_curd {app_name}.{Model}
```

#### 部署
 - 安装依赖
```
pip install -r requirements.txt -i https://mirrors.aliyun.com/pypi/simple/

```
 - 静态文件部署
 ```
 python manage.py collectstatic
 ```

 - 启动服务
   参看 supervisorctl 用法
 ```
 mysupervisorctl start
 ```

