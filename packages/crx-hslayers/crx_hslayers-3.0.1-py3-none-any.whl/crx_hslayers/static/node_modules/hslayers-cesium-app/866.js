"use strict";(self.webpackChunkhslayers_cesium_app=self.webpackChunkhslayers_cesium_app||[]).push([[866],{98866:(xe,N,n)=>{n.d(N,{B:()=>De});var D=n(89204),Y=n(63617),$=n(5342),B=n(60411),J=n(77662),X=n(36758),K=n(17545),Z=n(67591),k=n(40163),q=n(14908),V=n(57270),O=n(61660),_=n(7375);class te extends _.Ay{constructor(r,e){super(r),this.vertex=e.vertex,this.vertexPixel=e.vertexPixel,this.feature=e.feature,this.segment=e.segment}}var x=n(84505),C=n(18195),U=n(93812),A=n(45363),b=n(75889),E=n(92452);function Q(g){return g.feature?g.feature:g.element?g.element:null}const P=[],re=class se extends k.A{constructor(r){const e=r=r||{};e.handleDownEvent||(e.handleDownEvent=O.rT),e.stopDown||(e.stopDown=O.W8),super(e),this.source_=r.source?r.source:null,this.vertex_=void 0===r.vertex||r.vertex,this.edge_=void 0===r.edge||r.edge,this.features_=r.features?r.features:null,this.featuresListenerKeys_=[],this.featureChangeListenerKeys_={},this.indexedFeaturesExtents_={},this.pendingFeatures_={},this.pixelTolerance_=void 0!==r.pixelTolerance?r.pixelTolerance:10,this.rBush_=new q.A,this.GEOMETRY_SEGMENTERS_={Point:this.segmentPointGeometry_.bind(this),LineString:this.segmentLineStringGeometry_.bind(this),LinearRing:this.segmentLineStringGeometry_.bind(this),Polygon:this.segmentPolygonGeometry_.bind(this),MultiPoint:this.segmentMultiPointGeometry_.bind(this),MultiLineString:this.segmentMultiLineStringGeometry_.bind(this),MultiPolygon:this.segmentMultiPolygonGeometry_.bind(this),GeometryCollection:this.segmentGeometryCollectionGeometry_.bind(this),Circle:this.segmentCircleGeometry_.bind(this)}}addFeature(r,e){e=void 0===e||e;const t=(0,b.v6)(r),s=r.getGeometry();if(s){const a=this.GEOMETRY_SEGMENTERS_[s.getType()];if(a){this.indexedFeaturesExtents_[t]=s.getExtent((0,x.createEmpty)());const o=[];if(a(o,s),1===o.length)this.rBush_.insert((0,x.boundingExtent)(o[0]),{feature:r,segment:o[0]});else if(o.length>1){const i=o.map(u=>(0,x.boundingExtent)(u)),l=o.map(u=>({feature:r,segment:u}));this.rBush_.load(i,l)}}}e&&(this.featureChangeListenerKeys_[t]=(0,E.KT)(r,Z.A.CHANGE,this.handleFeatureChange_,this))}getFeatures_(){let r;return this.features_?r=this.features_:this.source_&&(r=this.source_.getFeatures()),r}handleEvent(r){const e=this.snapTo(r.pixel,r.coordinate,r.map);return e&&(r.coordinate=e.vertex.slice(0,2),r.pixel=e.vertexPixel,this.dispatchEvent(new te("snap",{vertex:r.coordinate,vertexPixel:r.pixel,feature:e.feature,segment:e.segment}))),super.handleEvent(r)}handleFeatureAdd_(r){const e=Q(r);e&&this.addFeature(e)}handleFeatureRemove_(r){const e=Q(r);e&&this.removeFeature(e)}handleFeatureChange_(r){const e=r.target;if(this.handlingDownUpSequence){const t=(0,b.v6)(e);t in this.pendingFeatures_||(this.pendingFeatures_[t]=e)}else this.updateFeature_(e)}handleUpEvent(r){const e=Object.values(this.pendingFeatures_);return e.length&&(e.forEach(this.updateFeature_.bind(this)),this.pendingFeatures_={}),!1}removeFeature(r,e){const t=void 0===e||e,s=(0,b.v6)(r),a=this.indexedFeaturesExtents_[s];if(a){const o=this.rBush_,i=[];o.forEachInExtent(a,function(l){r===l.feature&&i.push(l)});for(let l=i.length-1;l>=0;--l)o.remove(i[l])}t&&((0,E.JH)(this.featureChangeListenerKeys_[s]),delete this.featureChangeListenerKeys_[s])}setMap(r){const e=this.getMap(),t=this.featuresListenerKeys_,s=this.getFeatures_();e&&(t.forEach(E.JH),t.length=0,this.rBush_.clear(),Object.values(this.featureChangeListenerKeys_).forEach(E.JH),this.featureChangeListenerKeys_={}),super.setMap(r),r&&(this.features_?t.push((0,E.KT)(this.features_,K.A.ADD,this.handleFeatureAdd_,this),(0,E.KT)(this.features_,K.A.REMOVE,this.handleFeatureRemove_,this)):this.source_&&t.push((0,E.KT)(this.source_,V.A.ADDFEATURE,this.handleFeatureAdd_,this),(0,E.KT)(this.source_,V.A.REMOVEFEATURE,this.handleFeatureRemove_,this)),s.forEach(a=>this.addFeature(a)))}snapTo(r,e,t){const s=t.getView().getProjection(),a=(0,A.fromUserCoordinate)(e,s),o=(0,A.toUserExtent)((0,x.buffer)((0,x.boundingExtent)([a]),t.getView().getResolution()*this.pixelTolerance_),s),i=this.rBush_.getInExtent(o),l=i.length;if(0===l)return null;let u,v,d=1/0,M=null;const R=this.pixelTolerance_*this.pixelTolerance_,T=()=>{if(u){const m=t.getPixelFromCoordinate(u);if((0,C.hG)(r,m)<=R)return{vertex:u,vertexPixel:[Math.round(m[0]),Math.round(m[1])],feature:v,segment:M}}return null};if(this.vertex_){for(let p=0;p<l;++p){const L=i[p];"Circle"!==L.feature.getGeometry().getType()&&L.segment.forEach(S=>{const f=(0,A.fromUserCoordinate)(S,s),w=(0,C.hG)(a,f);w<d&&(u=S,d=w,v=L.feature)})}const m=T();if(m)return m}if(this.edge_){for(let p=0;p<l;++p){let L=null;const S=i[p];if("Circle"===S.feature.getGeometry().getType()){let f=S.feature.getGeometry();const w=(0,A.getUserProjection)();w&&(f=f.clone().transform(w,s)),L=(0,C.hw)(a,f)}else{const[f,w]=S.segment;w&&(P[0]=(0,A.fromUserCoordinate)(f,s),P[1]=(0,A.fromUserCoordinate)(w,s),L=(0,C.sG)(a,P))}if(L){const f=(0,C.hG)(a,L);f<d&&(u=(0,A.toUserCoordinate)(L,s),M="Circle"===S.feature.getGeometry().getType()?null:S.segment,d=f,v=S.feature)}}const m=T();if(m)return m}return null}updateFeature_(r){this.removeFeature(r,!1),this.addFeature(r,!1)}segmentCircleGeometry_(r,e){const t=this.getMap().getView().getProjection();let s=e;const a=(0,A.getUserProjection)();a&&(s=s.clone().transform(a,t));const o=(0,U.fromCircle)(s);a&&o.transform(t,a);const i=o.getCoordinates()[0];for(let l=0,u=i.length-1;l<u;++l)r.push(i.slice(l,l+2))}segmentGeometryCollectionGeometry_(r,e){const t=e.getGeometriesArray();for(let s=0;s<t.length;++s){const a=this.GEOMETRY_SEGMENTERS_[t[s].getType()];a&&a(r,t[s])}}segmentLineStringGeometry_(r,e){const t=e.getCoordinates();for(let s=0,a=t.length-1;s<a;++s)r.push(t.slice(s,s+2))}segmentMultiLineStringGeometry_(r,e){const t=e.getCoordinates();for(let s=0,a=t.length;s<a;++s){const o=t[s];for(let i=0,l=o.length-1;i<l;++i)r.push(o.slice(i,i+2))}}segmentMultiPointGeometry_(r,e){e.getCoordinates().forEach(t=>{r.push([t])})}segmentMultiPolygonGeometry_(r,e){const t=e.getCoordinates();for(let s=0,a=t.length;s<a;++s){const o=t[s];for(let i=0,l=o.length;i<l;++i){const u=o[i];for(let d=0,v=u.length-1;d<v;++d)r.push(u.slice(d,d+2))}}}segmentPointGeometry_(r,e){r.push([e.getCoordinates()])}segmentPolygonGeometry_(r,e){const t=e.getCoordinates();for(let s=0,a=t.length;s<a;++s){const o=t[s];for(let i=0,l=o.length-1;i<l;++i)r.push(o.slice(i,i+2))}}};var ie=n(12328),j=n(53848),ae=n(97790),ne=n(68710),oe=n(12912),le=n(40804),he=n(16613),H=n(84205);class ce{constructor(){this.drawableLayers=[],this.drawableLaymanLayers=[],this.drawableLayersAvailable=!1,this.hasSomeDrawables=!1,this.moreThanOneDrawable=!1,this.boxSelectionActive=!1,this.snapActive=!1,this.drawActive=!1,this.selectedFeatures=new he.A,this.toggleSelectionString="selectAllFeatures",this.highlightDrawButton=!1,this.onlyMine=!0,this.addedLayersRemoved=!1,this.eventHandlers=[],this.drawingLayerChanges=new H.B,this.layerMetadataDialog=new H.B,this.pendingLayers=[],this.requiredSymbolizer={Point:["Point"],Polygon:["Fill","Line","Polygon"],LineString:["Line"],Circle:["Fill","Line","Polygon"]}}}var I=n(5991),h=n(88716),c=n(7404),de=n(14608),W=n(27426),ue=n(22187),ye=n(24025),ge=n(93108),fe=n(38243),ve=n(40736),z=n(76253),me=n(25550),Le=n(91459),G=n(94928),Se=n(23916),pe=n(78373),we=n(9601);const F="tmpDrawLayer";let De=(()=>{class g extends ce{constructor(e,t,s,a,o,i,l,u,d,v,M,R,T,m,p,L,S,f,w){super(),this.hsMapService=e,this.hsLayerUtilsService=t,this.hsEventBusService=s,this.hsLayoutService=a,this.hsDialogContainerService=o,this.hsLogService=i,this.hsConfig=l,this.hsQueryBaseService=u,this.hsQueryVectorService=d,this.hsLaymanService=v,this.hsLanguageService=M,this.hsLaymanBrowserService=R,this.hsAddDataVectorService=T,this.hsUtilsService=m,this.hsCommonLaymanService=p,this.hsToastService=L,this.hsAddDataOwsService=S,this.hsRemoveLayerDialogService=f,this.zone=w,this.keyUp=this.keyUp.bind(this),this.hsMapService.loaded().then(Ae=>{this.fillDrawableLayers(),this.hsMapService.getLayersArray().forEach(y=>y.on("change:visible",Ee=>{this.draw&&y==this.selectedLayer&&this.setType(this.type),this.fillDrawableLayers()})),this.modify=new J.A({features:this.selectedFeatures}),Ae.addInteraction(this.modify),this.selectedFeatures.on("add",y=>{this.onSelected&&this.onSelected(y)}),this.selectedFeatures.on("remove",y=>{0==this.selectedFeatures.getLength()&&this.modify.setActive(!1)}),this.hsEventBusService.vectorQueryFeatureSelection.subscribe(y=>{this.selectedFeatures.push(y.feature),(0,h.M8)(y.selector.getLayer(y.feature)).editable&&this.modify.setActive(!0)}),this.hsEventBusService.vectorQueryFeatureDeselection.subscribe(({feature:y})=>{this.selectedFeatures.remove(y)}),this.hsLaymanService.laymanLayerPending.subscribe(y=>{this.pendingLayers=y}),(0,Y.h)(this.hsEventBusService.addedLayersRemoved,this.hsEventBusService.mapResets).subscribe(()=>{this.addedLayersRemoved=!0,this.fillDrawableLayers()}),this.hsLayoutService.mainpanel$.subscribe(y=>{"draw"===y&&this.hsMapService.getMap()&&this.fillDrawableLayers()}),this.hsCommonLaymanService.authChange.subscribe(y=>{this.fillDrawableLayers(),this.isAuthenticated=y?.authenticated,this.selectedLayer&&this.tmpDrawLayer&&((0,h.o3)(this.selectedLayer,y?.user),(0,h.YK)(this.selectedLayer,{format:this.isAuthenticated?"WFS":null,url:this.isAuthenticated?this.hsCommonLaymanService.layman?.url+"/wfs":null}))})})}selectedLayerString(){if(this.selectedLayer){const e=(0,h.LK)(this.selectedLayer);return e==F?this.translate("DRAW.unsavedDrawing"):this.hsLanguageService.getTranslationIgnoreNonExisting("LAYERS",e,void 0)||(0,h.mG)(this.selectedLayer)}return this.translate("DRAW.Select layer")}snapLayerString(){if(this.snapLayer){const e=(0,h.LK)(this.snapLayer);return this.hsLanguageService.getTranslationIgnoreNonExisting("LAYERS",e,void 0)||(0,h.mG)(this.snapLayer)}}saveDrawingLayer(){this.selectedLayer&&(this.previouslySelected=this.selectedLayer);let e=this.translate("DRAW.drawLayer");const t=this.hsMapService.findLayerByTitle(F),s=t?t.getSource():new B.A;let a=1;for(;this.hsMapService.findLayerByTitle(e);)e=`${this.translate("DRAW.drawLayer")} ${a++}`;const o=this.hsCommonLaymanService.layman,i=new j.A({source:s,visible:!0});(0,h.D6)(i,e),(0,h.t0)(i,!0),(0,h.Gu)(i,!0),(0,h.QH)(i,I.lv),(0,h.ad)(i,{editable:!0}),(0,h.SO)(i,this.hsConfig.defaultDrawLayerPath||"User generated"),(0,h.YK)(i,{format:this.isAuthenticated?"WFS":null,url:this.isAuthenticated?o.url+"/wfs":null}),(0,h.o3)(i,o?.user),this.tmpDrawLayer=!0,this.selectedLayer=i,this.layerMetadataDialog.next()}setType(e){if(this.type==e){this.type=null,this.deactivateDrawing();const t=this.hsMapService.findLayerByTitle(F)||null;return t&&(this.hsMapService.getMap().removeLayer(t),this.tmpDrawLayer=!1),this.hsQueryBaseService.activateQueries(),!1}if(0==this.drawableLayers.length&&!this.tmpDrawLayer){const t=new j.A({source:new B.A,visible:!0});(0,h.QH)(t,I.lv),(0,h.D6)(t,F),(0,h.t0)(t,!1),(0,h.Gu)(t,!0),(0,h.ad)(t,{editable:!0}),(0,h.SO)(t,this.hsConfig.defaultDrawLayerPath||"User generated"),this.tmpDrawLayer=!0,this.selectedLayer=t,this.addDrawLayer(t)}return this.type=e,this.selectedLayer&&(this.source=this.hsLayerUtilsService.isLayerClustered(this.selectedLayer)?this.selectedLayer.getSource().getSource():this.selectedLayer.getSource()),!0}selectLayer(e){var t=this;return(0,D.A)(function*(){let s,a;if(e instanceof ae.A||(s=yield t.hsLaymanBrowserService.fillLayerMetadata(t.laymanEndpoint,e)),s){if(!s?.type?.includes("WFS"))return void("yes"==(yield t.hsDialogContainerService.create(le.d,{message:"DRAW.thisLayerDoesNotSupportDrawing",title:"DRAW.notAVectorLayer"}).waitResult())&&(yield t.hsAddDataOwsService.connectToOWS({type:"wms",uri:decodeURIComponent(s.wms.url),layer:e.name}),t.selectedLayer=null,t.fillDrawableLayers()));s.style?.url&&(a=yield t.hsCommonLaymanService.getStyleFromUrl(s.style?.url)),"sld"==s.style?.type&&(a?.includes("StyledLayerDescriptor")||(a=void 0)),"qml"==s.style?.type&&(a?.includes("<qgis")||(a=void 0))}let o=e;e.workspace&&(o=yield t.hsAddDataVectorService.addVectorLayer("wfs",t.laymanEndpoint.url,e.name,e.title,void 0,"EPSG:4326",{workspace:e.workspace,saveToLayman:!0,style:a}),o=t.hsMapService.findLayerByTitle(e.title)),o!=t.selectedLayer&&(t.selectedLayer&&(0,h.LK)(t.selectedLayer)==F&&(t.tmpDrawLayer=!1,t.hsMapService.getMap().removeLayer(t.selectedLayer)),t.selectedLayer=o,t.changeDrawSource()),t.fillDrawableLayers()})()}addDrawLayer(e){this.hsMapService.getMap().addLayer(e),this.fillDrawableLayers()}updateStyle(e){this.draw&&(this.currentStyle=e(),this.draw.getOverlay().setStyle(this.currentStyle))}onDrawEnd(e){if(!(0,h.M8)(this.selectedLayer))return;const t=(0,h.M8)(this.selectedLayer);if(t.defaultAttributes)for(const s in t.defaultAttributes)e.feature.set(s,t.defaultAttributes[s]);"draw"!=this.hsLayoutService.mainpanel&&this.hsConfig.openQueryPanelOnDrawEnd&&this.hsLayoutService.setMainPanel("query"),setTimeout(()=>{this.addFeatureToSelector(e.feature)})}addFeatureToSelector(e){this.zone.run(()=>{this.hsQueryBaseService.clear("features"),this.hsQueryVectorService.selector.getFeatures().push(e),this.hsQueryVectorService.createFeatureAttributeList()})}afterDrawEnd(){this.draw&&this.draw.setActive(!1),this.drawActive=!1}removeLastPoint(){this.draw.removeLastPoint()}changeDrawSource(){void 0!==this.selectedLayer.getSource&&(this.source=this.hsLayerUtilsService.isLayerClustered(this.selectedLayer)?this.selectedLayer.getSource().getSource():this.selectedLayer.getSource(),this.drawingLayerChanges.next({layer:this.selectedLayer,source:this.source}),this.draw&&(this.activateDrawing({drawState:!0}),this.snapLayer=this.selectedLayer,this.toggleSnapping(this.source)))}deactivateDrawing(){var e=this;return(0,D.A)(function*(){const t=yield e.hsMapService.loaded();if(e.afterDrawEnd(),e.draw){for(const s of e.eventHandlers)(0,oe.e)(s);t.removeInteraction(e.draw),e.draw=null}})()}stopDrawing(){if(this.draw&&null!==this.draw){try{this.draw.getActive()&&this.draw.finishDrawing()}catch(e){this.hsLogService.warn(e)}this.draw.setActive(!1),this.modify.setActive(!1),this.hsQueryBaseService.activateQueries(),this.type=null,this.drawActive=!1}}startDrawing(){const e=this.draw;try{e.getActive()&&e.finishDrawing()}catch(t){this.hsLogService.warn(t)}e.setActive(!0)}fillDrawableLayers(){var e=this;return(0,D.A)(function*(){yield e.hsMapService.loaded();const t=e.hsMapService.getLayersArray().filter(s=>e.hsLayerUtilsService.isLayerDrawable(s));0!=t.length||e.tmpDrawLayer?t.length>0&&e.selectedLayerNotAvailable(t)&&(e.selectedLayer=t[0],e.changeDrawSource()):(e.type=null,e.deactivateDrawing(),e.selectedLayer=null,e.snapSource=null),e.addedLayersRemoved=!1,e.drawableLayers=t,e.laymanEndpoint=e.hsCommonLaymanService.layman,e.laymanEndpoint&&(yield(0,$.s)(e.hsLaymanBrowserService.queryCatalog(e.laymanEndpoint,{onlyMine:e.onlyMine,limit:"",query:{}})),e.laymanEndpoint.layers&&(e.drawableLaymanLayers=e.laymanEndpoint.layers.filter(s=>!e.hsMapService.findLayerByTitle(s.title)&&s.editable))),e.drawableLayersAvailable=e.drawableLayers.length>0||e.drawableLaymanLayers.length>0,e.hasSomeDrawables=e.drawableLayers.length>0,e.moreThanOneDrawable=e.drawableLayers?.length>1})()}selectedLayerNotAvailable(e){return!!this.addedLayersRemoved||!this.tmpDrawLayer&&!e.some(t=>this.selectedLayer&&(0,h.LK)(t)==(0,h.LK)(this.selectedLayer))||!this.selectedLayer}keyUp(e){"Backspace"==e.key&&this.removeLastPoint()}rightClickCondition(e,t){const s=this.hsConfig.preserveLastSketchPoint?1:0;return t>=e-s&&(setTimeout(()=>{0==s&&this.removeLastPoint(),this.draw.finishDrawing()},250),!0)}activateDrawing({onDrawStart:e,onDrawEnd:t=(i=>this.onDrawEnd(i)),onSelected:s,onDeselected:a,drawState:o=!0}){var i=this;return(0,D.A)(function*(){i.onDeselected=a,i.onSelected=s,yield i.deactivateDrawing(),i.hsQueryBaseService.deactivateQueries();const l=new X.Ay({source:i.source,type:i.type,condition:d=>{if(1===d.originalEvent.buttons)return!0;if(2===d.originalEvent.buttons){if("Polygon"==i.type){const v=i.draw.sketchLineCoords_?.length;return i.rightClickCondition(4,v)}if("LineString"==i.type){const v=i.draw.sketchCoords_?.length;return i.rightClickCondition(2,v-1)}}}});i.setInteraction(l),i.draw.setActive(o),i.addHandler(l.on("drawstart",d=>{i.checkForMatchingSymbolizer(),e&&e(d)})),i.addHandler(l.on("drawend",d=>{"Circle"==i.type&&d.feature.setGeometry((0,U.fromCircle)(d.feature.getGeometry())),t&&t(d)})),i.toggleSnapping(i.snapSource?i.snapSource:i.source)})()}addHandler(e){this.eventHandlers.push(e)}setInteraction(e){var t=this;return(0,D.A)(function*(){t.draw=e,(yield t.hsMapService.loaded()).addInteraction(e),t.addHandler(e.on("drawstart",a=>{t.hsUtilsService.runningInBrowser()&&document.addEventListener("keyup",t.keyUp.bind(t,a))})),t.addHandler(e.on("drawstart",()=>{t.drawActive=!0,t.modify.setActive(!1)})),t.addHandler(e.on("drawend",a=>{t.hsUtilsService.runningInBrowser()&&document.removeEventListener("keyup",t.keyUp.bind(t,a))}))})()}translate(e,t){return this.hsLanguageService.getTranslation(e,t)}checkForMatchingSymbolizer(){if(!this.hasRequiredSymbolizer()){const e=this.translate("DRAW.stylingMissing"),t=this.translate("PANEL_HEADER.LM"),s=this.translate("DRAW.stylingMissingWarning",{type:this.type,symbolizer:this.requiredSymbolizer[this.type].join(" or "),panel:t});this.hsToastService.createToastPopupMessage(e,`${s}`,{serviceCalledFrom:"HsDrawService"})}}hasRequiredSymbolizer(){const e=(0,h.WM)(this.selectedLayer);return this.requiredSymbolizer[this.type].some(t=>e.includes(`${t}Symbolizer`))}toggleSnapping(e){this.hsMapService.loaded().then(t=>{this.snapSource=e||this.snapSource,this.snap&&t.removeInteraction(this.snap),this.snapActive&&this.snapSource&&(this.snap=new re({source:this.snapSource}),t.addInteraction(this.snap))})}changeSnapSource(e){const t=this.hsLayerUtilsService.isLayerClustered(e)?e.getSource().getSource():e.getSource();this.snapLayer=e,this.toggleSnapping(t)}selectAllFeatures(){const e=this.selectedFeatures.getLength()!=this.selectedLayer.getSource().getFeatures().length;this.toggleSelectionString=e?"deselectAllFeatures":"selectAllFeatures",this.hsQueryBaseService.clear("features"),this.hsQueryBaseService.selector.getFeatures().clear(),e&&this.hsQueryBaseService.selector.getFeatures().extend(this.selectedLayer.getSource().getFeatures()),this.hsQueryVectorService.createFeatureAttributeList()}toggleBoxSelection(){this.hsMapService.loaded().then(e=>{this.boxSelection&&e.removeInteraction(this.boxSelection),this.boxSelectionActive&&(this.boxSelection=new ie.A({condition:ne.k5}),e.addInteraction(this.boxSelection),this.boxSelection.on("boxend",()=>{if(!this.selectedLayer)return;this.hsQueryBaseService.clear("features");const t=this.boxSelection.getGeometry().getExtent();this.selectedLayer.getSource().forEachFeatureIntersectingExtent(t,s=>{this.hsQueryBaseService.selector.getFeatures().push(s)}),this.hsQueryVectorService.createFeatureAttributeList()}),this.boxSelection.on("boxstart",()=>{this.hsQueryBaseService.selector.getFeatures().clear()}),this.hsToastService.createToastPopupMessage(this.translate("DRAW.boxSelectionActivated"),`${this.translate("DRAW.useModifierToSelectWithBox",{platformModifierKey:"CTRL/META"})}`,{toastStyleClasses:"bg-info text-white",serviceCalledFrom:"HsDrawService"}))})}removeLayer(){var e=this;return(0,D.A)(function*(){yield e.layerRemoval(!1)})()}removeMultipleLayers(){var e=this;return(0,D.A)(function*(){yield e.layerRemoval(!0)})()}layerRemoval(e=!1){var t=this;return(0,D.A)(function*(){let s;const a=t.hsCommonLaymanService.layman?.authenticated?["map","mapcatalogue"]:["map"];s=e?yield t.hsRemoveLayerDialogService.removeMultipleLayers(t.drawableLayers,a):yield t.hsRemoveLayerDialogService.removeLayer(t.selectedLayer,a),s&&(t.selectedLayer=null,t.fillDrawableLayers())})()}static#e=this.\u0275fac=function(t){return new(t||g)(c.KVO(de.F),c.KVO(W.Xp),c.KVO(ue.z),c.KVO(ye.F),c.KVO(ge.oE),c.KVO(fe.r),c.KVO(ve.Q),c.KVO(z.o),c.KVO(z.Y),c.KVO(me.fr),c.KVO(Le.LJ),c.KVO(G.xG),c.KVO(G.fm),c.KVO(W.MJ),c.KVO(Se.wC),c.KVO(pe.ST),c.KVO(G.Dn),c.KVO(we.Os),c.KVO(c.SKi))};static#t=this.\u0275prov=c.jDH({token:g,factory:g.\u0275fac,providedIn:"root"})}return g})()}}]);
//# sourceMappingURL=866.js.map