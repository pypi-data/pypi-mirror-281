"use strict";(self.webpackChunkhslayers_cesium_app=self.webpackChunkhslayers_cesium_app||[]).push([[619],{47619:(Ge,H,d)=>{d.r(H),d.d(H,{ColorPickers:()=>S,HsPrintComponent:()=>Pe,HsPrintImprintStylerComponent:()=>O,HsPrintLegendService:()=>b,HsPrintLegendStylerComponent:()=>k,HsPrintScaleService:()=>v,HsPrintScaleStylerComponent:()=>R,HsPrintService:()=>V,HsPrintTextStylerComponent:()=>x,PrintLegendParams:()=>E,PrintModule:()=>Re});var h=d(89204),N=d(25849),e=d(7404),B=d(27426),A=d(14600),U=d(33900),j=d(14608),I=d(64801),J=d(84205),G=d(43942),L=d(87751),f=d(91459);class E{constructor(){this.loadingExternalImages=!1,this.cancelRequest=new J.B,this.subscriptions=[]}}let b=(()=>{class o extends E{constructor(t,i,n,l,s){super(),this.hsMapService=t,this.hsLegendService=i,this.hsLegendLayerStaticService=n,this.hsLanguageService=l,this.hsShareThumbnailService=s,this.cancelRequest.subscribe(()=>{this.loadingExternalImages=!1;for(const a of this.subscriptions)a.unsubscribe(),this.subscriptions.splice(this.subscriptions.indexOf(a),1)})}svgToImage(t){var i=this;return new Promise(function(){var n=(0,h.A)(function*(l,s){const a=new G.c(r=>{const c=new Image;c.onload=function(){r.next(c),r.complete()},c.onerror=function(m){r.next(),r.complete()},0!==t?.indexOf("data")&&void 0!==c.getAttribute("crossOrigin")&&c.setAttribute("crossOrigin","anonymous"),c.src=t});i.subscriptions.push(a.subscribe(r=>{l(r)}))});return function(l,s){return n.apply(this,arguments)}}())}drawLegendCanvas(t){var i=this;return(0,h.A)(function*(){const n=document.createElement("canvas"),l=n.getContext("2d");i.legendWidth=t.width;const s=yield i.getLegendImages();if(s?.length>0){const a=s.map(r=>r.height).reduce((r,c)=>r+c);return i.hsShareThumbnailService.setCanvasSize(n,i.legendWidth,a),i.styleLegendCanvas(n,t),yield i.fillLegendCanvas(l,s),n}})()}fillLegendCanvas(t,i){return(0,h.A)(function*(){let n=0;for(const l of i)t.drawImage(l,0,n),n+=l.height})()}styleLegendCanvas(t,i){const n=t.getContext("2d");n.fillStyle=i.bcColor,n.rect(0,0,t.width,t.height),n.fillRect(0,0,t.width,t.height)}getLegendImages(){var t=this;return(0,h.A)(function*(){const i=[],n=[],l=t.hsMapService.getLayersArray().filter(s=>s.getVisible());for(const s of l){let a;const r=yield t.hsLegendService.getLayerLegendDescriptor(s);if(r){switch(r.type){case"vector":a=yield t.getVectorSvgSource(r);break;case"wms":for(const c of r.subLayerLegends){const m=yield t.legendImageToSvg(c,t.hsLanguageService.getTranslationIgnoreNonExisting("LAYERS",r.title,void 0));m&&i.push(m)}break;case"static":a=yield t.getStaticSvgSource(r);break;default:return}a&&i.push(a)}}if(t.loadingExternalImages=!1,i?.length>0)for(const s of i){const a=yield t.svgToImage(s);a&&n.push(a)}return n})()}getVectorSvgSource(t){var i=this;return(0,h.A)(function*(){let n="";if(t.svg){if(t.autoLegend){const l=yield i.hsLegendService.getVectorLayerLegendSvg(t.lyr);if(!l)return;n=i.legendToSvg(l,i.hsLanguageService.getTranslationIgnoreNonExisting("LAYERS",t.title,void 0))}else for(const l of t.lyr.getSource().get("legendCategories"))n=i.sparqlJsonToSvg(l,t.title);return n}})()}getStaticSvgSource(t){var i=this;return(0,h.A)(function*(){let n="";const l=i.hsLegendLayerStaticService.fillContent(t.lyr);switch(l.legendType){case"image":n=yield i.legendImageToSvg(l.lastLegendImage,i.hsLanguageService.getTranslationIgnoreNonExisting("LAYERS",t.title,void 0));break;case"svg":n=i.legendToSvg(l.lastLegendImage,i.hsLanguageService.getTranslationIgnoreNonExisting("LAYERS",t.title,void 0));break;default:return}return n})()}legendToSvg(t,i){const l=Number(t.match(/height="([0-9]+)"/)[1])??70,s=`<svg xmlns='http://www.w3.org/2000/svg' width='${this.legendWidth}' height='${l+12}px'>\n            <foreignObject width='100%' height='100%'>\n              <div xmlns='http://www.w3.org/1999/xhtml'>\n                ${i}\n              </div>\n            ${t.replace(/&nbsp;/g,"")}\n            </foreignObject>\n        </svg>`;return"data:image/svg+xml,"+encodeURIComponent(s)}sparqlJsonToSvg(t,i){return"data:image/svg+xml,"+encodeURIComponent(`<svg xmlns='http://www.w3.org/2000/svg' width='${this.legendWidth}' height='70px'>\n            <foreignObject width='100%' height='100%'>\n            <div xmlns='http://www.w3.org/1999/xhtml'>\n              ${i}\n              <p>\n                <span style="background-color: ${t.color}" xml:space="preserve"></span>${t.name}\n              </p>\n            </div>\n            </foreignObject>\n        </svg>`)}legendImageToSvg(t,i){var n=this;return new Promise(function(){var l=(0,h.A)(function*(s,a){const r=new G.c(c=>{n.loadingExternalImages=!0;const m=new Image,F=n.legendWidth;0!==t?.indexOf("data")&&void 0!==m.getAttribute("crossOrigin")&&m.setAttribute("crossOrigin","anonymous"),m.onload=()=>{const C=document.createElement("canvas");n.hsShareThumbnailService.setCanvasSize(C,n.legendWidth,m.height);const w=C.getContext("2d");w.drawImage(m,0,0),w.font="14px sans-serif";const Fe=Math.ceil(w.measureText(i).width)>F?40:20,we=C.toDataURL("image/png"),Ne="data:image/svg+xml,"+encodeURIComponent(`<svg xmlns='http://www.w3.org/2000/svg' width='${F}' height='${C.height+Fe}'>\n            <foreignObject width='100%' height='100%'>\n                <div xmlns='http://www.w3.org/1999/xhtml'>\n                    ${i}\n                </div>\n              <svg width='${F}' height='${C.height}'><image href="${we}"></image></svg>\n            </foreignObject>\n        </svg>`);c.next(Ne),c.complete()},m.onerror=function(){c.next(),c.complete()},m.src=t});n.subscriptions.push(r.subscribe(c=>{s(c)}))});return function(s,a){return l.apply(this,arguments)}}())}static#e=this.\u0275fac=function(i){return new(i||o)(e.KVO(j.F),e.KVO(L.HsLegendService),e.KVO(L.HsLegendLayerStaticService),e.KVO(f.LJ),e.KVO(I.MD))};static#t=this.\u0275prov=e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var M=d(7055);let v=(()=>{class o{constructor(t,i){this.hsMapService=t,this.hsPrintLegendService=i,this.defaultScaleLine=null,this.scaleBarCSS='            \n<style type="text/css" >\n  <![CDATA[\n      .ol-scale-bar {\n      position: absolute;\n      bottom: 8px;\n      left: 8px;\n      }\n      .ol-scale-step-marker {\n        width: 1px;\n        height: 15px;\n        background-color: #000000;\n        float: right;\n        z-index: 10;\n      }\n      .ol-scale-step-text {\n        position: absolute;\n        bottom: -5px;\n        font-size: 12px;\n        z-index: 11;\n        color: #000000;\n        text-shadow: -2px 0 #FFFFFF, 0 2px #FFFFFF, 2px 0 #FFFFFF, 0 -2px #FFFFFF;\n      }\n      .ol-scale-text {\n        position: absolute;\n        font-size: 14px;\n        text-align: center;\n        bottom: 25px;\n        color: #000000;\n        text-shadow: -2px 0 #FFFFFF, 0 2px #FFFFFF, 2px 0 #FFFFFF, 0 -2px #FFFFFF;\n      }\n      .ol-scale-singlebar {\n        position: relative;\n        height: 10px;\n        z-index: 9;\n        box-sizing: border-box;\n        border: 1px solid black;\n      }\n  ]]>\n</style>',this.scaleLineCSS='            \n<style type="text/css" >\n  <![CDATA[\n      .ol-scale-line {\n          border-radius: 4px; \n          background: rgba(0, 60, 136, 0.3); \n          padding: 2px\n      }\n      .ol-scale-line-inner {\n          border: 1px solid #eee; \n          border-top: none; \n          color #eee; \n          font-size: 10px; \n          text-align: center; \n          margin: 1px;\n      }\n  ]]>\n</style>',this.hsMapService.loaded().then(()=>{this.defaultScaleLine=this.getMapScale()})}setToDefaultScale(){this.defaultScaleLine&&this.hsMapService.getMap()&&this.setMapScale(this.defaultScaleLine)}scaleChanged(t){this.setMapScale(this.createNewScaleControl(t))}drawScaleCanvas(t){var i=this;return(0,h.A)(function*(){const n=document.createElement("canvas");let l;const s=t?.scaleType,a=i.hsMapService.getScaleLineElement(s);if(!a)return;"scalebar"===s?(l=i.scaleBarCSS,n.height=a.clientHeight+35):(l=i.scaleLineCSS,n.height=a.clientHeight+5);const r=i.createScaleSvgSource(s,a,l);return yield i.drawScaleImage(n,r),n})()}createScaleSvgSource(t,i,n){let l,s;"scalebar"===t?(l=i.clientWidth+35,s=i.clientHeight+35):(l=i.clientWidth+2,s=i.clientHeight);const a=`<svg xmlns='http://www.w3.org/2000/svg' width='${l}px' height='${s}px'>\n            ${n}\n            <foreignObject width='100%' height='100%'>\n                <div style="color: #eee" xmlns='http://www.w3.org/1999/xhtml'>\n                  ${i.outerHTML.replace(/&nbsp;/g,".")}\n                </div>\n            </foreignObject>\n        </svg>`;return"data:image/svg+xml,"+encodeURIComponent(a)}drawScaleImage(t,i){var n=this;return new Promise(function(){var l=(0,h.A)(function*(s,a){const r=t.getContext("2d"),c=yield n.hsPrintLegendService.svgToImage(i);c&&r.drawImage(c,0,0),s()});return function(s,a){return l.apply(this,arguments)}}())}getMapScale(){for(const t of this.hsMapService.getMap().getControls().getArray())if(t instanceof M.A)return t}createNewScaleControl(t){let i;return i=new M.A("scalebar"===t?.scaleType?{units:t?.scaleUnits,bar:!0,steps:t?.scaleBarSteps,text:t?.scaleBarText,minWidth:140}:{units:t?.scaleUnits}),i}setMapScale(t){const i=this.getMapScale();i&&this.hsMapService.getMap().removeControl(i),this.hsMapService.getMap().addControl(t)}static#e=this.\u0275fac=function(i){return new(i||o)(e.KVO(j.F),e.KVO(b))};static#t=this.\u0275prov=e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})(),W=(()=>{class o{constructor(){}drawTitleCanvas(t,i){var n=this;return new Promise(function(){var l=(0,h.A)(function*(s,a){const r=document.createElement("canvas"),c=r.getContext("2d");n.applyTextStyles(c,i);const m=Number(i.textSize.replace(/[^0-9]+/,""));n.drawTitle(c,t,i,m),setTimeout(()=>{r.width=c.measureText(t).width+10,r.height=m+20,r.style.width=r.width+"px",n.applyTextStyles(c,i),n.drawTitle(c,t,i,m),s(r)},0)});return function(s,a){return l.apply(this,arguments)}}())}drawTitle(t,i,n,l){"stroke"===n.textDraw?t.strokeText(i,0,l):t.fillText(i,0,l)}applyTextStyles(t,i){t.font=i.fontStyle.concat(" ",i.textSize," ",i.fontFamily),i.textColor&&(t.strokeStyle=i.textColor,t.fillStyle=i.textColor)}static#e=this.\u0275fac=function(i){return new(i||o)};static#t=this.\u0275prov=e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})(),Z=(()=>{class o{constructor(t,i){this.hsPrintLegendService=t,this.hsShareThumbnailService=i}drawImprintCanvas(t){var i=this;return new Promise(function(){var n=(0,h.A)(function*(l,s){const a=document.createElement("canvas"),r=a.getContext("2d"),c=yield i.hsPrintLegendService.svgToImage(i.imprintToSvg(t));c&&(i.hsShareThumbnailService.setCanvasSize(a,c.width,c.height),r.drawImage(c,0,0)),l(a)});return function(l,s){return n.apply(this,arguments)}}())}imprintToSvg(t){const i=this.getStyles(t.textStyle);return"data:image/svg+xml,"+encodeURIComponent(`<svg xmlns='http://www.w3.org/2000/svg' width='${t.width}px' height='${t.height}px'>\n            <foreignObject width='100%' height='100%'>\n              <div xmlns='http://www.w3.org/1999/xhtml' style="${i}">\n                <div>${t.author}</div>\n                ${t.abstract}\n              </div>\n            </foreignObject>\n        </svg>`)}getStyles(t){let i="padding: 5px;";return i+="right"===t.posX?"text-align:end;":"left"===t.posX?"text-align:start;":"text-align:center;",t.bcColor&&(i+=`background-color: ${t.bcColor};`),i+=`font:${t.fontStyle.concat(" ",t.textSize," ",t.fontFamily)};`,i}static#e=this.\u0275fac=function(i){return new(i||o)(e.KVO(b),e.KVO(I.MD))};static#t=this.\u0275prov=e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})(),V=(()=>{class o{constructor(t,i,n,l,s,a){this.hsMapService=t,this.hsShareThumbnailService=i,this.hsPrintLegendService=n,this.hsPrintScaleService=l,this.hsPrintTitleService=s,this.hsPrintImprintService=a}print(t,i){var n=this;return(0,h.A)(function*(){(0,A.H)(new Promise(function(){var s=(0,h.A)(function*(a,r){a(yield n.createMapImage(t))});return function(a,r){return s.apply(this,arguments)}}())).pipe((0,U.Q)(n.hsPrintLegendService.cancelRequest)).subscribe(s=>{const a=window.open();a&&(a.document.write(`<html><head></head><style>body{background-color:white !important;}@page { size: landscape; }</style><body><img src='${s}'/></body></html>`),setTimeout(()=>{i&&a.print()},250))})})()}download(t){var i=this;return(0,h.A)(function*(){const n=yield i.createMapImage(t);if(!document)return;const l=document.createElement("a");document.body.appendChild(l),l.setAttribute("style","display: none"),l.href=n,l.download="HSL-map",l.click(),window.URL.revokeObjectURL(n),l.remove()})()}createMapImage(t){var i=this;return(0,h.A)(function*(){yield i.hsMapService.loaded();const n=i.hsMapService.getCanvases(),l=document.createElement("canvas"),s=l.getContext("2d"),a=[n[0].clientWidth,n[0].clientHeight];if(i.hsShareThumbnailService.setCanvasSize(l,a[0],a[1]),n.forEach(r=>{r.clientWidth>0&&r.clientHeight>0&&s.drawImage(r,0,0)}),t.titleObj?.text){const r=yield i.hsPrintTitleService.drawTitleCanvas(t.titleObj.text,t.titleObj.textStyle);if(r){const c=i.getChildPosition(l,r,t.titleObj.textStyle.posX,t.titleObj.textStyle.posY);s.drawImage(r,c[0],c[1])}}if(t.scaleObj?.include){const r=yield i.hsPrintScaleService.drawScaleCanvas(t.scaleObj);r&&s.drawImage(r,3,l.height-r.height)}if(t.legendObj?.include){const r=yield i.hsPrintLegendService.drawLegendCanvas(t.legendObj);if(r){const c=i.getChildPosition(l,r,t.legendObj.posX,t.legendObj.posY);s.drawImage(r,c[0],c[1])}}if(t.imprintObj?.include&&t.imprintObj?.author||t.imprintObj?.abstract){const r=yield i.hsPrintImprintService.drawImprintCanvas(t.imprintObj);if(r){const c=i.getChildPosition(l,r,t.imprintObj.textStyle.posX,t.imprintObj.textStyle.posY);s.drawImage(r,c[0],c[1])}}return l.toDataURL("image/png")})()}getChildPosition(t,i,n,l){const s=[0,0];if(!n&&!l)return s;switch(n){case"right":s[0]=t.width-i.width;break;case"left":s[0]=0;break;default:s[0]=(t.width-i.width)/2}switch(l){case"middle":s[1]=(t.height-i.height)/2;break;case"bottom":s[1]=t.height-i.height;break;default:s[1]=0}return s}static#e=this.\u0275fac=function(i){return new(i||o)(e.KVO(j.F),e.KVO(I.MD),e.KVO(b),e.KVO(v),e.KVO(W),e.KVO(Z))};static#t=this.\u0275prov=e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var p=d(34456),u=d(60316);const Y={positionsX:["left","center","right"],positionsY:["top","middle","bottom"]},$=[50,100,200,300,400,500,600,800,1e3];var y=d(93016);const Q={fonts:["Arial","Verdana","Sans-serif","Courier New","Lucida Console","Monospace","Times New Roman","Georgia","Serif"],fontStyles:["normal","italic","bold"],textDrawTypes:["fill","stroke"],textSizes:["9px","10px","12px","16px","18px","24px","30px","32px","40px","46px","48px","72px","84px","96px"]};var D=d(10391);const _=()=>({standalone:!0});function q(o,g){if(1&o){const t=e.RV6();e.j41(0,"color-sketch",11),e.bIt("onChangeComplete",function(n){e.eBV(t);const l=e.XpG();return e.Njj(l.onPick(n,"fill"))}),e.k0s()}}function ee(o,g){if(1&o){const t=e.RV6();e.j41(0,"color-sketch",11),e.bIt("onChangeComplete",function(n){e.eBV(t);const l=e.XpG(2);return e.Njj(l.onPick(n,"background"))}),e.k0s()}}function te(o,g){if(1&o){const t=e.RV6();e.j41(0,"div",0)(1,"div",1),e.EFF(2),e.nI1(3,"translateHs"),e.k0s(),e.j41(4,"div",2)(5,"input",3),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.setColorPickerVisible("background"))}),e.mxI("ngModelChange",function(n){e.eBV(t);const l=e.XpG();return e.DH7(l.textStyle.bcColor,n)||(l.textStyle.bcColor=n),e.Njj(n)}),e.k0s(),e.DNE(6,ee,1,0,"color-sketch",4),e.k0s()()}if(2&o){const t=e.XpG();e.R7$(2),e.SpI("",e.bMT(3,5,"PRINT.backgroundColor"),":"),e.R7$(3),e.Y8G("ngStyle",t.getColorPickerStyle("background"))("ngModelOptions",e.lJ4(7,_)),e.R50("ngModel",t.textStyle.bcColor),e.R7$(),e.Y8G("ngIf",t.bcPickerVisible)}}function ne(o,g){if(1&o&&(e.j41(0,"option"),e.EFF(1),e.k0s()),2&o){const t=g.$implicit;e.R7$(),e.SpI("",t," ")}}function ie(o,g){if(1&o&&(e.j41(0,"option"),e.EFF(1),e.k0s()),2&o){const t=g.$implicit;e.R7$(),e.SpI("",t," ")}}function oe(o,g){if(1&o&&(e.j41(0,"option",12),e.EFF(1),e.k0s()),2&o){const t=g.$implicit,i=e.XpG();e.Y8G("ngValue",t),e.R7$(),e.SpI(" ",i.getTranslation("PRINT",t),"")}}function se(o,g){if(1&o&&(e.j41(0,"option",12),e.EFF(1),e.k0s()),2&o){const t=g.$implicit,i=e.XpG(2);e.Y8G("ngValue",t),e.R7$(),e.SpI(" ",i.getTranslation("COMMON",t),"")}}function le(o,g){if(1&o){const t=e.RV6();e.j41(0,"div",0)(1,"div",1),e.EFF(2),e.nI1(3,"translateHs"),e.k0s(),e.j41(4,"div",2)(5,"select",8),e.mxI("ngModelChange",function(n){e.eBV(t);const l=e.XpG();return e.DH7(l.textStyle.textDraw,n)||(l.textStyle.textDraw=n),e.Njj(n)}),e.DNE(6,se,2,2,"option",9),e.k0s()()()}if(2&o){const t=e.XpG();e.R7$(2),e.SpI("",e.bMT(3,4,"PRINT.textDraw"),":"),e.R7$(3),e.R50("ngModel",t.textStyle.textDraw),e.Y8G("ngModelOptions",e.lJ4(6,_)),e.R7$(),e.Y8G("ngForOf",t.stylingOptions.textDrawTypes)}}function re(o,g){if(1&o&&(e.j41(0,"option",12),e.EFF(1),e.k0s()),2&o){const t=g.$implicit,i=e.XpG();e.Y8G("ngValue",t),e.R7$(),e.SpI(" ",i.getTranslation("PRINT",t),"")}}function ae(o,g){if(1&o&&(e.j41(0,"option",12),e.EFF(1),e.k0s()),2&o){const t=g.$implicit,i=e.XpG();e.Y8G("ngValue",t),e.R7$(),e.SpI(" ",i.getTranslation("PRINT",t),"")}}var S=function(o){return o.Fill="fill",o.Background="background",o}(S||{});let x=(()=>{class o{constructor(t,i){this.hsColorPickerService=t,this.hsLanguageService=i,this.fillPickerVisible=!1,this.bcPickerVisible=!1,this.textColor="white",this.backgroundColor="white",this.stylingOptions=Q,this.positionOptions=Y}onPick(t,i){const n=t.color.hex,l=this.hsColorPickerService.generateFontColor([t.color.rgb.r,t.color.rgb.g,t.color.rgb.b]);switch(i){case S.Fill:this.textStyle.textColor=n,this.textColor=l;break;case S.Background:this.textStyle.bcColor=n,this.backgroundColor=l;break;default:return}}getColorPickerStyle(t){switch(t){case S.Fill:return this.hsColorPickerService.colorPickerStyle(this.textStyle.textColor,this.textColor);case S.Background:return this.hsColorPickerService.colorPickerStyle(this.textStyle.bcColor,this.backgroundColor);default:return}}setColorPickerVisible(t){switch(t){case S.Fill:this.fillPickerVisible=!this.fillPickerVisible,this.bcPickerVisible=!1;break;case S.Background:this.bcPickerVisible=!this.bcPickerVisible,this.fillPickerVisible=!1;break;default:return}}getTranslation(t,i){return this.hsLanguageService.getTranslationIgnoreNonExisting(t,i,void 0)}static#e=this.\u0275fac=function(i){return new(i||o)(e.rXU(D.HsColorPickerService),e.rXU(f.LJ))};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["hs-print-text-styler"]],inputs:{textStyle:"textStyle",objectName:"objectName"},standalone:!0,features:[e.aNF],decls:44,vars:45,consts:[[1,"d-flex","flex-row"],[1,"p-1","w-50","mt-1"],[1,"p-1","w-100"],[1,"form-control","form-select-sm",3,"click","ngModelChange","ngStyle","ngModelOptions","ngModel"],["width","320px",3,"onChangeComplete",4,"ngIf"],["class","d-flex flex-row",4,"ngIf"],[1,"form-control","form-select-sm","form-select",2,"flex-grow","1",3,"ngModelChange","ngModel","ngModelOptions"],[4,"ngFor","ngForOf"],[1,"form-control","form-select-sm","form-select",3,"ngModelChange","ngModel","ngModelOptions"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"d-flex","flex-row","mb-2"],["width","320px",3,"onChangeComplete"],[3,"ngValue"]],template:function(i,n){1&i&&(e.j41(0,"div",0)(1,"div",1),e.EFF(2),e.nI1(3,"translateHs"),e.k0s(),e.j41(4,"div",2)(5,"input",3),e.bIt("click",function(){return n.setColorPickerVisible("fill")}),e.mxI("ngModelChange",function(s){return e.DH7(n.textStyle.textColor,s)||(n.textStyle.textColor=s),s}),e.k0s(),e.DNE(6,q,1,0,"color-sketch",4),e.k0s()(),e.DNE(7,te,7,8,"div",5),e.j41(8,"div",0)(9,"div",1),e.EFF(10),e.nI1(11,"translateHs"),e.k0s(),e.j41(12,"div",2)(13,"select",6),e.mxI("ngModelChange",function(s){return e.DH7(n.textStyle.textSize,s)||(n.textStyle.textSize=s),s}),e.DNE(14,ne,2,1,"option",7),e.k0s()()(),e.j41(15,"div",0)(16,"div",1),e.EFF(17),e.nI1(18,"translateHs"),e.k0s(),e.j41(19,"div",2)(20,"select",8),e.mxI("ngModelChange",function(s){return e.DH7(n.textStyle.fontFamily,s)||(n.textStyle.fontFamily=s),s}),e.DNE(21,ie,2,1,"option",7),e.k0s()()(),e.j41(22,"div",0)(23,"div",1),e.EFF(24),e.nI1(25,"translateHs"),e.k0s(),e.j41(26,"div",2)(27,"select",8),e.mxI("ngModelChange",function(s){return e.DH7(n.textStyle.fontStyle,s)||(n.textStyle.fontStyle=s),s}),e.DNE(28,oe,2,2,"option",9),e.k0s()()(),e.DNE(29,le,7,7,"div",5),e.j41(30,"div",0)(31,"div",1),e.EFF(32),e.nI1(33,"translateHs"),e.k0s(),e.j41(34,"div",2)(35,"select",8),e.mxI("ngModelChange",function(s){return e.DH7(n.textStyle.posX,s)||(n.textStyle.posX=s),s}),e.DNE(36,re,2,2,"option",9),e.k0s()()(),e.j41(37,"div",10)(38,"div",1),e.EFF(39),e.nI1(40,"translateHs"),e.k0s(),e.j41(41,"div",2)(42,"select",8),e.mxI("ngModelChange",function(s){return e.DH7(n.textStyle.posY,s)||(n.textStyle.posY=s),s}),e.DNE(43,ae,2,2,"option",9),e.k0s()()()),2&i&&(e.R7$(2),e.SpI("",e.bMT(3,27,"PRINT.textColor"),":"),e.R7$(3),e.Y8G("ngStyle",n.getColorPickerStyle("fill"))("ngModelOptions",e.lJ4(39,_)),e.R50("ngModel",n.textStyle.textColor),e.R7$(),e.Y8G("ngIf",n.fillPickerVisible),e.R7$(),e.Y8G("ngIf","imprint"===n.objectName),e.R7$(3),e.SpI("",e.bMT(11,29,"STYLER.textSize"),":"),e.R7$(3),e.R50("ngModel",n.textStyle.textSize),e.Y8G("ngModelOptions",e.lJ4(40,_)),e.R7$(),e.Y8G("ngForOf",n.stylingOptions.textSizes),e.R7$(3),e.SpI("",e.bMT(18,31,"STYLER.font"),":"),e.R7$(3),e.R50("ngModel",n.textStyle.fontFamily),e.Y8G("ngModelOptions",e.lJ4(41,_)),e.R7$(),e.Y8G("ngForOf",n.stylingOptions.fonts),e.R7$(3),e.SpI("",e.bMT(25,33,"STYLER.fontStyle"),":"),e.R7$(3),e.R50("ngModel",n.textStyle.fontStyle),e.Y8G("ngModelOptions",e.lJ4(42,_)),e.R7$(),e.Y8G("ngForOf",n.stylingOptions.fontStyles),e.R7$(),e.Y8G("ngIf","title"===n.objectName),e.R7$(3),e.SpI("",e.bMT(33,35,"PRINT.textPosition")," X:"),e.R7$(3),e.R50("ngModel",n.textStyle.posX),e.Y8G("ngModelOptions",e.lJ4(43,_)),e.R7$(),e.Y8G("ngForOf",n.positionOptions.positionsX),e.R7$(3),e.SpI("",e.bMT(40,37,"PRINT.textPosition")," Y:"),e.R7$(3),e.R50("ngModel",n.textStyle.posY),e.Y8G("ngModelOptions",e.lJ4(44,_)),e.R7$(),e.Y8G("ngForOf",n.positionOptions.positionsY))},dependencies:[u.Sq,u.bT,u.B3,p.YN,p.xH,p.y7,p.me,p.wz,p.BC,p.vS,f.q9,y.UH,y.cx],encapsulation:2})}return o})();const X=()=>({standalone:!0});function ce(o,g){if(1&o&&(e.j41(0,"option",11),e.EFF(1),e.k0s()),2&o){const t=g.$implicit;e.Y8G("ngValue",t),e.R7$(),e.SpI(" ",t,"px ")}}function ge(o,g){if(1&o&&(e.j41(0,"option",11),e.EFF(1),e.k0s()),2&o){const t=g.$implicit;e.Y8G("ngValue",t),e.R7$(),e.SpI(" ",t,"px ")}}let O=(()=>{class o{constructor(){this.sizes=$}static#e=this.\u0275fac=function(i){return new(i||o)};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["hs-print-imprint-styler"]],inputs:{imprintObj:"imprintObj"},standalone:!0,features:[e.aNF],decls:28,vars:30,consts:[[1,"form-floating","mb-2"],["type","text","id","imprint-author",1,"form-control",3,"ngModelChange","ngModel","placeholder"],["for","imprint-author",1,"control-label"],["id","imprint-abstract","name","imprint-abstract",1,"form-control",3,"ngModelChange","placeholder","ngModel"],["for","imprint-abstract",1,"control-label"],[1,"d-flex","flex-row"],[1,"p-1","w-50","mt-1"],[1,"p-1","w-100"],[1,"form-control","form-select-sm","form-select",3,"ngModelChange","ngModel","ngModelOptions"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"textStyle","objectName"],[3,"ngValue"]],template:function(i,n){1&i&&(e.j41(0,"div",0)(1,"input",1),e.nI1(2,"translateHs"),e.mxI("ngModelChange",function(s){return e.DH7(n.imprintObj.author,s)||(n.imprintObj.author=s),s}),e.k0s(),e.j41(3,"label",2),e.EFF(4),e.nI1(5,"translateHs"),e.k0s()(),e.j41(6,"div",0)(7,"textarea",3),e.nI1(8,"translateHs"),e.mxI("ngModelChange",function(s){return e.DH7(n.imprintObj.abstract,s)||(n.imprintObj.abstract=s),s}),e.EFF(9,"                              "),e.k0s(),e.j41(10,"label",4),e.EFF(11),e.nI1(12,"translateHs"),e.k0s()(),e.j41(13,"div",5)(14,"div",6),e.EFF(15),e.nI1(16,"translateHs"),e.k0s(),e.j41(17,"div",7)(18,"select",8),e.mxI("ngModelChange",function(s){return e.DH7(n.imprintObj.width,s)||(n.imprintObj.width=s),s}),e.DNE(19,ce,2,2,"option",9),e.k0s()()(),e.j41(20,"div",5)(21,"div",6),e.EFF(22),e.nI1(23,"translateHs"),e.k0s(),e.j41(24,"div",7)(25,"select",8),e.mxI("ngModelChange",function(s){return e.DH7(n.imprintObj.height,s)||(n.imprintObj.height=s),s}),e.DNE(26,ge,2,2,"option",9),e.k0s()()(),e.nrm(27,"hs-print-text-styler",10)),2&i&&(e.R7$(),e.R50("ngModel",n.imprintObj.author),e.Y8G("placeholder",e.bMT(2,16,"COMMON.author")),e.R7$(3),e.JRh(e.bMT(5,18,"COMMON.author")),e.R7$(3),e.Y8G("placeholder",e.bMT(8,20,"COMMON.fillInDescriptive")),e.R50("ngModel",n.imprintObj.abstract),e.R7$(4),e.JRh(e.bMT(12,22,"COMMON.abstract")),e.R7$(4),e.JRh(e.bMT(16,24,"COMMON.width")),e.R7$(3),e.R50("ngModel",n.imprintObj.width),e.Y8G("ngModelOptions",e.lJ4(28,X)),e.R7$(),e.Y8G("ngForOf",n.sizes),e.R7$(3),e.JRh(e.bMT(23,26,"COMMON.height")),e.R7$(3),e.R50("ngModel",n.imprintObj.height),e.Y8G("ngModelOptions",e.lJ4(29,X)),e.R7$(),e.Y8G("ngForOf",n.sizes),e.R7$(),e.Y8G("textStyle",n.imprintObj.textStyle)("objectName","imprint"))},dependencies:[u.Sq,p.YN,p.xH,p.y7,p.me,p.wz,p.BC,p.vS,x,f.q9],encapsulation:2})}return o})();const T=()=>({standalone:!0});function pe(o,g){if(1&o){const t=e.RV6();e.j41(0,"color-sketch",8),e.bIt("onChangeComplete",function(n){e.eBV(t);const l=e.XpG();return e.Njj(l.onPick(n))}),e.k0s()}}function de(o,g){if(1&o&&(e.j41(0,"option",9),e.EFF(1),e.k0s()),2&o){const t=g.$implicit;e.Y8G("ngValue",t),e.R7$(),e.SpI(" ",t,"px ")}}function he(o,g){if(1&o&&(e.j41(0,"option",9),e.EFF(1),e.k0s()),2&o){const t=g.$implicit,i=e.XpG();e.Y8G("ngValue",t),e.R7$(),e.SpI(" ",i.getTranslation("PRINT",t),"")}}function me(o,g){if(1&o&&(e.j41(0,"option",9),e.EFF(1),e.k0s()),2&o){const t=g.$implicit,i=e.XpG();e.Y8G("ngValue",t),e.R7$(),e.SpI(" ",i.getTranslation("PRINT",t),"")}}let k=(()=>{class o{constructor(t,i){this.hsLanguageService=t,this.hsColorPickerService=i,this.fillPickerVisible=!1,this.positionOptions=Y,this.legendWidths=$}onPick(t){const i=t.color.hex,n=this.hsColorPickerService.generateFontColor([t.color.rgb.r,t.color.rgb.g,t.color.rgb.b]);this.legendObj.bcColor=i,this.bcColor=n}getColorPickerStyle(){return this.hsColorPickerService.colorPickerStyle(this.legendObj.bcColor,this.bcColor)}getTranslation(t,i){return this.hsLanguageService.getTranslationIgnoreNonExisting(t,i,void 0)}static#e=this.\u0275fac=function(i){return new(i||o)(e.rXU(f.LJ),e.rXU(D.HsColorPickerService))};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["hs-print-legend-styler"]],inputs:{legendObj:"legendObj"},standalone:!0,features:[e.aNF],decls:28,vars:29,consts:[[1,"d-flex","flex-row"],[1,"p-1","w-50","mt-1"],[1,"p-1","w-100"],[1,"form-control","form-select-sm",3,"click","ngModelChange","ngStyle","ngModelOptions","ngModel"],["width","320px",3,"onChangeComplete",4,"ngIf"],[1,"form-control","form-select-sm","form-select",3,"ngModelChange","ngModel","ngModelOptions"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"d-flex","flex-row","mb-2"],["width","320px",3,"onChangeComplete"],[3,"ngValue"]],template:function(i,n){1&i&&(e.j41(0,"div",0)(1,"div",1),e.EFF(2),e.nI1(3,"translateHs"),e.k0s(),e.j41(4,"div",2)(5,"input",3),e.bIt("click",function(){return n.fillPickerVisible=!n.fillPickerVisible}),e.mxI("ngModelChange",function(s){return e.DH7(n.legendObj.bcColor,s)||(n.legendObj.bcColor=s),s}),e.k0s(),e.DNE(6,pe,1,0,"color-sketch",4),e.k0s()(),e.j41(7,"div",0)(8,"div",1),e.EFF(9),e.nI1(10,"translateHs"),e.k0s(),e.j41(11,"div",2)(12,"select",5),e.mxI("ngModelChange",function(s){return e.DH7(n.legendObj.width,s)||(n.legendObj.width=s),s}),e.DNE(13,de,2,2,"option",6),e.k0s()()(),e.j41(14,"div",0)(15,"div",1),e.EFF(16),e.nI1(17,"translateHs"),e.k0s(),e.j41(18,"div",2)(19,"select",5),e.mxI("ngModelChange",function(s){return e.DH7(n.legendObj.posX,s)||(n.legendObj.posX=s),s}),e.DNE(20,he,2,2,"option",6),e.k0s()()(),e.j41(21,"div",7)(22,"div",1),e.EFF(23),e.nI1(24,"translateHs"),e.k0s(),e.j41(25,"div",2)(26,"select",5),e.mxI("ngModelChange",function(s){return e.DH7(n.legendObj.posY,s)||(n.legendObj.posY=s),s}),e.DNE(27,me,2,2,"option",6),e.k0s()()()),2&i&&(e.R7$(2),e.SpI("",e.bMT(3,17,"PRINT.backgroundColor"),":"),e.R7$(3),e.Y8G("ngStyle",n.getColorPickerStyle())("ngModelOptions",e.lJ4(25,T)),e.R50("ngModel",n.legendObj.bcColor),e.R7$(),e.Y8G("ngIf",n.fillPickerVisible),e.R7$(3),e.JRh(e.bMT(10,19,"COMMON.width")),e.R7$(3),e.R50("ngModel",n.legendObj.width),e.Y8G("ngModelOptions",e.lJ4(26,T)),e.R7$(),e.Y8G("ngForOf",n.legendWidths),e.R7$(3),e.SpI("",e.bMT(17,21,"PRINT.textPosition")," X:"),e.R7$(3),e.R50("ngModel",n.legendObj.posX),e.Y8G("ngModelOptions",e.lJ4(27,T)),e.R7$(),e.Y8G("ngForOf",n.positionOptions.positionsX),e.R7$(3),e.SpI("",e.bMT(24,23,"PRINT.textPosition")," Y:"),e.R7$(3),e.R50("ngModel",n.legendObj.posY),e.Y8G("ngModelOptions",e.lJ4(28,T)),e.R7$(),e.Y8G("ngForOf",n.positionOptions.positionsY))},dependencies:[u.MD,u.Sq,u.bT,u.B3,p.YN,p.xH,p.y7,p.me,p.wz,p.BC,p.vS,f.q9,y.UH,y.cx],encapsulation:2})}return o})();const ue={scaleType:["scaleline","scalebar"],scaleUnits:[{name:"degrees",value:"degrees"},{name:"us inch",value:"us"},{name:"nautical mile",value:"nautical"},{name:"metric",value:"metric"}],scaleBarSteps:[2,4,6,8]},P=()=>({standalone:!0});function fe(o,g){if(1&o&&(e.j41(0,"option",6),e.EFF(1),e.k0s()),2&o){const t=g.$implicit,i=e.XpG();e.Y8G("ngValue",t),e.R7$(),e.SpI(" ",i.getTranslation("PRINT",t),"")}}function _e(o,g){if(1&o){const t=e.RV6();e.j41(0,"div",0)(1,"div",1),e.EFF(2),e.nI1(3,"translateHs"),e.k0s(),e.j41(4,"div",2)(5,"input",7),e.mxI("ngModelChange",function(n){e.eBV(t);const l=e.XpG();return e.DH7(l.scaleObj.scaleBarText,n)||(l.scaleObj.scaleBarText=n),e.Njj(n)}),e.bIt("ngModelChange",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.scaleObjChanged())}),e.k0s()()()}if(2&o){const t=e.XpG();e.R7$(2),e.SpI("",e.bMT(3,2,"PRINT.scaleBarText"),":"),e.R7$(3),e.R50("ngModel",t.scaleObj.scaleBarText)}}function Se(o,g){if(1&o&&(e.j41(0,"option",6),e.EFF(1),e.k0s()),2&o){const t=g.$implicit,i=e.XpG();e.Y8G("ngValue",t.value),e.R7$(),e.SpI(" ",i.getTranslation("PRINT",t.name),"")}}function be(o,g){if(1&o&&(e.j41(0,"option",6),e.EFF(1),e.nI1(2,"translateHs"),e.k0s()),2&o){const t=g.$implicit;e.Y8G("ngValue",t),e.R7$(),e.Lme("",t," ",e.bMT(2,3,"COMMON.steps")," ")}}function Ce(o,g){if(1&o){const t=e.RV6();e.j41(0,"div",0)(1,"div",1),e.EFF(2),e.nI1(3,"translateHs"),e.k0s(),e.j41(4,"div",2)(5,"select",3),e.mxI("ngModelChange",function(n){e.eBV(t);const l=e.XpG();return e.DH7(l.scaleObj.scaleBarSteps,n)||(l.scaleObj.scaleBarSteps=n),e.Njj(n)}),e.bIt("ngModelChange",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.scaleObjChanged())}),e.DNE(6,be,3,5,"option",4),e.k0s()()()}if(2&o){const t=e.XpG();e.R7$(2),e.SpI("",e.bMT(3,4,"PRINT.scaleSteps"),":"),e.R7$(3),e.R50("ngModel",t.scaleObj.scaleBarSteps),e.Y8G("ngModelOptions",e.lJ4(6,P)),e.R7$(),e.Y8G("ngForOf",t.stylingOptions.scaleBarSteps)}}let R=(()=>{class o{constructor(t,i){this.hsPrintScaleService=t,this.hsLanguageService=i,this.stylingOptions=ue}scaleObjChanged(){this.hsPrintScaleService.scaleChanged(this.scaleObj)}getTranslation(t,i){return this.hsLanguageService.getTranslationIgnoreNonExisting(t,i,void 0)}static#e=this.\u0275fac=function(i){return new(i||o)(e.rXU(v),e.rXU(f.LJ))};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["hs-print-scale-styler"]],inputs:{scaleObj:"scaleObj"},standalone:!0,features:[e.aNF],decls:16,vars:16,consts:[[1,"d-flex","flex-row"],[1,"p-1","w-50","mt-1"],[1,"p-1","w-100"],[1,"form-control","form-select-sm","form-select",2,"flex-grow","1",3,"ngModelChange","ngModel","ngModelOptions"],[3,"ngValue",4,"ngFor","ngForOf"],["class","d-flex flex-row",4,"ngIf"],[3,"ngValue"],["type","checkbox",1,"form-check-input",3,"ngModelChange","ngModel"]],template:function(i,n){1&i&&(e.j41(0,"div",0)(1,"div",1),e.EFF(2),e.nI1(3,"translateHs"),e.k0s(),e.j41(4,"div",2)(5,"select",3),e.mxI("ngModelChange",function(s){return e.DH7(n.scaleObj.scaleType,s)||(n.scaleObj.scaleType=s),s}),e.bIt("ngModelChange",function(){return n.scaleObjChanged()}),e.DNE(6,fe,2,2,"option",4),e.k0s()()(),e.DNE(7,_e,6,4,"div",5),e.j41(8,"div",0)(9,"div",1),e.EFF(10),e.nI1(11,"translateHs"),e.k0s(),e.j41(12,"div",2)(13,"select",3),e.mxI("ngModelChange",function(s){return e.DH7(n.scaleObj.scaleUnits,s)||(n.scaleObj.scaleUnits=s),s}),e.bIt("ngModelChange",function(){return n.scaleObjChanged()}),e.DNE(14,Se,2,2,"option",4),e.k0s()()(),e.DNE(15,Ce,7,7,"div",5)),2&i&&(e.R7$(2),e.SpI("",e.bMT(3,10,"PRINT.scaleType"),":"),e.R7$(3),e.R50("ngModel",n.scaleObj.scaleType),e.Y8G("ngModelOptions",e.lJ4(14,P)),e.R7$(),e.Y8G("ngForOf",n.stylingOptions.scaleType),e.R7$(),e.Y8G("ngIf","scalebar"===n.scaleObj.scaleType),e.R7$(3),e.SpI("",e.bMT(11,12,"PRINT.scaleUnits"),":"),e.R7$(3),e.R50("ngModel",n.scaleObj.scaleUnits),e.Y8G("ngModelOptions",e.lJ4(15,P)),e.R7$(),e.Y8G("ngForOf",n.stylingOptions.scaleUnits),e.R7$(),e.Y8G("ngIf","scalebar"===n.scaleObj.scaleType))},dependencies:[u.MD,u.Sq,u.bT,p.YN,p.xH,p.y7,p.Zm,p.wz,p.BC,p.vS,f.q9],encapsulation:2})}return o})();var ve=d(70258),ye=d(31968);function xe(o,g){if(1&o&&e.nrm(0,"hs-print-text-styler",25),2&o){const t=e.XpG(2);e.Y8G("textStyle",t.print.titleObj.textStyle)("objectName","title")}}function Te(o,g){if(1&o&&e.nrm(0,"hs-print-legend-styler",26),2&o){const t=e.XpG(2);e.Y8G("legendObj",t.print.legendObj)}}function je(o,g){if(1&o&&e.nrm(0,"hs-print-imprint-styler",27),2&o){const t=e.XpG(2);e.Y8G("imprintObj",t.print.imprintObj)}}function Ie(o,g){if(1&o&&e.nrm(0,"hs-print-scale-styler",28),2&o){const t=e.XpG(2);e.Y8G("scaleObj",t.print.scaleObj)}}function Me(o,g){if(1&o){const t=e.RV6();e.j41(0,"div",29)(1,"button",30),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.printLayout(!0))}),e.EFF(2),e.nI1(3,"translateHs"),e.k0s(),e.j41(4,"button",31),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.printLayout(!1))}),e.EFF(5),e.nI1(6,"translateHs"),e.k0s(),e.j41(7,"button",32),e.nI1(8,"translateHs"),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.download())}),e.nrm(9,"i",33),e.k0s()()}2&o&&(e.R7$(2),e.JRh(e.bMT(3,3,"COMMON.print")),e.R7$(3),e.JRh(e.bMT(6,5,"COMMON.preview")),e.R7$(2),e.Y8G("title",e.bMT(8,7,"COMMON.downloadAsPng")))}function Oe(o,g){if(1&o){const t=e.RV6();e.j41(0,"div",34)(1,"button",35),e.EFF(2),e.nI1(3,"translateHs"),e.nrm(4,"span",36),e.k0s(),e.j41(5,"button",37),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.cancelLoading())}),e.EFF(6,"\u2716 "),e.k0s()()}2&o&&(e.R7$(2),e.SpI("",e.bMT(3,1,"ADDDATA.CATALOGUE.loading"),"..."))}function ke(o,g){if(1&o){const t=e.RV6();e.j41(0,"div",2,0)(2,"hs-panel-header",3)(3,"button",4),e.nI1(4,"translateHs"),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.setToDefault())}),e.EFF(5),e.nI1(6,"translateHs"),e.nrm(7,"i",5),e.k0s()(),e.j41(8,"div",6)(9,"div",6)(10,"div",7)(11,"input",8),e.nI1(12,"translateHs"),e.mxI("ngModelChange",function(n){e.eBV(t);const l=e.XpG();return e.DH7(l.print.titleObj.text,n)||(l.print.titleObj.text=n),e.Njj(n)}),e.k0s(),e.j41(13,"label",9),e.EFF(14),e.nI1(15,"translateHs"),e.k0s()(),e.j41(16,"div",10)(17,"div",11)(18,"input",12),e.mxI("ngModelChange",function(n){e.eBV(t);const l=e.XpG();return e.DH7(l.print.legendObj.include,n)||(l.print.legendObj.include=n),e.Njj(n)}),e.k0s(),e.j41(19,"label",13),e.EFF(20),e.nI1(21,"translateHs"),e.k0s()(),e.j41(22,"div",11)(23,"input",14),e.mxI("ngModelChange",function(n){e.eBV(t);const l=e.XpG();return e.DH7(l.print.imprintObj.include,n)||(l.print.imprintObj.include=n),e.Njj(n)}),e.k0s(),e.j41(24,"label",15),e.EFF(25),e.nI1(26,"translateHs"),e.k0s()(),e.j41(27,"div",11)(28,"input",16),e.mxI("ngModelChange",function(n){e.eBV(t);const l=e.XpG();return e.DH7(l.print.scaleObj.include,n)||(l.print.scaleObj.include=n),e.Njj(n)}),e.k0s(),e.j41(29,"label",17),e.EFF(30),e.nI1(31,"translateHs"),e.k0s()()(),e.j41(32,"button",18),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.setStylerVisible("title"))}),e.EFF(33),e.nI1(34,"translateHs"),e.k0s(),e.DNE(35,xe,1,2,"hs-print-text-styler",19),e.j41(36,"button",18),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.setStylerVisible("legend"))}),e.EFF(37),e.nI1(38,"translateHs"),e.k0s(),e.DNE(39,Te,1,1,"hs-print-legend-styler",20),e.j41(40,"button",18),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.setStylerVisible("imprint"))}),e.EFF(41),e.nI1(42,"translateHs"),e.k0s(),e.DNE(43,je,1,1,"hs-print-imprint-styler",21),e.j41(44,"button",18),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.setStylerVisible("scale"))}),e.EFF(45),e.nI1(46,"translateHs"),e.k0s(),e.DNE(47,Ie,1,1,"hs-print-scale-styler",22)(48,Me,10,9,"div",23)(49,Oe,7,3,"div",24),e.k0s()()()}if(2&o){const t=e.XpG();e.Y8G("ngClass",t.panelWidthClass),e.R7$(2),e.Y8G("panelTabs","PRINT"),e.R7$(),e.Y8G("title",e.bMT(4,27,"COMMON.resetToDefault")),e.R7$(2),e.SpI(" ",e.bMT(6,29,"COMMON.reset")," "),e.R7$(6),e.R50("ngModel",t.print.titleObj.text),e.Y8G("placeholder",e.bMT(12,31,"COMMON.title")),e.R7$(3),e.JRh(e.bMT(15,33,"COMMON.title")),e.R7$(4),e.R50("ngModel",t.print.legendObj.include),e.R7$(2),e.JRh(e.bMT(21,35,"COMMON.legend")),e.R7$(3),e.R50("ngModel",t.print.imprintObj.include),e.R7$(2),e.JRh(e.bMT(26,37,"PRINT.imprint")),e.R7$(3),e.R50("ngModel",t.print.scaleObj.include),e.R7$(2),e.JRh(e.bMT(31,39,"COMMON.scale")),e.R7$(2),e.Y8G("disabled",!t.print.titleObj.text),e.R7$(),e.SpI(" ",e.bMT(34,41,"PRINT.titleStylingOptions")," "),e.R7$(2),e.Y8G("ngIf",t.getStylerVisible("title")),e.R7$(),e.Y8G("disabled",!t.print.legendObj.include),e.R7$(),e.SpI(" ",e.bMT(38,43,"PRINT.legendStylingOptions")," "),e.R7$(2),e.Y8G("ngIf",t.getStylerVisible("legend")&&t.print.legendObj.include),e.R7$(),e.Y8G("disabled",!t.print.imprintObj.include),e.R7$(),e.SpI(" ",e.bMT(42,45,"PRINT.imprintStylingOptions")," "),e.R7$(2),e.Y8G("ngIf",t.getStylerVisible("imprint")&&t.print.imprintObj.include),e.R7$(),e.Y8G("disabled",!t.print.scaleObj.include),e.R7$(),e.SpI(" ",e.bMT(46,47,"PRINT.scaleStylingOptions")," "),e.R7$(2),e.Y8G("ngIf",t.getStylerVisible("scale")&&t.print.scaleObj.include),e.R7$(),e.Y8G("ngIf",!t.isLoading()),e.R7$(),e.Y8G("ngIf",t.isLoading())}}let Pe=(()=>{class o extends N.aH{constructor(t,i,n,l){super(),this.hsUtilsService=t,this.hsPrintService=i,this.hsPrintScaleService=n,this.hsPrintLegendService=l,this.name="print",this.stylers=[{name:"title",visible:!1},{name:"legend",visible:!1},{name:"imprint",visible:!1},{name:"scale",visible:!1}]}ngOnInit(){this.setToDefault(),super.ngOnInit()}setToDefault(){this.print={titleObj:{text:"",textStyle:{textColor:"black",textSize:"30px",fontFamily:"Times New Roman",fontStyle:"normal",textDraw:"fill",posX:"center",posY:"top"}},scaleObj:{include:!1,scaleType:"scaleline",scaleBarText:null,scaleBarSteps:4,scaleUnits:"metric"},legendObj:{include:!1,width:200,bcColor:"white",posX:"right",posY:"bottom"},imprintObj:{include:!1,author:"",abstract:"",width:100,height:50,textStyle:{textColor:"black",bcColor:"transparent",textSize:"12px",fontFamily:"Times New Roman",fontStyle:"normal",posX:"center",posY:"bottom"}}},this.stylers.forEach(t=>{t.visible=!1}),this.hsPrintScaleService.setToDefaultScale(),this.hsPrintLegendService.loadingExternalImages=!1}cancelLoading(){this.hsPrintLegendService.cancelRequest.next()}printLayout(t){var i=this;return(0,h.A)(function*(){yield i.hsPrintService.print(i.print,t)})()}download(){var t=this;return(0,h.A)(function*(){yield t.hsPrintService.download(t.print)})()}isLoading(){return this.hsPrintLegendService.loadingExternalImages}setStylerVisible(t){this.stylers.forEach(i=>{i.visible=i.name===t&&!i.visible})}getStylerVisible(t){return this.stylers.find(i=>i.name===t)?.visible??!1}static#e=this.\u0275fac=function(i){return new(i||o)(e.rXU(B.MJ),e.rXU(V),e.rXU(v),e.rXU(b))};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["hs-print"]],features:[e.Vt3],decls:2,vars:3,consts:[["hsPrint",""],["class","card hs-main-panel",3,"ngClass",4,"ngIf"],[1,"card","hs-main-panel",3,"ngClass"],["name","print",3,"panelTabs"],["mainButton","",1,"btn","btn-sm","btn-outline-primary","border-0",3,"click","title"],[1,"glyphicon","icon-fatredo"],[1,"card-body"],[1,"form-floating","mb-2"],["type","text","id","print-title",1,"form-control",3,"ngModelChange","ngModel","placeholder"],["for","print-title",1,"control-label"],[1,"d-flex","justify-content-around","mb-2"],[1,"form-check","border-0"],["type","checkbox","name","includeLegend","id","includeLegend",1,"form-check-input",3,"ngModelChange","ngModel"],["for","includeLegend",1,"form-check-label","pt-1",2,"cursor","pointer"],["type","checkbox","name","includeImprint","id","includeImprint",1,"form-check-input",3,"ngModelChange","ngModel"],["for","includeImprint",1,"form-check-label","pt-1",2,"cursor","pointer"],["type","checkbox","name","includeScale","id","includeScale",1,"form-check-input",3,"ngModelChange","ngModel"],["for","includeScale",1,"form-check-label","pt-1",2,"cursor","pointer"],["type","button",1,"btn","w-100","mb-2","btn-outline-secondary","dropdown-toggle","dropdown-toggle-split",3,"click","disabled"],[3,"textStyle","objectName",4,"ngIf"],[3,"legendObj",4,"ngIf"],[3,"imprintObj",4,"ngIf"],[3,"scaleObj",4,"ngIf"],["class","mb-2 mt-2 d-flex justify-content-start",4,"ngIf"],["class","d-flex justify-content-center btn-group w-75 m-auto",4,"ngIf"],[3,"textStyle","objectName"],[3,"legendObj"],[3,"imprintObj"],[3,"scaleObj"],[1,"mb-2","mt-2","d-flex","justify-content-start"],["type","button",1,"btn","btn-primary","me-2","w-50",3,"click"],["type","button",1,"btn","btn-secondary","w-50",3,"click"],["data-toggle","tooltip",1,"btn","btn-secondary","ms-2",3,"click","title"],[1,"icon-download"],[1,"d-flex","justify-content-center","btn-group","w-75","m-auto"],[1,"btn","btn-primary","w-75"],[1,"hs-loader","ms-2"],[1,"btn","btn-secondary",3,"click"]],template:function(i,n){1&i&&(e.DNE(0,ke,50,49,"div",1),e.nI1(1,"async")),2&i&&e.Y8G("ngIf",e.bMT(1,1,n.isVisible$))},dependencies:[O,k,x,R,u.bT,u.YU,p.me,p.Zm,p.BC,p.vS,ve.k,u.Jj,ye.q],encapsulation:2})}return o})(),Re=(()=>{class o{static#e=this.\u0275fac=function(i){return new(i||o)};static#t=this.\u0275mod=e.$C({type:o});static#n=this.\u0275inj=e.G2t({imports:[O,k,x,R,p.YN,N.k4]})}return o})()}}]);
//# sourceMappingURL=619.js.map