"use strict";(self.webpackChunkhslayers_cesium_app=self.webpackChunkhslayers_cesium_app||[]).push([[376],{8376:(Le,M,o)=>{o.r(M),o.d(M,{HsMapSwipeComponent:()=>me,HsMapSwipeModule:()=>Se,HsMapSwipeService:()=>k,SwipeControl:()=>E,SwipeSide:()=>c});var f=o(21237),D=o(84205),w=o(93335),y=o(51567),O=o(64334),C=o(50819),b=o(91687);function V(n=j){return(0,C.N)((s,t)=>{let i=!1;s.subscribe((0,b._)(t,r=>{i=!0,t.next(r)},()=>i?t.complete():t.error(n())))})}function j(){return new w.G}var R=o(1440);var I=o(68799),G=o(70271),A=o(99270);class E extends A.A{constructor(s){const t=document.createElement("button"),i=document.createElement("div");i.className=(s?.className||"ol-swipe")+" ol-unselectable ol-control",i.appendChild(t),super({element:i}),this.listeners=new Map,this.options=s||{},i.addEventListener("mousedown",this.move.bind(this)),i.addEventListener("touchstart",this.move.bind(this)),this.precomposeRight=this.precomposeRight.bind(this),this.precomposeLeft=this.precomposeLeft.bind(this),this.postcompose=this.postcompose.bind(this),this.leftLayers=[],this.rightLayers=[],s?.leftLayers&&this.addLayers(s.leftLayers),s?.rightLayers&&this.addLayers(s.rightLayers,!0);const r=s.app?`${s.app}:hs_map_swipe_pos`:"hs_map_swipe_pos",a=localStorage.getItem(r);this.on("propertychange",()=>{if(this.getMap())try{this.getMap().renderSync()}catch(l){console.error(l)}"horizontal"===this.get("orientation")?(this.element.style.top=100*this.get("position")+"%",this.element.style.left=""):("vertical"!==this.get("orientation")&&this.set("orientation","vertical"),this.element.style.left=100*this.get("position")+"%",this.element.style.top=""),this.element.classList.remove("horizontal","vertical"),this.element.classList.add(this.get("orientation")),localStorage.setItem(r,this.get("position"))}),this.set("position",a??s?.position??.5),this.set("orientation",s?.orientation||"vertical")}setTargetMap(s){if(s&&this.setMap(s),this.getMap()){for(const t of this.leftLayers)this.disableEvents(t);for(const t of this.rightLayers)this.disableEvents(t,!0);try{this.getMap().renderSync()}catch{}}}enableEvents(s,t){s.layer.on(["precompose","prerender"],t?this.precomposeRight:this.precomposeLeft),s.layer.on(["postcompose","postrender"],this.postcompose)}disableEvents(s,t){s.layer.un(["precompose","prerender"],t?this.precomposeRight:this.precomposeLeft),s.layer.un(["postcompose","postrender"],this.postcompose)}isLayerAdded(s,t){const i=t?this.rightLayers.find(r=>r.layer==s.layer):this.leftLayers.find(r=>r.layer==s.layer);return i?t?this.rightLayers.indexOf(i):this.leftLayers.indexOf(i):-1}addLayers(s,t){s instanceof Array||(s=[s]);for(const i of s)this.addLayer(i,t)}addLayer(s,t){if(this.isLayerAdded(s,t)<0&&(t?this.rightLayers.push(s):this.leftLayers.push(s),this.getMap())){this.enableEvents(s,t);try{this.getMap().renderSync()}catch(i){console.error(i)}}}setEvents(s){this.leftLayers.forEach(t=>{s?this.enableEvents(t):this.disableEvents(t)}),this.rightLayers.forEach(t=>{s?this.enableEvents(t,!0):this.disableEvents(t,!0)})}removeLayers(){this.leftLayers.forEach(s=>{this.removeLayer(s)}),this.rightLayers.forEach(s=>{this.removeLayer(s,!0)})}removeCompletely(s){let t;t=this.leftLayers.find(i=>i.layer==s),t?this.removeLayer(t):(t=this.rightLayers.find(i=>i.layer==s),t&&this.removeLayer(t,!0))}removeLayer(s,t){const i=this.isLayerAdded(s,t);if(i>-1&&(this.disableEvents(s,t),t?this.rightLayers.splice(i,1):this.leftLayers.splice(i,1)),this.getMap())try{this.getMap().renderSync()}catch(r){console.error(r)}}move(s){switch(s.type){case"touchcancel":case"touchend":case"mouseup":this.isMoving=!1,this.listeners.forEach((t,i)=>{document.removeEventListener(i,t)}),this.listeners.clear();break;case"mousedown":case"touchstart":this.isMoving||(this.isMoving=!0,["mouseup","mousemove","touchend","touchcancel","touchmove"].forEach(t=>{const i=this.move.bind(this);this.listeners.set(t,i),document.addEventListener(t,i)}));case"mousemove":case"touchmove":if(this.isMoving)if("vertical"===this.get("orientation")){let t=s.pageX||s.touches&&s.touches.length&&s.touches[0].pageX||s.changedTouches&&s.changedTouches.length&&s.changedTouches[0].pageX;if(!t)break;t-=this.getMap().getTargetElement().getBoundingClientRect().left+window.pageXOffset-document.documentElement.clientLeft,this.set("position",this.getPosValue(this.getMap().getSize()[0],t)),this.dispatchEvent("moving")}else{let t=s.pageY||s.touches&&s.touches.length&&s.touches[0].pageY||s.changedTouches&&s.changedTouches.length&&s.changedTouches[0].pageY;if(!t)break;t-=this.getMap().getTargetElement().getBoundingClientRect().top+window.pageYOffset-document.documentElement.clientTop,this.set("position",this.getPosValue(this.getMap().getSize()[1],t)),this.dispatchEvent("moving")}}}drawRect(s,t){const i=s.inversePixelTransform;if(i)[[t[0][0],t[0][1]],[t[0][0],t[1][1]],[t[1][0],t[1][1]],[t[1][0],t[0][1]],[t[0][0],t[0][1]]].forEach((a,l)=>{a=[a[0]*i[0]-a[1]*i[1]+i[4],-a[0]*i[2]+a[1]*i[3]+i[5]],l?s.context.lineTo(a[0],a[1]):s.context.moveTo(a[0],a[1])});else{const r=s.frameState.pixelRatio;s.context.rect(t[0][0]*r,t[0][1]*r,t[1][0]*r,t[1][1]*r)}}precomposeLeft(s){const t=s.frameState.size,i=[[0,0],[t[0],t[1]]];i[1]="vertical"===this.get("orientation")?[t[0]*this.get("position"),t[1]]:[t[0],t[1]*this.get("position")],this.precompose(s,i)}precompose(s,t){const i=s.context;i.save(),i.beginPath(),this.drawRect(s,t),i.clip()}precomposeRight(s){const t=s.frameState.size,i=[[0,0],[t[0],t[1]]];i[0]="vertical"===this.get("orientation")?[t[0]*this.get("position"),0]:[0,t[1]*this.get("position")],this.precompose(s,i)}postcompose(s){s.target.getClassName&&"ol-layer"!==s.target.getClassName()&&s.target.get("declutter")?setTimeout(()=>{s.context.restore()},0):s.context.restore()}getPosValue(s,t){let i=s;return i=(i-Math.min(Math.max(0,i-t),i))/i,i}}var h=o(88716),e=o(7404),F=o(14608),$=o(40736),x=o(57418),Y=o(22187),N=o(60014),X=o(64801),B=o(24025),z=o(96080),U=o(38243),c=function(n){return n.Left="left",n.Right="right",n.Full="full",n}(c||{});let k=(()=>{class n{constructor(t,i,r,a,l,v,d,u,m,_e){this.hsMapService=t,this.hsConfig=i,this.hsLayerShiftingService=r,this.hsEventBusService=a,this.hsLayerManagerService=l,this.hsShareUrlService=v,this.hsLayoutService=d,this.hsLayerEditorService=u,this.hsLog=m,this.zone=_e,this.rightLayers=[],this.leftLayers=[],this.entireMapLayers=[],this.movingSide=c.Left,this.orientationVertical=!0,this.swipeCtrl=null,this.rightLayers=[],this.leftLayers=[],this.entireMapLayers=[],this.movingSide=c.Left,this.orientationVertical=!0,this.wasMoved=null,this.swipeControlActive=null,this.orientation=null,this.hsMapService.loaded().then(()=>{this.setInitCtrlActive(),this.setInitOri(),this.hsLayoutService.panelEnabled("mapSwipe")&&this.initSwipeControl()}),this.hsEventBusService.layerManagerUpdates.pipe(function H(n,s){const t=arguments.length>=2;return i=>i.pipe(n?(0,y.p)((r,a)=>n(r,a,i)):R.D,(0,O.s)(1),t?function P(n){return(0,C.N)((s,t)=>{let i=!1;s.subscribe((0,b._)(t,r=>{i=!0,t.next(r)},()=>{i||t.next(n),t.complete()}))})}(s):V(()=>new w.G))}()).subscribe(()=>{this.hsLayoutService.panelEnabled("mapSwipe")&&this.setInitialSwipeLayers()}),this.hsEventBusService.layerManagerUpdates.pipe((0,I.r)(this.hsLayoutService.mainpanel$.pipe((0,y.p)(p=>"mapSwipe"===p))),(0,y.p)(p=>p.length>0),(0,G.T)(p=>this.removeDuplicateUpdates(p))).subscribe(p=>{this.fillSwipeLayers(p)}),this.hsLayerEditorService.layerTitleChange.subscribe(({layer:p})=>{setTimeout(()=>{this.removeCompletely(p),this.fillSwipeLayers(p)},500)})}removeDuplicateUpdates(t){const i=new Map;return t.filter(r=>!!r).forEach(r=>i.set(r.ol_uid,r)),Array.from(i.values())}setInitCtrlActive(){const t=this.hsShareUrlService.getParamValue("map-swipe");this.swipeControlActive=t?"enabled"===t:this.hsConfig?.componentsEnabled?.mapSwipe??!1,this.updateUrlParam()}setInitOri(){const i=localStorage.getItem(this.hsConfig.id?`${this.hsConfig.id}:hs_map_swipe_ori`:"hs_map_swipe_ori");this.orientation=i||(this.hsConfig?.mapSwipeOptions?.orientation??"vertical"),"vertical"!==this.orientation&&(this.orientationVertical=!1),this.updateStorageOri()}initSwipeControl(){this.zone.runOutsideAngular(()=>{this.swipeCtrl=new E({orientation:this.orientation,app:this.hsConfig.id})}),this.swipeControlActive&&(this.swipeCtrl.setTargetMap(this.hsMapService.getMap()),this.hsMapService.getMap().addControl(this.swipeCtrl))}updateStorageOri(){localStorage.setItem(this.hsConfig.id?`${this.hsConfig.id}:hs_map_swipe_ori`:"hs_map_swipe_ori",this.orientation)}updateUrlParam(){this.hsShareUrlService.updateCustomParams({"map-swipe":this.swipeControlActive?"enabled":"disabled"})}layersAvailable(){return this.swipeCtrl?.leftLayers?.length>0||this.swipeCtrl?.rightLayers?.length>0||this.entireMapLayers?.length>0}setOrientation(){this.orientationVertical=!this.orientationVertical,this.orientation=this.orientationVertical?"vertical":"horizontal",this.swipeCtrl.set("orientation",this.orientation),this.updateStorageOri()}fillSwipeLayers(t){this.hsLayerShiftingService.fillLayers(),t&&((Array.isArray(t)?t:[t]).forEach(r=>{const a=this.hsLayerShiftingService.layersCopy.find(l=>l.layer==r);void 0!==a?(this.setLayerActive(a),this.wasMoved?this.moveSwipeLayer(a):this.addSwipeLayer(a),this.checkForMissingLayers()):this.removeCompletely(r)}),this.sortLayers(),this.wasMoved=!1,this.movingSide=c.Left)}addSwipeLayer(t){this.swipeCtrl||this.initSwipeControl(),this.createQueryFilter(t),this.findLayer(t.layer)?.l||(t.visible=t.layer.getVisible(),"right"===(0,h.Se)(t.layer)?(this.swipeCtrl.addLayer(t,!0),this.rightLayers.push(t)):"left"===(0,h.Se)(t.layer)?(this.swipeCtrl.addLayer(t),this.leftLayers.push(t)):this.entireMapLayers.push(t),t.layer.on("change:visible",i=>this.layerVisibilityChanged(i)))}createQueryFilter(t){const i=(0,h.Hs)(t.layer);(0,h.V3)(t.layer,(a,l,v)=>{let d;const u=(0,h.Se)(l);if(this.swipeControlActive&&u){const m="vertical"==this.orientation?this.swipeCtrl.getPosValue(a.getSize()[0],v[0]):this.swipeCtrl.getPosValue(a.getSize()[1],v[1]);d=m<=this.swipeCtrl.get("position")&&"left"==u||m>this.swipeCtrl.get("position")&&"right"==u}else d=!0;return null!=i?i(a,l,v)&&d:d})}moveSwipeLayer(t){this.movingSide===c.Right&&(this.moveRight(t),(0,h.Kc)(t.layer,"right")),this.movingSide===c.Left&&(this.moveLeft(t),(0,h.Kc)(t.layer,"left")),this.movingSide===c.Full&&((0,h.Kc)(t.layer,void 0),this.swipeCtrl.removeCompletely(t.layer))}moveRight(t){this.swipeCtrl.removeLayer(t),this.swipeCtrl.addLayer(t,!0)}moveLeft(t){this.swipeCtrl.removeLayer(t,!0),this.swipeCtrl.addLayer(t)}setControl(){if(this.swipeControlActive=!this.swipeControlActive,this.updateUrlParam(),this.hsMapService.getMap()){this.swipeControlActive?(this.swipeCtrl.setTargetMap(this.hsMapService.getMap()),this.hsMapService.getMap().addControl(this.swipeCtrl),this.swipeCtrl.setEvents(!0)):(this.hsMapService.getMap().removeControl(this.swipeCtrl),this.swipeCtrl.setEvents());try{this.hsMapService.getMap().renderSync()}catch(t){this.hsLog.error(t)}}}removeCompletely(t){const i=this.findLayer(t);i.l&&("layers"===i.arr&&(this.leftLayers=this.leftLayers.filter(r=>r.layer!=t)),"rightLayers"===i.arr&&(this.rightLayers=this.rightLayers.filter(r=>r.layer!=t)),"entireMapLayers"===i.arr&&(this.entireMapLayers=this.entireMapLayers.filter(r=>r.layer!=t))),this.swipeCtrl.removeCompletely(t)}setLayerActive(t){const i=this.findLayer(t.layer);this.leftLayers.forEach(r=>r.active=!1),this.rightLayers.forEach(r=>r.active=!1),this.entireMapLayers.forEach(r=>r.active=!1),i?.l&&(i.l.active=!0)}setInitialSwipeLayers(){if(this.leftLayers=[],this.rightLayers=[],this.entireMapLayers=[],this.hsLayerShiftingService.fillLayers(),this.hsLayerShiftingService.layersCopy){for(const t of this.hsLayerShiftingService.layersCopy)this.addSwipeLayer(t);this.sortLayers()}}checkForMissingLayers(){const t=this.hsLayerShiftingService.layersCopy.filter(i=>!this.findLayer(i.layer)?.l);for(const i of t)this.addSwipeLayer(i);this.sortLayers()}sortLayers(){this.leftLayers=this.hsLayerManagerService.sortLayersByZ(this.leftLayers),this.rightLayers=this.hsLayerManagerService.sortLayersByZ(this.rightLayers),this.entireMapLayers=this.hsLayerManagerService.sortLayersByZ(this.entireMapLayers)}changeLayerVisibility(t){t.layer.setVisible(!t.layer.getVisible()),t.visible=t.layer.getVisible()}layerVisibilityChanged(t){const i=this.findLayer(t.target);i.l&&(i.l.visible=t.target.getVisible())}findLayer(t){const i={l:null,arr:""};return i.l=this.leftLayers.find(r=>r.layer==t),i.arr="layers",i.l||(i.l=this.rightLayers.find(r=>r.layer==t),i.arr="rightLayers"),i.l||(i.l=this.entireMapLayers.find(r=>r.layer==t),i.arr="entireMapLayers"),i}static#e=this.\u0275fac=function(i){return new(i||n)(e.KVO(F.F),e.KVO($.Q),e.KVO(x.U),e.KVO(Y.z),e.KVO(N.ng),e.KVO(X.JX),e.KVO(B.F),e.KVO(z.HsLayerEditorService),e.KVO(U.r),e.KVO(e.SKi))};static#t=this.\u0275prov=e.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var T=o(25849),g=o(60316),W=o(70258),K=o(31968);const J=()=>({module:"LAYERS"}),Q=()=>({module:"MAP_SWIPE"}),S=(n,s)=>[n,s],_=n=>({activeLayer:n}),L=n=>({layer:n});function Z(n,s){if(1&n){const t=e.RV6();e.j41(0,"div",7)(1,"button",8),e.bIt("click",function(r){const a=e.eBV(t).layer;return e.XpG().changeLayerVisibility(a),e.Njj(r.stopPropagation())}),e.k0s(),e.j41(2,"p",9),e.EFF(3),e.nI1(4,"translateHs"),e.k0s()()}if(2&n){const t=s.layer;e.R7$(),e.Y8G("ngClass",t.visible?"hs-checkmark":"hs-uncheckmark"),e.R7$(2),e.JRh(e.i5U(4,2,t.title,e.lJ4(5,J)))}}function q(n,s){1&n&&(e.j41(0,"div",10),e.EFF(1),e.nI1(2,"translateHs"),e.k0s()),2&n&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"MAP_SWIPE.noLayers")," "))}function ee(n,s){if(1&n){const t=e.RV6();e.j41(0,"button",23),e.bIt("click",function(){e.eBV(t);const r=e.XpG(2);return e.Njj(r.setOrientation())}),e.EFF(1),e.nI1(2,"translateHs"),e.k0s()}if(2&n){const t=s.$implicit,i=e.XpG(2);e.Y8G("disabled",!i.hsMapSwipeService.swipeControlActive)("ngClass",i.hsMapSwipeService.orientation===t?"btn-primary":"btn-secondary"),e.R7$(),e.SpI(" ",e.i5U(2,3,t,e.lJ4(6,Q))," ")}}function te(n,s){1&n&&e.eu8(0)}function ie(n,s){if(1&n&&(e.j41(0,"div",34),e.DNE(1,te,1,0,"ng-container",35),e.k0s()),2&n){const t=s.$implicit;e.XpG(3);const i=e.sdS(1);e.Y8G("ngClass",e.eq3(3,_,t.active)),e.R7$(),e.Y8G("ngTemplateOutlet",i)("ngTemplateOutletContext",e.eq3(5,L,t))}}function se(n,s){1&n&&e.eu8(0)}function re(n,s){if(1&n&&(e.j41(0,"div"),e.DNE(1,se,1,0,"ng-container",36),e.k0s()),2&n){e.XpG(3);const t=e.sdS(3);e.R7$(),e.Y8G("ngTemplateOutlet",t)}}function ne(n,s){1&n&&(e.qex(0),e.j41(1,"th"),e.EFF(2),e.nI1(3,"translateHs"),e.k0s(),e.j41(4,"th"),e.EFF(5),e.nI1(6,"translateHs"),e.k0s(),e.bVm()),2&n&&(e.R7$(2),e.JRh(e.bMT(3,2,"MAP_SWIPE.leftSide")),e.R7$(3),e.JRh(e.bMT(6,4,"MAP_SWIPE.rightSide")))}function ae(n,s){1&n&&(e.j41(0,"th"),e.EFF(1),e.nI1(2,"translateHs"),e.k0s(),e.j41(3,"th"),e.EFF(4),e.nI1(5,"translateHs"),e.k0s()),2&n&&(e.R7$(),e.JRh(e.bMT(2,2,"MAP_SWIPE.top")),e.R7$(3),e.JRh(e.bMT(5,4,"MAP_SWIPE.bottom")))}function oe(n,s){1&n&&e.eu8(0)}function le(n,s){if(1&n&&(e.j41(0,"div",34),e.DNE(1,oe,1,0,"ng-container",35),e.k0s()),2&n){const t=s.$implicit;e.XpG(3);const i=e.sdS(1);e.Y8G("ngClass",e.eq3(3,_,t.active)),e.R7$(),e.Y8G("ngTemplateOutlet",i)("ngTemplateOutletContext",e.eq3(5,L,t))}}function pe(n,s){1&n&&e.eu8(0)}function ce(n,s){if(1&n&&(e.j41(0,"div"),e.DNE(1,pe,1,0,"ng-container",36),e.k0s()),2&n){e.XpG(3);const t=e.sdS(3);e.R7$(),e.Y8G("ngTemplateOutlet",t)}}function he(n,s){1&n&&e.eu8(0)}function de(n,s){if(1&n&&(e.j41(0,"div",34),e.DNE(1,he,1,0,"ng-container",35),e.k0s()),2&n){const t=s.$implicit;e.XpG(3);const i=e.sdS(1);e.Y8G("ngClass",e.eq3(3,_,t.active)),e.R7$(),e.Y8G("ngTemplateOutlet",i)("ngTemplateOutletContext",e.eq3(5,L,t))}}function ge(n,s){1&n&&e.eu8(0)}function fe(n,s){if(1&n&&(e.j41(0,"div"),e.DNE(1,ge,1,0,"ng-container",36),e.k0s()),2&n){e.XpG(3);const t=e.sdS(3);e.R7$(),e.Y8G("ngTemplateOutlet",t)}}function ve(n,s){if(1&n){const t=e.RV6();e.j41(0,"div",24)(1,"table",25)(2,"tbody")(3,"tr",26)(4,"th",27),e.EFF(5),e.nI1(6,"translateHs"),e.k0s()(),e.j41(7,"tr",28)(8,"td",29,2),e.bIt("cdkDropListExited",function(){e.eBV(t);const r=e.XpG(2);return e.Njj(r.placeholders.entire=!0)})("cdkDropListEntered",function(){e.eBV(t);const r=e.XpG(2);return e.Njj(r.placeholders.entire=!1)})("cdkDropListDropped",function(r){e.eBV(t);const a=e.XpG(2);return e.Njj(a.drop(r,a.swipeSide.Full))}),e.DNE(10,ie,2,7,"div",30)(11,re,2,1,"div",31),e.k0s()(),e.j41(12,"tr",26),e.DNE(13,ne,7,6,"ng-container",32)(14,ae,6,6,"ng-template",null,3,e.C5r),e.k0s(),e.j41(16,"tr")(17,"td",33,4),e.bIt("cdkDropListDropped",function(r){e.eBV(t);const a=e.XpG(2);return e.Njj(a.drop(r,a.swipeSide.Left))})("cdkDropListExited",function(){e.eBV(t);const r=e.XpG(2);return e.Njj(r.placeholders.left=!0)})("cdkDropListEntered",function(){e.eBV(t);const r=e.XpG(2);return e.Njj(r.placeholders.left=!1)}),e.DNE(19,le,2,7,"div",30)(20,ce,2,1,"div",31),e.k0s(),e.j41(21,"td",33,5),e.bIt("cdkDropListDropped",function(r){e.eBV(t);const a=e.XpG(2);return e.Njj(a.drop(r,a.swipeSide.Right))})("cdkDropListExited",function(){e.eBV(t);const r=e.XpG(2);return e.Njj(r.placeholders.right=!0)})("cdkDropListEntered",function(){e.eBV(t);const r=e.XpG(2);return e.Njj(r.placeholders.right=!1)}),e.DNE(23,de,2,7,"div",30)(24,fe,2,1,"div",31),e.k0s()()()()()}if(2&n){const t=e.sdS(9),i=e.sdS(15),r=e.sdS(18),a=e.sdS(22),l=e.XpG(2);e.R7$(5),e.JRh(e.bMT(6,15,"MAP_SWIPE.entireMap")),e.R7$(3),e.Y8G("cdkDropListConnectedTo",e.l_i(17,S,r,a))("cdkDropListData",l.hsMapSwipeService.entireMapLayers),e.R7$(2),e.Y8G("ngForOf",l.hsMapSwipeService.entireMapLayers),e.R7$(),e.Y8G("ngIf",0===(null==l.hsMapSwipeService.entireMapLayers?null:l.hsMapSwipeService.entireMapLayers.length)&&l.placeholders.entire),e.R7$(2),e.Y8G("ngIf","vertical"===l.hsMapSwipeService.orientation)("ngIfElse",i),e.R7$(4),e.Y8G("cdkDropListConnectedTo",e.l_i(20,S,a,t))("cdkDropListData",l.hsMapSwipeService.leftLayers),e.R7$(2),e.Y8G("ngForOf",l.hsMapSwipeService.leftLayers),e.R7$(),e.Y8G("ngIf",0===(null==l.hsMapSwipeService.leftLayers?null:l.hsMapSwipeService.leftLayers.length)&&l.placeholders.left),e.R7$(),e.Y8G("cdkDropListConnectedTo",e.l_i(23,S,r,t))("cdkDropListData",l.hsMapSwipeService.rightLayers),e.R7$(2),e.Y8G("ngForOf",l.hsMapSwipeService.rightLayers),e.R7$(),e.Y8G("ngIf",0===(null==l.hsMapSwipeService.rightLayers?null:l.hsMapSwipeService.rightLayers.length)&&l.placeholders.right)}}function ue(n,s){if(1&n){const t=e.RV6();e.j41(0,"div",11),e.nrm(1,"hs-panel-header",12),e.j41(2,"div",13)(3,"div",14),e.EFF(4),e.nI1(5,"translateHs"),e.k0s(),e.j41(6,"div",15)(7,"div",16),e.DNE(8,ee,3,7,"button",17),e.k0s(),e.j41(9,"div",18)(10,"button",19),e.nI1(11,"translateHs"),e.bIt("click",function(){e.eBV(t);const r=e.XpG();return e.Njj(r.resetSwipePos())}),e.nrm(12,"i",20),e.k0s(),e.j41(13,"button",21),e.bIt("click",function(){e.eBV(t);const r=e.XpG();return e.Njj(r.setControl())}),e.EFF(14),e.nI1(15,"translateHs"),e.k0s()()(),e.DNE(16,ve,25,26,"div",22),e.k0s()()}if(2&n){const t=e.XpG();e.Y8G("ngClass",t.panelWidthClass),e.R7$(),e.Y8G("panelTabs","MAP_SWIPE"),e.R7$(3),e.SpI(" ",e.bMT(5,9,"MAP_SWIPE.dndLayers")," "),e.R7$(4),e.Y8G("ngForOf",t.swipeOptions),e.R7$(2),e.Y8G("title",e.bMT(11,11,"MAP_SWIPE.resetSlider"))("disabled",!t.hsMapSwipeService.swipeControlActive),e.R7$(3),e.Y8G("ngClass",t.hsMapSwipeService.swipeControlActive?"active btn-danger":"btn-primary"),e.R7$(),e.SpI(" ",e.bMT(15,13,t.getEnabledButtonString())," "),e.R7$(2),e.Y8G("ngIf",t.layersAvailable()&&t.hsMapSwipeService.swipeControlActive)}}let me=(()=>{class n extends T.aH{constructor(t,i){super(),this.hsMapSwipeService=t,this.hsLayerShiftingService=i,this.end=new D.B,this.swipeSide=c,this.placeholders={entire:!0,left:!0,right:!0},this.name="mapSwipe",this.swipeOptions=["vertical","horizontal"]}getEnabledButtonString(){return this.hsMapSwipeService.swipeControlActive?"MAP_SWIPE.disableSwipe":"MAP_SWIPE.enableSwipe"}getOrientationButtonString(){return this.hsMapSwipeService.orientationVertical?"MAP_SWIPE.horizontalSwipe":"MAP_SWIPE.verticalSwipe"}resetSwipePos(){this.hsMapSwipeService.swipeCtrl.set("position",.5)}ngOnDestroy(){this.end.next(),this.end.complete()}drop(t,i){let r,a;this.hsMapSwipeService.movingSide=i,this.hsMapSwipeService.wasMoved=!0,t.previousContainer===t.container?(r=t.container.data[t.previousIndex],a=t.container.data[t.currentIndex],(0,f.HD)(t.container.data,t.previousIndex,t.currentIndex)):(r=t.previousContainer.data[t.previousIndex],a=t.container.data[t.currentIndex],(0,f.eg)(t.previousContainer.data,t.container.data,t.previousIndex,t.currentIndex)),r&&a?.layer?this.hsLayerShiftingService.moveTo(r,a.layer):this.hsMapSwipeService.fillSwipeLayers(r.layer)}changeLayerVisibility(t){this.hsMapSwipeService.changeLayerVisibility(t)}setOrientation(){this.hsMapSwipeService.setOrientation()}layersAvailable(){return this.hsMapSwipeService.layersAvailable()}setControl(){this.hsMapSwipeService.setControl()}getRightLayers(){return this.hsMapSwipeService.rightLayers}static#e=this.\u0275fac=function(i){return new(i||n)(e.rXU(k),e.rXU(x.U))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["hs-map-swipe"]],features:[e.Vt3],decls:6,vars:3,consts:[["layerItem",""],["listPlaceholder",""],["entireMapList","cdkDropList"],["topDownLabels",""],["leftList","cdkDropList"],["rightList","cdkDropList"],["class","card hs-main-panel",3,"ngClass",4,"ngIf"],[1,"hs-lm-item-title","d-flex","align-items-center",2,"word-break","break-all","cursor","move"],["type","button",1,"btn","btn-sm","hs-lm-item-visibility","m-0","p-0",3,"click","ngClass"],[1,"m-0","ps-1"],[1,"p-2",2,"border","1px solid #ddd","text-align","center","color","rgba(0,0,0,0.3)"],[1,"card","hs-main-panel",3,"ngClass"],["name","mapSwipe",3,"panelTabs"],[1,"card-body","m-2"],["role","alert",1,"alert","alert-info","ps-2","text-center"],[1,"d-flex","justify-content-between","gap-2","mb-2"],["data-toggle","buttons",1,"btn-group","align-items-center","d-flex","flex-grow-1"],["class","btn btn-sm  text-truncate h-100","type","button",3,"disabled","ngClass","click",4,"ngFor","ngForOf"],[1,"btn-group"],["type","button",1,"btn","btn-sm","btn-secondary","hs-map-swipe-reset",2,"max-width","15ch",3,"click","title","disabled"],[1,"icon-fatredo"],["type","button",1,"btn","btn-sm",3,"click","ngClass"],["class","pt-1",4,"ngIf"],["type","button",1,"btn","btn-sm","text-truncate","h-100",3,"click","disabled","ngClass"],[1,"pt-1"],[1,"table","table-sm","table-striped","table-borderless","p-1",2,"table-layout","fixed"],[2,"text-align","center"],["colspan","2"],[1,"mb-1"],["colspan","2","cdkDropList","",3,"cdkDropListExited","cdkDropListEntered","cdkDropListDropped","cdkDropListConnectedTo","cdkDropListData"],["class","list-group-item p-2","cdkDrag","",3,"ngClass",4,"ngFor","ngForOf"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["cdkDropList","",3,"cdkDropListDropped","cdkDropListExited","cdkDropListEntered","cdkDropListConnectedTo","cdkDropListData"],["cdkDrag","",1,"list-group-item","p-2",3,"ngClass"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[4,"ngTemplateOutlet"]],template:function(i,r){1&i&&(e.DNE(0,Z,5,6,"ng-template",null,0,e.C5r)(2,q,3,3,"ng-template",null,1,e.C5r)(4,ue,17,15,"div",6),e.nI1(5,"async")),2&i&&(e.R7$(4),e.Y8G("ngIf",e.bMT(5,1,r.isVisible$)))},dependencies:[g.YU,g.Sq,g.bT,g.T3,W.k,f.O7,f.T1,g.Jj,K.q],styles:[".activeLayer[_ngcontent-%COMP%]{background-color:#0003}.cdk-drag-placeholder[_ngcontent-%COMP%]{background-color:#0000003d;color:#fff}.cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;background-color:#b9b9b956;border:1px solid rgb(185,185,185);overflow:hidden;color:transparent;box-shadow:0 5px 5px -3px #0003,0 8px 10px 1px #00000024,0 3px 14px 2px #0000001f}.cdk-drag-preview[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{display:none}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}td.cdk-drop-list[_ngcontent-%COMP%]{vertical-align:top}.list-group.cdk-drop-list-dragging[_ngcontent-%COMP%]   .list-group-item[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}.hs-map-swipe-reset[_ngcontent-%COMP%]:not(:disabled){opacity:.9}"]})}return n})();var ye=o(34456);let Se=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=e.$C({type:n});static#i=this.\u0275inj=e.G2t({imports:[g.MD,T.k4,ye.YN,f.ad]})}return n})()}}]);
//# sourceMappingURL=376.js.map