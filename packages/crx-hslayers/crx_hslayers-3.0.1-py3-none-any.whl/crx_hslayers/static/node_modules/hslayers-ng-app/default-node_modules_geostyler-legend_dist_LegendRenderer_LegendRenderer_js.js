"use strict";(self.webpackChunkhslayers_app=self.webpackChunkhslayers_app||[]).push([["default-node_modules_geostyler-legend_dist_LegendRenderer_LegendRenderer_js"],{76387:(it,M)=>{Object.defineProperty(M,"__esModule",{value:!0}),M.default=function(){return function F(k,D,B){this.size=k,this.maxColumnWidth=D,this.maxColumnHeight=B}}()},31262:function(it,M,N){var F=this&&this.__awaiter||function(A,o,s,a){return new(s||(s=Promise))(function(l,C){function T(L){try{m(a.next(L))}catch(V){C(V)}}function I(L){try{m(a.throw(L))}catch(V){C(V)}}function m(L){L.done?l(L.value):function b(l){return l instanceof s?l:new s(function(C){C(l)})}(L.value).then(T,I)}m((a=a.apply(A,o||[])).next())})},k=this&&this.__generator||function(A,o){var a,b,l,C,s={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return C={next:T(0),throw:T(1),return:T(2)},"function"==typeof Symbol&&(C[Symbol.iterator]=function(){return this}),C;function T(m){return function(L){return function I(m){if(a)throw new TypeError("Generator is already executing.");for(;s;)try{if(a=1,b&&(l=2&m[0]?b.return:m[0]?b.throw||((l=b.return)&&l.call(b),0):b.next)&&!(l=l.call(b,m[1])).done)return l;switch(b=0,l&&(m=[2&m[0],l.value]),m[0]){case 0:case 1:l=m;break;case 4:return s.label++,{value:m[1],done:!1};case 5:s.label++,b=m[1],m=[0];continue;case 7:m=s.ops.pop(),s.trys.pop();continue;default:if(!(l=(l=s.trys).length>0&&l[l.length-1])&&(6===m[0]||2===m[0])){s=0;continue}if(3===m[0]&&(!l||m[1]>l[0]&&m[1]<l[3])){s.label=m[1];break}if(6===m[0]&&s.label<l[1]){s.label=l[1],l=m;break}if(l&&s.label<l[2]){s.label=l[2],s.ops.push(m);break}l[2]&&s.ops.pop(),s.trys.pop();continue}m=o.call(A,s)}catch(L){m=[6,L],b=0}finally{a=l=0}if(5&m[0])throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}([m,L])}}},D=this&&this.__spreadArray||function(A,o,s){if(s||2===arguments.length)for(var l,a=0,b=o.length;a<b;a++)(l||!(a in o))&&(l||(l=Array.prototype.slice.call(o,0,a)),l[a]=o[a]);return A.concat(l||Array.prototype.slice.call(o))},B=this&&this.__importDefault||function(A){return A&&A.__esModule?A:{default:A}};Object.defineProperty(M,"__esModule",{value:!0}),M.LegendRenderer=void 0;var j=N(14378),W=B(N(48791)),P=B(N(98695)),R=B(N(16558)),y=B(N(26735)),v=N(29984),u=B(N(44298)),p=B(N(34958)),_=B(N(47113)),d=B(N(25632)),w=[45,30],O=function(){function A(o){this.config=null,this.config=o}return A.prototype.extractConfigFromStyle=function(o){var s={items:[],title:""};return o.name&&(s.title=o.name),o.rules.forEach(function(a){s.items.push({title:a.name,rule:a})}),s},A.prototype.renderLegendItem=function(o,s,a){var b=this,l=this.config,C=l.hideRect,T=l.maxColumnHeight,I=l.maxColumnWidth;if(s.rule)return o.useContainer(s.title),this.getRuleIcon(s.rule).then(function(m){return F(b,void 0,void 0,function(){return k(this,function(L){switch(L.label){case 0:return[4,o.addImage.apply(o,D(D([m],w,!1),[a[0]+1,a[1],!C],!1))];case 1:return L.sent(),o.addLabel(s.title,a[0]+w[0]+5,a[1]+20),a[1]+=w[1]+5,T&&a[1]+w[1]+5>=T&&(a[1]=5,a[0]+=I),[2]}})})}).catch(function(){})},A.prototype.getGeometryForSymbolizer=function(o){switch(o.kind){case"Mark":case"Icon":case"Text":default:return new W.default([w[0]/2,w[1]/2]);case"Fill":return new P.default([[[3,3],[w[0]-3,3],[w[0]-3,w[1]-3],[3,w[1]-3],[3,3]]]);case"Line":return new R.default([[w[0]/6,w[1]/6],[w[0]/3,w[1]/3*2],[w[0]/2,w[1]/3],[w[0]/6*5,w[1]/6*5]])}},A.prototype.getRuleIcon=function(o){var s=this,a=document.createElement("canvas");a.setAttribute("width","".concat(w[0])),a.setAttribute("height","".concat(w[1]));var b=(0,j.boundingExtent)([[0,0],[w[0],w[1]]]),C=a.getContext("2d"),T=(0,v.create)(),I=new y.default(C,1,b,T,0),m=[];o.symbolizers.forEach(function(H){return m.push(s.getGeometryForSymbolizer(H))});var L=new u.default,V={name:"",rules:[{name:"",symbolizers:o.symbolizers}]};return new Promise(function(H,z){return F(s,void 0,void 0,function(){function X(){m.forEach(function(J){return I.drawGeometry(J)})}var Y,E,q,U;return k(this,function(J){switch(J.label){case 0:return J.trys.push([0,2,,3]),[4,L.writeStyle(V)];case 1:return Y=J.sent(),E=Y.output,(U=void 0===(q=Y.errors)?[]:q).length>0&&z(U[0]),"function"==typeof E&&(E=E(new p.default(m[0]),1)),Array.isArray(E)?E.forEach(function(et){I.setStyle(et),X()}):(I.setStyle(E),X()),H(a.toDataURL("image/png")),[3,3];case 2:return J.sent(),z(),[3,3];case 3:return[2]}})})})},A.prototype.renderLegend=function(o,s,a){var b=this;return s.useRoot(),"auto"!==this.config.overflow&&0!==a[0]&&o.items.length*(w[1]+5)+20+a[1]>this.config.maxColumnHeight&&(a[0]+=this.config.maxColumnWidth,a[1]=0),o.title&&(s.addTitle(o.title,a[0],0===a[1]?"1em":a[1]+15),a[1]+=20),o.items.reduce(function(C,T){return C.then(function(){return b.renderLegendItem(s,T,a)})},Promise.resolve())},A.prototype.renderImages=function(o,s,a){return F(this,void 0,void 0,function(){var b,l,C,T,I,L,H,z,X,Y=this;return k(this,function(E){switch(E.label){case 0:b=20,l=5,C=0,E.label=1;case 1:if(!(C<o.length))return[3,10];T=o[C].url,I=o[C].title,E.label=2;case 2:return E.trys.push([2,8,,9]),[4,fetch(T)];case 3:return[4,E.sent().blob()];case 4:return L=E.sent(),[4,(q=L,F(Y,void 0,void 0,function(){var U=this;return k(this,function(tt){return[2,new Promise(function(J,et){try{var ot=new FileReader;ot.onload=function(nt){return F(U,void 0,void 0,function(){return k(this,function(ht){return J(nt.target.result),[2]})})},ot.readAsDataURL(q)}catch(nt){et(nt)}})]})}))];case 5:return H=E.sent(),(z=new Image).src=H.toString(),[4,z.decode()];case 6:return E.sent(),"auto"===this.config.overflow&&z.height+b+l+a[1]>this.config.maxColumnHeight&&(a[0]+=this.config.maxColumnWidth,a[1]=0),I&&(s.useRoot(),a[1]+=b,s.addTitle.apply(s,D([I],a,!1)),a[1]+=l),[4,s.addImage.apply(s,D(D([H.toString(),z.width,z.height],a,!1),[!1],!1))];case 7:return E.sent(),a[1]+=z.height,[3,9];case 8:return X=E.sent(),console.error("Error on fetching legend: ",X),[3,9];case 9:return C++,[3,1];case 10:return[2]}var q})})},A.prototype.renderAsImage=function(o,s){return F(this,void 0,void 0,function(){var a,b,l,C,T,I,m,L,V,H,X,Y,E,q=this;return k(this,function(U){switch(U.label){case 0:l=(a=this.config).configs,T=(C=a.size)[0],I=C[1],m=a.remoteLegends,L=a.maxColumnWidth,V=a.maxColumnHeight,H=[],(b=a.styles)&&b.forEach(function(tt){return H.push(q.extractConfigFromStyle(tt))}),l&&H.unshift.apply(H,l),X=new("svg"===o?_.default:d.default)([T,I],L,V,s),Y=[0,0],E=0,U.label=1;case 1:return E<H.length?[4,this.renderLegend(H[E],X,Y)]:[3,4];case 2:U.sent(),U.label=3;case 3:return E++,[3,1];case 4:return m?[4,this.renderImages(m,X,Y)]:[3,6];case 5:U.sent(),U.label=6;case 6:return[2,X.generate(Y[1])]}})})},A.prototype.render=function(o,s){return void 0===s&&(s="svg"),F(this,void 0,void 0,function(){return k(this,function(a){switch(a.label){case 0:return[4,this.renderAsImage(s,o)];case 1:return a.sent(),[2]}})})},A}();M.LegendRenderer=O,M.default=O},25632:function(it,M,N){var F=this&&this.__extends||function(){var y=function(v,u){return(y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,_){p.__proto__=_}||function(p,_){for(var d in _)Object.prototype.hasOwnProperty.call(_,d)&&(p[d]=_[d])})(v,u)};return function(v,u){if("function"!=typeof u&&null!==u)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");function p(){this.constructor=v}y(v,u),v.prototype=null===u?Object.create(u):(p.prototype=u.prototype,new p)}}(),k=this&&this.__awaiter||function(y,v,u,p){return new(u||(u=Promise))(function(d,w){function O(s){try{o(p.next(s))}catch(a){w(a)}}function A(s){try{o(p.throw(s))}catch(a){w(a)}}function o(s){s.done?d(s.value):function _(d){return d instanceof u?d:new u(function(w){w(d)})}(s.value).then(O,A)}o((p=p.apply(y,v||[])).next())})},D=this&&this.__generator||function(y,v){var p,_,d,w,u={label:0,sent:function(){if(1&d[0])throw d[1];return d[1]},trys:[],ops:[]};return w={next:O(0),throw:O(1),return:O(2)},"function"==typeof Symbol&&(w[Symbol.iterator]=function(){return this}),w;function O(o){return function(s){return function A(o){if(p)throw new TypeError("Generator is already executing.");for(;u;)try{if(p=1,_&&(d=2&o[0]?_.return:o[0]?_.throw||((d=_.return)&&d.call(_),0):_.next)&&!(d=d.call(_,o[1])).done)return d;switch(_=0,d&&(o=[2&o[0],d.value]),o[0]){case 0:case 1:d=o;break;case 4:return u.label++,{value:o[1],done:!1};case 5:u.label++,_=o[1],o=[0];continue;case 7:o=u.ops.pop(),u.trys.pop();continue;default:if(!(d=(d=u.trys).length>0&&d[d.length-1])&&(6===o[0]||2===o[0])){u=0;continue}if(3===o[0]&&(!d||o[1]>d[0]&&o[1]<d[3])){u.label=o[1];break}if(6===o[0]&&u.label<d[1]){u.label=d[1],d=o;break}if(d&&u.label<d[2]){u.label=d[2],u.ops.push(o);break}d[2]&&u.ops.pop(),u.trys.pop();continue}o=v.call(y,u)}catch(s){o=[6,s],_=0}finally{p=d=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},B=this&&this.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(M,"__esModule",{value:!0});var j=B(N(76387)),W="geostyler-legend-renderer";function P(y){if("number"==typeof y)return y;var v=document.createElement("div");document.body.append(v),v.style.height=y;var u=parseFloat(getComputedStyle(v).height.replace(/px$/,""));return v.remove(),u}var R=function(y){function v(u,p,_,d){var w=y.call(this,u,p,_)||this;return w.target=d,w.createCanvas.apply(w,u),w}return F(v,y),v.prototype.useContainer=function(u){},v.prototype.useRoot=function(){},v.prototype.addTitle=function(u,p,_){this.context.fillText(u,P(p),P(_))},v.prototype.addLabel=function(u,p,_){this.context.fillText(u,P(p),P(_))},v.prototype.addImage=function(u,p,_,d,w,O){return k(this,void 0,void 0,function(){var A,o,s,a;return D(this,function(b){switch(b.label){case 0:return A=P(d),o=P(w),this.expandHeight(o+_),s=new Image,a=new Promise(function(l){return s.onload=l}),s.src=u,[4,a];case 1:return b.sent(),this.context.drawImage(s,A,o,p,_),O&&(this.context.strokeStyle="1px solid black",this.context.strokeRect(A,o,p,_)),[2]}})})},v.prototype.generate=function(u){return this.canvas},v.prototype.createCanvas=function(u,p){this.canvas=document.createElement("canvas"),this.canvas.className=W,this.canvas.width=u,this.canvas.height=p,this.context=this.canvas.getContext("2d"),this.context.font="14px sans-serif",this.target&&(this.target.querySelectorAll(".".concat(W)).forEach(function(_){return _.remove()}),this.target.append(this.canvas))},v.prototype.expandHeight=function(u){if(!(this.canvas.height>=u)){var p=this.canvas;this.createCanvas(this.canvas.width,u),this.context.drawImage(p,0,0)}},v}(j.default);M.default=R},47113:function(it,M,N){var F=this&&this.__extends||function(){var P=function(R,y){return(P=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,u){v.__proto__=u}||function(v,u){for(var p in u)Object.prototype.hasOwnProperty.call(u,p)&&(v[p]=u[p])})(R,y)};return function(R,y){if("function"!=typeof y&&null!==y)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");function v(){this.constructor=R}P(R,y),R.prototype=null===y?Object.create(y):(v.prototype=y.prototype,new v)}}(),k=this&&this.__importDefault||function(P){return P&&P.__esModule?P:{default:P}};Object.defineProperty(M,"__esModule",{value:!0});var D=N(15243),B=k(N(76387)),j="geostyler-legend-renderer",W=function(P){function R(y,v,u,p){var _=P.call(this,y,v,u)||this;_.root=null,_.currentContainer=null;var d=document.createElementNS("http://www.w3.org/2000/svg","svg");return _.root=(0,D.select)(d).attr("class",j).attr("viewBox","0 0 ".concat(y[0]," ").concat(y[1])).attr("top",0).attr("left",0).attr("width",y[0]).attr("height",y[1]),_.currentContainer=_.root,p&&((0,D.select)(p).select(".".concat(j)).remove(),p.append(_.root.node())),_}return F(R,P),R.prototype.useContainer=function(y){this.currentContainer=this.root.append("g").attr("class","legend-item").attr("title",y)},R.prototype.useRoot=function(){this.currentContainer=this.root},R.prototype.addTitle=function(y,v,u){this.currentContainer.append("g").append("text").text(y).attr("class","legend-title").attr("text-anchor","start").attr("dx",v).attr("dy",u)},R.prototype.addLabel=function(y,v,u){this.currentContainer.append("text").text(y).attr("x",v).attr("y",u)},R.prototype.addImage=function(y,v,u,p,_,d){return d&&this.currentContainer.append("rect").attr("x",p).attr("y",_).attr("width",v).attr("height",u).style("fill-opacity",0).style("stroke","black"),this.currentContainer.append("svg:image").attr("x",p).attr("y",_).attr("width",v).attr("height",u).attr("href",y),this.root.attr("xmlns","http://www.w3.org/2000/svg"),Promise.resolve()},R.prototype.generate=function(y){var v=this.root.selectAll("g.legend-item");return this.shortenLabels(v,this.maxColumnWidth),this.maxColumnHeight||this.root.attr("viewBox","0 0 ".concat(this.size[0]," ").concat(y)).attr("height",y),this.root.node()},R.prototype.shortenLabels=function(y,v){y.each(function(){var u=(0,D.select)(this),p=u.select("text");if(u.node()instanceof SVGElement&&p.size()){for(var _=p.node(),d=_.getBoundingClientRect().width,w=!1;d>v;)O=(O=p.text()).substring(0,O.length-1),p.text(O),d=_.getBoundingClientRect().width,w=!0;var O;w&&(O=(O=p.text()).substring(0,O.length-3),p.text(O+"..."))}})},R}(B.default);M.default=W},15243:(it,M,N)=>{N.r(M),N.d(M,{create:()=>Oe,creator:()=>W,local:()=>xt,matcher:()=>w,namespace:()=>D,namespaces:()=>k,pointer:()=>At,pointers:()=>Ne,select:()=>wt,selectAll:()=>Te,selection:()=>Re,selector:()=>R,selectorAll:()=>p,style:()=>dt,window:()=>at});var F="http://www.w3.org/1999/xhtml";const k={svg:"http://www.w3.org/2000/svg",xhtml:F,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function D(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),k.hasOwnProperty(e)?{space:k[e],local:t}:t}function B(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===F&&e.documentElement.namespaceURI===F?e.createElement(t):e.createElementNS(n,t)}}function j(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function W(t){var e=D(t);return(e.local?j:B)(e)}function P(){}function R(t){return null==t?P:function(){return this.querySelector(t)}}function v(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}function u(){return[]}function p(t){return null==t?u:function(){return this.querySelectorAll(t)}}function w(t){return function(){return this.matches(t)}}function O(t){return function(e){return e.matches(t)}}var A=Array.prototype.find;function s(){return this.firstElementChild}var b=Array.prototype.filter;function l(){return Array.from(this.children)}function m(t){return new Array(t.length)}function V(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function z(t,e,n,i,r,c){for(var f,h=0,g=e.length,x=c.length;h<x;++h)(f=e[h])?(f.__data__=c[h],i[h]=f):n[h]=new V(t,c[h]);for(;h<g;++h)(f=e[h])&&(r[h]=f)}function X(t,e,n,i,r,c,h){var f,g,K,x=new Map,S=e.length,$=c.length,Q=new Array(S);for(f=0;f<S;++f)(g=e[f])&&(Q[f]=K=h.call(g,g.__data__,f,e)+"",x.has(K)?r[f]=g:x.set(K,g));for(f=0;f<$;++f)K=h.call(t,c[f],f,c)+"",(g=x.get(K))?(i[f]=g,g.__data__=c[f],x.delete(K)):n[f]=new V(t,c[f]);for(f=0;f<S;++f)(g=e[f])&&x.get(Q[f])===g&&(r[f]=g)}function Y(t){return t.__data__}function q(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function nt(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Tt(t){return function(){this.removeAttribute(t)}}function It(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Ft(t,e){return function(){this.setAttribute(t,e)}}function kt(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Dt(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function Mt(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function at(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Vt(t){return function(){this.style.removeProperty(t)}}function Ht(t,e,n){return function(){this.style.setProperty(t,e,n)}}function zt(t,e,n){return function(){var i=e.apply(this,arguments);null==i?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}function dt(t,e){return t.style.getPropertyValue(e)||at(t).getComputedStyle(t,null).getPropertyValue(e)}function Ut(t){return function(){delete this[t]}}function Wt(t,e){return function(){this[t]=e}}function Xt(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function yt(t){return t.trim().split(/^|\s+/)}function ct(t){return t.classList||new pt(t)}function pt(t){this._node=t,this._names=yt(t.getAttribute("class")||"")}function vt(t,e){for(var n=ct(t),i=-1,r=e.length;++i<r;)n.add(e[i])}function gt(t,e){for(var n=ct(t),i=-1,r=e.length;++i<r;)n.remove(e[i])}function Kt(t){return function(){vt(this,t)}}function $t(t){return function(){gt(this,t)}}function Jt(t,e){return function(){(e.apply(this,arguments)?vt:gt)(this,t)}}function Zt(){this.textContent=""}function qt(t){return function(){this.textContent=t}}function jt(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function ee(){this.innerHTML=""}function ne(t){return function(){this.innerHTML=t}}function re(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function oe(){this.nextSibling&&this.parentNode.appendChild(this)}function ue(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function le(){return null}function he(){var t=this.parentNode;t&&t.removeChild(this)}function ye(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function pe(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function we(t){return function(){var e=this.__on;if(e){for(var c,n=0,i=-1,r=e.length;n<r;++n)c=e[n],t.type&&c.type!==t.type||c.name!==t.name?e[++i]=c:this.removeEventListener(c.type,c.listener,c.options);++i?e.length=i:delete this.__on}}}function xe(t,e,n){return function(){var r,i=this.__on,c=function _e(t){return function(e){t.call(this,e,this.__data__)}}(e);if(i)for(var h=0,f=i.length;h<f;++h)if((r=i[h]).type===t.type&&r.name===t.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=c,r.options=n),void(r.value=e);this.addEventListener(t.type,c,n),r={type:t.type,name:t.name,value:e,listener:c,options:n},i?i.push(r):this.__on=[r]}}function _t(t,e,n){var i=at(t),r=i.CustomEvent;"function"==typeof r?r=new r(e,n):(r=i.document.createEvent("Event"),n?(r.initEvent(e,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r)}function Ae(t,e){return function(){return _t(this,t,e)}}function Ce(t,e){return function(){return _t(this,t,e.apply(this,arguments))}}V.prototype={constructor:V,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}},pt.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var lt=[null];function G(t,e){this._groups=t,this._parents=e}function mt(){return new G([[document.documentElement]],lt)}G.prototype=mt.prototype={constructor:G,select:function y(t){"function"!=typeof t&&(t=R(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var g,x,c=e[r],h=c.length,f=i[r]=new Array(h),S=0;S<h;++S)(g=c[S])&&(x=t.call(g,g.__data__,S,c))&&("__data__"in g&&(x.__data__=g.__data__),f[S]=x);return new G(i,this._parents)},selectAll:function d(t){t="function"==typeof t?function _(t){return function(){return v(t.apply(this,arguments))}}(t):p(t);for(var e=this._groups,n=e.length,i=[],r=[],c=0;c<n;++c)for(var g,h=e[c],f=h.length,x=0;x<f;++x)(g=h[x])&&(i.push(t.call(g,g.__data__,x,h)),r.push(g));return new G(i,r)},selectChild:function a(t){return this.select(null==t?s:function o(t){return function(){return A.call(this.children,t)}}("function"==typeof t?t:O(t)))},selectChildren:function T(t){return this.selectAll(null==t?l:function C(t){return function(){return b.call(this.children,t)}}("function"==typeof t?t:O(t)))},filter:function I(t){"function"!=typeof t&&(t=w(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var g,c=e[r],h=c.length,f=i[r]=[],x=0;x<h;++x)(g=c[x])&&t.call(g,g.__data__,x,c)&&f.push(g);return new G(i,this._parents)},data:function E(t,e){if(!arguments.length)return Array.from(this,Y);var n=e?X:z,i=this._parents,r=this._groups;"function"!=typeof t&&(t=function H(t){return function(){return t}}(t));for(var c=r.length,h=new Array(c),f=new Array(c),g=new Array(c),x=0;x<c;++x){var S=i[x],$=r[x],Q=$.length,K=q(t.call(S,S&&S.__data__,x,i)),Z=K.length,Ct=f[x]=new Array(Z),St=h[x]=new Array(Z);n(S,$,Ct,St,g[x]=new Array(Q),K,e);for(var Et,Lt,rt=0,ut=0;rt<Z;++rt)if(Et=Ct[rt]){for(rt>=ut&&(ut=rt+1);!(Lt=St[ut])&&++ut<Z;);Et._next=Lt||null}}return(h=new G(h,i))._enter=f,h._exit=g,h},enter:function L(){return new G(this._enter||this._groups.map(m),this._parents)},exit:function U(){return new G(this._exit||this._groups.map(m),this._parents)},join:function tt(t,e,n){var i=this.enter(),r=this,c=this.exit();return"function"==typeof t?(i=t(i))&&(i=i.selection()):i=i.append(t+""),null!=e&&(r=e(r))&&(r=r.selection()),null==n?c.remove():n(c),i&&r?i.merge(r).order():r},merge:function J(t){for(var e=t.selection?t.selection():t,n=this._groups,i=e._groups,r=n.length,h=Math.min(r,i.length),f=new Array(r),g=0;g<h;++g)for(var K,x=n[g],S=i[g],$=x.length,Q=f[g]=new Array($),Z=0;Z<$;++Z)(K=x[Z]||S[Z])&&(Q[Z]=K);for(;g<r;++g)f[g]=n[g];return new G(f,this._parents)},selection:function Le(){return this},order:function et(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var h,i=t[e],r=i.length-1,c=i[r];--r>=0;)(h=i[r])&&(c&&4^h.compareDocumentPosition(c)&&c.parentNode.insertBefore(h,c),c=h);return this},sort:function ot(t){function e($,Q){return $&&Q?t($.__data__,Q.__data__):!$-!Q}t||(t=nt);for(var n=this._groups,i=n.length,r=new Array(i),c=0;c<i;++c){for(var x,h=n[c],f=h.length,g=r[c]=new Array(f),S=0;S<f;++S)(x=h[S])&&(g[S]=x);g.sort(e)}return new G(r,this._parents).order()},call:function st(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function ht(){return Array.from(this)},node:function Rt(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,c=i.length;r<c;++r){var h=i[r];if(h)return h}return null},size:function Ot(){let t=0;for(const e of this)++t;return t},empty:function Pt(){return!this.node()},each:function Nt(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var f,r=e[n],c=0,h=r.length;c<h;++c)(f=r[c])&&t.call(f,f.__data__,c,r);return this},attr:function Bt(t,e){var n=D(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((null==e?n.local?It:Tt:"function"==typeof e?n.local?Mt:Dt:n.local?kt:Ft)(n,e))},style:function Gt(t,e,n){return arguments.length>1?this.each((null==e?Vt:"function"==typeof e?zt:Ht)(t,e,n??"")):dt(this.node(),t)},property:function Yt(t,e){return arguments.length>1?this.each((null==e?Ut:"function"==typeof e?Xt:Wt)(t,e)):this.node()[t]},classed:function Qt(t,e){var n=yt(t+"");if(arguments.length<2){for(var i=ct(this.node()),r=-1,c=n.length;++r<c;)if(!i.contains(n[r]))return!1;return!0}return this.each(("function"==typeof e?Jt:e?Kt:$t)(n,e))},text:function te(t){return arguments.length?this.each(null==t?Zt:("function"==typeof t?jt:qt)(t)):this.node().textContent},html:function ie(t){return arguments.length?this.each(null==t?ee:("function"==typeof t?re:ne)(t)):this.node().innerHTML},raise:function se(){return this.each(oe)},lower:function ae(){return this.each(ue)},append:function ce(t){var e="function"==typeof t?t:W(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},insert:function fe(t,e){var n="function"==typeof t?t:W(t),i=null==e?le:"function"==typeof e?e:R(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})},remove:function de(){return this.each(he)},clone:function ve(t){return this.select(t?pe:ye)},datum:function ge(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function be(t,e,n){var r,h,i=function me(t){return t.trim().split(/^|\s+/).map(function(e){var n="",i=e.indexOf(".");return i>=0&&(n=e.slice(i+1),e=e.slice(0,i)),{type:e,name:n}})}(t+""),c=i.length;if(!(arguments.length<2)){for(f=e?xe:we,r=0;r<c;++r)this.each(f(i[r],e,n));return this}var f=this.node().__on;if(f)for(var S,g=0,x=f.length;g<x;++g)for(r=0,S=f[g];r<c;++r)if((h=i[r]).type===S.type&&h.name===S.name)return S.value},dispatch:function Se(t,e){return this.each(("function"==typeof e?Ce:Ae)(t,e))},[Symbol.iterator]:function*Ee(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var h,i=t[e],r=0,c=i.length;r<c;++r)(h=i[r])&&(yield h)}};const Re=mt;function wt(t){return"string"==typeof t?new G([[document.querySelector(t)]],[document.documentElement]):new G([[t]],lt)}function Oe(t){return wt(W(t).call(document.documentElement))}var Pe=0;function xt(){return new ft}function ft(){this._="@"+(++Pe).toString(36)}function bt(t){let e;for(;e=t.sourceEvent;)t=e;return t}function At(t,e){if(t=bt(t),void 0===e&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,[(i=i.matrixTransform(e.getScreenCTM().inverse())).x,i.y]}if(e.getBoundingClientRect){var r=e.getBoundingClientRect();return[t.clientX-r.left-e.clientLeft,t.clientY-r.top-e.clientTop]}}return[t.pageX,t.pageY]}function Ne(t,e){return t.target&&(t=bt(t),void 0===e&&(e=t.currentTarget),t=t.touches||[t]),Array.from(t,n=>At(n,e))}function Te(t){return"string"==typeof t?new G([document.querySelectorAll(t)],[document.documentElement]):new G([v(t)],lt)}ft.prototype=xt.prototype={constructor:ft,get:function(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}}}}]);
//# sourceMappingURL=default-node_modules_geostyler-legend_dist_LegendRenderer_LegendRenderer_js.js.map