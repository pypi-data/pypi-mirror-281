"use strict";(self.webpackChunkhslayers_cesium_app=self.webpackChunkhslayers_cesium_app||[]).push([[852],{15852:(ht,A,c)=>{c.r(A),c.d(A,{default:()=>_t});var h=c(94691),k=c(76983),D=c(61552),L=c(49964),O=c(69664),t=c(12332),M=c(45363),o=c(47778),d=c(88315);const u=[null,"http://www.topografix.com/GPX/1/0","http://www.topografix.com/GPX/1/1"],S={rte:W,trk:x,wpt:N},w=(0,t.Dm)(u,{rte:(0,t.VT)(W),trk:(0,t.VT)(x),wpt:(0,t.VT)(N)}),U=(0,t.Dm)(u,{text:(0,t.kW)(o.E3,"linkText"),type:(0,t.kW)(o.E3,"linkType")}),B=(0,t.Dm)(u,{name:(0,t.kW)(o.E3),email:function ut(r,e){const n=e[e.length-1],s=r.getAttribute("id"),i=r.getAttribute("domain");null!==s&&null!==i&&(n.email=`${s}@${i}`)},link:g}),K=(0,t.Dm)(u,{name:(0,t.kW)(o.E3),desc:(0,t.kW)(o.E3),author:(0,t.kW)(function it(r,e){const n=(0,t.eY)({},B,r,e);if(n)return n}),copyright:(0,t.kW)(function mt(r,e){const n=(0,t.eY)({},C,r,e);if(n){const s=r.getAttribute("author");return null!==s&&(n.author=s),n}}),link:g,time:(0,t.kW)(o._I),keywords:(0,t.kW)(o.E3),bounds:function at(r,e){const n=e[e.length-1],s=r.getAttribute("minlat"),i=r.getAttribute("minlon"),m=r.getAttribute("maxlat"),a=r.getAttribute("maxlon");null!==i&&null!==s&&null!==a&&null!==m&&(n.bounds=[[parseFloat(i),parseFloat(s)],[parseFloat(a),parseFloat(m)]])},extensions:f}),C=(0,t.Dm)(u,{year:(0,t.kW)(o.yg),license:(0,t.kW)(o.E3)}),v=(0,t.Dm)(u,{rte:(0,t.mm)(function Et(r,e,n){const s=n[0],i=e.getProperties(),m={node:r};m.properties=i;const a=e.getGeometry();if("LineString"==a.getType()){const _=(0,d.hX)(a,!0,s);m.geometryLayout=_.getLayout(),i.rtept=_.getCoordinates()}const l=z[n[n.length-1].node.namespaceURI],E=(0,t.Gl)(i,l);(0,t.NQ)(m,J,t.OL,E,n,l)}),trk:(0,t.mm)(function dt(r,e,n){const s=n[0],i=e.getProperties(),m={node:r};m.properties=i;const a=e.getGeometry();if("MultiLineString"==a.getType()){const _=(0,d.hX)(a,!0,s);i.trkseg=_.getLineStrings()}const l=b[n[n.length-1].node.namespaceURI],E=(0,t.Gl)(i,l);(0,t.NQ)(m,j,t.OL,E,n,l)}),wpt:(0,t.mm)(function ft(r,e,n){const s=n[0],i=n[n.length-1];i.properties=e.getProperties();const m=e.getGeometry();if("Point"==m.getType()){const a=(0,d.hX)(m,!0,s);i.geometryLayout=a.getLayout(),T(r,a.getCoordinates(),n)}})}),X=(0,t.Dm)(u,{name:(0,t.kW)(o.E3),cmt:(0,t.kW)(o.E3),desc:(0,t.kW)(o.E3),src:(0,t.kW)(o.E3),link:g,number:(0,t.kW)(o.yg),extensions:f,type:(0,t.kW)(o.E3),rtept:function lt(r,e){const n=(0,t.eY)({},Y,r,e);if(n){const s=e[e.length-1];R(s.flatCoordinates,s.layoutOptions,r,n)}}}),Y=(0,t.Dm)(u,{ele:(0,t.kW)(o.e4),time:(0,t.kW)(o._I)}),G=(0,t.Dm)(u,{name:(0,t.kW)(o.E3),cmt:(0,t.kW)(o.E3),desc:(0,t.kW)(o.E3),src:(0,t.kW)(o.E3),link:g,number:(0,t.kW)(o.yg),type:(0,t.kW)(o.E3),extensions:f,trkseg:function ct(r,e){const n=e[e.length-1];(0,t.UN)(Z,r,e),n.ends.push(n.flatCoordinates.length)}}),Z=(0,t.Dm)(u,{trkpt:function pt(r,e){const n=(0,t.eY)({},Q,r,e);if(n){const s=e[e.length-1];R(s.flatCoordinates,s.layoutOptions,r,n)}}}),Q=(0,t.Dm)(u,{ele:(0,t.kW)(o.e4),time:(0,t.kW)(o._I)}),V=(0,t.Dm)(u,{ele:(0,t.kW)(o.e4),time:(0,t.kW)(o._I),magvar:(0,t.kW)(o.e4),geoidheight:(0,t.kW)(o.e4),name:(0,t.kW)(o.E3),cmt:(0,t.kW)(o.E3),desc:(0,t.kW)(o.E3),src:(0,t.kW)(o.E3),link:g,sym:(0,t.kW)(o.E3),type:(0,t.kW)(o.E3),fix:(0,t.kW)(o.E3),sat:(0,t.kW)(o.yg),hdop:(0,t.kW)(o.e4),vdop:(0,t.kW)(o.e4),pdop:(0,t.kW)(o.e4),ageofdgpsdata:(0,t.kW)(o.e4),dgpsid:(0,t.kW)(o.yg),extensions:f}),H=["text","type"],$=(0,t.Dm)(u,{text:(0,t.mm)(o.uB),type:(0,t.mm)(o.uB)}),z=(0,t.Dm)(u,["name","cmt","desc","src","link","number","type","rtept"]),J=(0,t.Dm)(u,{name:(0,t.mm)(o.uB),cmt:(0,t.mm)(o.uB),desc:(0,t.mm)(o.uB),src:(0,t.mm)(o.uB),link:(0,t.mm)(P),number:(0,t.mm)(o.pE),type:(0,t.mm)(o.uB),rtept:(0,t.gN)((0,t.mm)(T))}),q=(0,t.Dm)(u,["ele","time"]),b=(0,t.Dm)(u,["name","cmt","desc","src","link","number","type","trkseg"]),j=(0,t.Dm)(u,{name:(0,t.mm)(o.uB),cmt:(0,t.mm)(o.uB),desc:(0,t.mm)(o.uB),src:(0,t.mm)(o.uB),link:(0,t.mm)(P),number:(0,t.mm)(o.pE),type:(0,t.mm)(o.uB),trkseg:(0,t.gN)((0,t.mm)(function gt(r,e,n){const s={node:r};s.geometryLayout=e.getLayout(),s.properties={},(0,t.NQ)(s,et,tt,e.getCoordinates(),n)}))}),tt=(0,t.X1)("trkpt"),et=(0,t.Dm)(u,{trkpt:(0,t.mm)(T)}),nt=(0,t.Dm)(u,["ele","time","magvar","geoidheight","name","cmt","desc","src","link","sym","type","fix","sat","hdop","vdop","pdop","ageofdgpsdata","dgpsid"]),st=(0,t.Dm)(u,{ele:(0,t.mm)(o.Ko),time:(0,t.mm)(o.cS),magvar:(0,t.mm)(o.Ko),geoidheight:(0,t.mm)(o.Ko),name:(0,t.mm)(o.uB),cmt:(0,t.mm)(o.uB),desc:(0,t.mm)(o.uB),src:(0,t.mm)(o.uB),link:(0,t.mm)(P),sym:(0,t.mm)(o.uB),type:(0,t.mm)(o.uB),fix:(0,t.mm)(o.uB),sat:(0,t.mm)(o.pE),hdop:(0,t.mm)(o.Ko),vdop:(0,t.mm)(o.Ko),pdop:(0,t.mm)(o.Ko),ageofdgpsdata:(0,t.mm)(o.Ko),dgpsid:(0,t.mm)(o.pE)}),ot={Point:"wpt",LineString:"rte",MultiLineString:"trk"};function rt(r,e,n){const s=r.getGeometry();if(s){const i=ot[s.getType()];if(i)return(0,t.qq)(e[e.length-1].node.namespaceURI,i)}}function R(r,e,n,s){return r.push(parseFloat(n.getAttribute("lon")),parseFloat(n.getAttribute("lat"))),"ele"in s?(r.push(s.ele),delete s.ele,e.hasZ=!0):r.push(0),"time"in s?(r.push(s.time),delete s.time,e.hasM=!0):r.push(0),r}function y(r,e,n){let s="XY",i=2;if(r.hasZ&&r.hasM?(s="XYZM",i=4):r.hasZ?(s="XYZ",i=3):r.hasM&&(s="XYM",i=3),4!==i){for(let m=0,a=e.length/4;m<a;m++)e[m*i]=e[4*m],e[m*i+1]=e[4*m+1],r.hasZ&&(e[m*i+2]=e[4*m+2]),r.hasM&&(e[m*i+2]=e[4*m+3]);if(e.length=e.length/4*i,n)for(let m=0,a=n.length;m<a;m++)n[m]=n[m]/4*i}return s}function g(r,e){const n=e[e.length-1],s=r.getAttribute("href");null!==s&&(n.link=s),(0,t.UN)(U,r,e)}function f(r,e){e[e.length-1].extensionsNode_=r}function W(r,e){const n=e[0],s=(0,t.eY)({flatCoordinates:[],layoutOptions:{}},X,r,e);if(!s)return;const i=s.flatCoordinates;delete s.flatCoordinates;const m=s.layoutOptions;delete s.layoutOptions;const a=y(m,i),p=new k.default(i,a);(0,d.hX)(p,!1,n);const l=new h.default(p);return l.setProperties(s,!0),l}function x(r,e){const n=e[0],s=(0,t.eY)({flatCoordinates:[],ends:[],layoutOptions:{}},G,r,e);if(!s)return;const i=s.flatCoordinates;delete s.flatCoordinates;const m=s.ends;delete s.ends;const a=s.layoutOptions;delete s.layoutOptions;const p=y(a,i,m),l=new D.A(i,p,m);(0,d.hX)(l,!1,n);const E=new h.default(l);return E.setProperties(s,!0),E}function N(r,e){const n=e[0],s=(0,t.eY)({},V,r,e);if(!s)return;const i={},m=R([],i,r,s),a=y(i,m),p=new L.default(m,a);(0,d.hX)(p,!1,n);const l=new h.default(p);return l.setProperties(s,!0),l}function P(r,e,n){r.setAttribute("href",e);const i=n[n.length-1].properties;(0,t.NQ)({node:r},$,t.OL,[i.linkText,i.linkType],n,H)}function T(r,e,n){const s=n[n.length-1],m=s.node.namespaceURI,a=s.properties;switch(r.setAttributeNS(null,"lat",String(e[1])),r.setAttributeNS(null,"lon",String(e[0])),s.geometryLayout){case"XYZM":0!==e[3]&&(a.time=e[3]);case"XYZ":0!==e[2]&&(a.ele=e[2]);break;case"XYM":0!==e[2]&&(a.time=e[2])}const l="rtept"==r.nodeName?q[m]:nt[m],E=(0,t.Gl)(a,l);(0,t.NQ)({node:r,properties:a},st,t.OL,E,n,l)}const _t=class F extends O.A{constructor(e){super(),e=e||{},this.dataProjection=(0,M.get)("EPSG:4326"),this.readExtensions_=e.readExtensions}handleReadExtensions_(e){e||(e=[]);for(let n=0,s=e.length;n<s;++n){const i=e[n];if(this.readExtensions_){const m=i.get("extensionsNode_")||null;this.readExtensions_(i,m)}i.set("extensionsNode_",void 0)}}readMetadata(e){return e?"string"==typeof e?this.readMetadataFromDocument((0,t.qg)(e)):(0,t.wz)(e)?this.readMetadataFromDocument(e):this.readMetadataFromNode(e):null}readMetadataFromDocument(e){for(let n=e.firstChild;n;n=n.nextSibling)if(n.nodeType===Node.ELEMENT_NODE){const s=this.readMetadataFromNode(n);if(s)return s}return null}readMetadataFromNode(e){if(!u.includes(e.namespaceURI))return null;for(let n=e.firstElementChild;n;n=n.nextElementSibling)if(u.includes(n.namespaceURI)&&"metadata"===n.localName)return(0,t.eY)({},K,n,[]);return null}readFeatureFromNode(e,n){if(!u.includes(e.namespaceURI))return null;const s=S[e.localName];if(!s)return null;const i=s(e,[this.getReadOptions(e,n)]);return i?(this.handleReadExtensions_([i]),i):null}readFeaturesFromNode(e,n){if(!u.includes(e.namespaceURI))return[];if("gpx"==e.localName){const s=(0,t.eY)([],w,e,[this.getReadOptions(e,n)]);return s?(this.handleReadExtensions_(s),s):[]}return[]}writeFeaturesNode(e,n){n=this.adaptOptions(n);const s=(0,t.qq)("http://www.topografix.com/GPX/1/1","gpx");return s.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xsi",t.pF),s.setAttributeNS(t.pF,"xsi:schemaLocation","http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd"),s.setAttribute("version","1.1"),s.setAttribute("creator","OpenLayers"),(0,t.NQ)({node:s},v,rt,e,[n]),s}}}}]);
//# sourceMappingURL=852.js.map