{"version":3,"file":"default-projects_hslayers_components_legend_index_ts.js","mappings":"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","sources":["webpack:///default-projects_hslayers_components_legend_index_ts.js"],"sourcesContent":["\"use strict\";(self.webpackChunkhslayers_app=self.webpackChunkhslayers_app||[]).push([[\"default-projects_hslayers_components_legend_index_ts\"],{87751:(A,C,s)=>{s.r(C),s.d(C,{HsLegendComponent:()=>r,HsLegendLayerComponent:()=>M.h,HsLegendLayerStaticComponent:()=>u.z,HsLegendLayerStaticService:()=>t.P,HsLegendLayerVectorComponent:()=>f.i,HsLegendModule:()=>l,HsLegendService:()=>D.c});var u=s(78217),t=s(11725),f=s(72589),M=s(90565),m=s(10467),O=s(21413),E=s(56977),_=s(25849),p=s(83211),e=s(93953),D=s(18999),T=s(14608),U=s(27426),I=s(11194),x=s(91459),h=s(60177),S=s(89417),R=s(70258),B=s(77266),H=s(31968);const K=()=>({module:\"LAYERS\"});function a(o,v){1&o&&(e.j41(0,\"span\")(1,\"p\",12),e.EFF(2),e.nI1(3,\"translateHs\"),e.k0s()()),2&o&&(e.R7$(2),e.JRh(e.bMT(3,1,\"LEGEND.noLegendExists\")))}function L(o,v){if(1&o&&(e.j41(0,\"li\",13)(1,\"div\"),e.EFF(2),e.nI1(3,\"translateHs\"),e.nrm(4,\"hs-legend-layer\",14),e.k0s()()),2&o){const i=v.$implicit,n=e.XpG(2);e.Y8G(\"hidden\",!n.hsLegendService.legendValid(i)),e.R7$(2),e.SpI(\" \",e.i5U(3,3,i.title,e.lJ4(6,K)),\" \"),e.R7$(2),e.Y8G(\"layer\",i)}}function g(o,v){if(1&o){const i=e.RV6();e.j41(0,\"div\",1),e.nrm(1,\"hs-panel-header\",2),e.j41(2,\"div\",3)(3,\"p\")(4,\"input\",4),e.nI1(5,\"translateHs\"),e.mxI(\"ngModelChange\",function(d){e.eBV(i);const y=e.XpG();return e.DH7(y.titleSearch,d)||(y.titleSearch=d),e.Njj(d)}),e.bIt(\"input\",function(){e.eBV(i);const d=e.XpG();return e.Njj(d.refreshList())}),e.k0s()(),e.DNE(6,a,4,3,\"span\",5),e.j41(7,\"ul\",6),e.DNE(8,L,5,7,\"li\",7),e.nI1(9,\"filter\"),e.k0s(),e.j41(10,\"div\",8)(11,\"div\",9)(12,\"button\",10),e.nI1(13,\"translateHs\"),e.bIt(\"click\",function(){e.eBV(i);const d=e.XpG();return e.Njj(d.rebuildLegends())}),e.nrm(14,\"i\",11),e.k0s()()()()()}if(2&o){const i=e.XpG();e.Y8G(\"ngClass\",i.panelWidthClass),e.R7$(),e.Y8G(\"panelTabs\",\"LEGEND\"),e.R7$(3),e.Y8G(\"placeholder\",e.bMT(5,7,\"COMMON.filter\")),e.R50(\"ngModel\",i.titleSearch),e.R7$(2),e.Y8G(\"ngIf\",i.noLayerExists()),e.R7$(2),e.Y8G(\"ngForOf\",e.i5U(9,9,i.layerDescriptors,i.legendFilter)),e.R7$(4),e.Y8G(\"title\",e.bMT(13,12,\"COMMON.reload\"))}}let r=(()=>{class o extends _.aH{constructor(i,n,d,y,P,W){super(),this.hsLegendService=i,this.hsMapService=n,this.hsLayerUtilsService=d,this.hsUtilsService=y,this.hsQueuesService=P,this.hsLanguageService=W,this.layerDescriptors=[],this.titleSearch=\"\",this.name=\"legend\",this.end=new O.B,this.legendFilter=G=>new RegExp(this.titleSearch,\"i\").test(G.title)}ngOnDestroy(){this.end.next(),this.end.complete()}ngOnInit(){this.hsMapService.loaded().then(i=>{i.getLayers().on(\"add\",n=>this.layerAdded(n)),i.getLayers().on(\"remove\",n=>{this.removeLayerFromLegends(n.element)}),this.buildLegendsForLayers(i)}),super.ngOnInit()}addLayerToLegends(i){var n=this;return(0,m.A)(function*(){const d=yield n.hsLegendService.getLayerLegendDescriptor(i);if(d){const y=i.getSource();n.hsUtilsService.instOf(y,p.Z8)&&y.colorMapChanged.pipe((0,E.Q)(n.end)).subscribe(()=>{n.layerSourcePropChanged({target:y})}),n.layerDescriptors.push(d),n.refreshList(),i.on(\"change:visible\",P=>n.layerVisibilityChanged(P)),n.hsLayerUtilsService.isLayerWMS(i)&&i.getSource()?.on(\"change\",P=>{n.hsUtilsService.debounce(n.layerSourcePropChanged(P),100,!1,n)})}})()}rebuildLegends(){this.layerDescriptors=[],this.buildLegendsForLayers(this.hsMapService.getMap())}noLayerExists(){return 0==this.layerDescriptors.filter(n=>n.visible).length}removeLayerFromLegends(i){for(let n=0;n<this.layerDescriptors.length;n++)if(this.layerDescriptors[n].lyr==i){this.layerDescriptors.splice(n,1),this.refreshList();break}}buildLegendsForLayers(i){i.getLayers().forEach(n=>{this.layerAdded({element:n})})}layerAdded(i){var n=this;this.hsQueuesService.ensureQueue(\"addLayerToLegends\",3,1e4).push(function(){var y=(0,m.A)(function*(P){yield n.addLayerToLegends(i.element),P(null)});return function(P){return y.apply(this,arguments)}}())}layerVisibilityChanged(i){const n=this.findLayerDescriptor(i.target);n&&(n.visible=i.target.getVisible())}layerSourcePropChanged(i){const n=this.findLayerDescriptorBySource(i.target);n&&this.hsLegendService.getLayerLegendDescriptor(n.lyr).then(d=>{(d.subLayerLegends!=n.subLayerLegends||d.title!=n.title||this.hsLayerUtilsService.isLayerIDW(n.lyr))&&(this.layerDescriptors[this.layerDescriptors.indexOf(n)]=d,this.refreshList())})}findLayerDescriptor(i){return this.layerDescriptors.find(n=>n.lyr==i)}findLayerDescriptorBySource(i){const n=this.layerDescriptors.filter(d=>d.lyr.getSource()==i);if(n.length>0)return n[0]}refreshList(){this.layerDescriptors=Array.from(this.layerDescriptors)}static#e=this.\\u0275fac=function(n){return new(n||o)(e.rXU(D.c),e.rXU(T.F),e.rXU(U.Xp),e.rXU(U.MJ),e.rXU(I.x),e.rXU(x.LJ))};static#t=this.\\u0275cmp=e.VBU({type:o,selectors:[[\"hs-legend\"]],features:[e.Vt3],decls:2,vars:3,consts:[[\"class\",\"card hs-main-panel\",3,\"ngClass\",4,\"ngIf\"],[1,\"card\",\"hs-main-panel\",3,\"ngClass\"],[\"name\",\"legend\",3,\"panelTabs\"],[1,\"card-body\"],[\"type\",\"text\",1,\"form-control\",\"hs-filter\",3,\"ngModelChange\",\"input\",\"placeholder\",\"ngModel\"],[4,\"ngIf\"],[1,\"list-group\"],[\"class\",\"list-group-item\",3,\"hidden\",4,\"ngFor\",\"ngForOf\"],[1,\"row\",\"justify-content-center\"],[1,\"col\",\"col-md-2\",\"d-flex\",\"justify-content-center\"],[\"type\",\"button\",1,\"btn\",\"btn-light\",\"btn-outline\",\"ng-scope\",3,\"click\",\"title\"],[1,\"icon-refresh\"],[2,\"text-align\",\"center\"],[1,\"list-group-item\",3,\"hidden\"],[3,\"layer\"]],template:function(n,d){1&n&&(e.DNE(0,g,15,14,\"div\",0),e.nI1(1,\"async\")),2&n&&e.Y8G(\"ngIf\",e.bMT(1,1,d.isVisible$))},dependencies:[h.YU,h.Sq,h.bT,S.me,S.BC,S.vS,R.k,M.h,h.Jj,B.L,H.q],encapsulation:2})}return o})();var c=s(21626);let l=(()=>{class o{static#e=this.\\u0275fac=function(n){return new(n||o)};static#t=this.\\u0275mod=e.$C({type:o});static#s=this.\\u0275inj=e.G2t({providers:[(0,c.$R)((0,c.Sx)())],imports:[h.MD,S.YN,_.Zz,_.k4]})}return o})()},78217:(A,C,s)=>{s.d(C,{z:()=>E});var u=s(88716),t=s(93953),f=s(11725),M=s(60177);function m(_,p){if(1&_&&t.nrm(0,\"img\",2),2&_){const e=t.XpG();t.Y8G(\"src\",e.layerLegend.legendImage,t.B4B)}}function O(_,p){if(1&_&&t.nrm(0,\"div\",3),2&_){const e=t.XpG();t.Y8G(\"innerHtml\",e.layerLegend.svgContent,t.npT)}}let E=(()=>{class _{constructor(e){this.hsLegendLayerStaticService=e,this.layerLegend={}}ngOnInit(){(0,u.pL)(this.layer.lyr)&&Object.assign(this.layerLegend,this.hsLegendLayerStaticService.fillContent(this.layer.lyr)),this.layer.lyr.on(\"change\",e=>{(0,u.pL)(this.layer.lyr)!=this.layerLegend.lastLegendImage&&this.hsLegendLayerStaticService.fillContent(this.layer.lyr)})}static#e=this.\\u0275fac=function(D){return new(D||_)(t.rXU(f.P))};static#t=this.\\u0275cmp=t.VBU({type:_,selectors:[[\"hs-legend-layer-static\"]],inputs:{layer:\"layer\"},decls:2,vars:2,consts:[[3,\"src\",4,\"ngIf\"],[3,\"innerHtml\",4,\"ngIf\"],[3,\"src\"],[3,\"innerHtml\"]],template:function(D,T){1&D&&t.DNE(0,m,1,1,\"img\",0)(1,O,1,1,\"div\",1),2&D&&(t.Y8G(\"ngIf\",\"image\"===T.layerLegend.legendType),t.R7$(),t.Y8G(\"ngIf\",\"svg\"===T.layerLegend.legendType))},dependencies:[M.bT],encapsulation:2})}return _})()},11725:(A,C,s)=>{s.d(C,{P:()=>M});var u=s(88716),t=s(93953),f=s(345);let M=(()=>{class m{constructor(E){this.sanitizer=E}fillContent(E){const _={};let p=(0,u.pL)(E);return Array.isArray(p)&&(p=p[0]),p&&(_.lastLegendImage=p,p.indexOf(\"<svg\")>-1?(_.legendType=\"svg\",_.svgContent=this.sanitizer.bypassSecurityTrustHtml(p)):(_.legendType=\"image\",_.legendImage=this.sanitizer.bypassSecurityTrustResourceUrl(p))),_}static#e=this.\\u0275fac=function(_){return new(_||m)(t.KVO(f.up))};static#t=this.\\u0275prov=t.jDH({token:m,factory:m.\\u0275fac,providedIn:\"root\"})}return m})()},72589:(A,C,s)=>{s.d(C,{i:()=>t});var u=s(93953);let t=(()=>{class f{constructor(){}static#e=this.\\u0275fac=function(O){return new(O||f)};static#t=this.\\u0275cmp=u.VBU({type:f,selectors:[[\"hs-legend-vector-layer\"]],inputs:{svg:\"svg\"},decls:1,vars:1,consts:[[1,\"hs-vector-layer-legend\",3,\"innerHtml\"]],template:function(O,E){1&O&&u.nrm(0,\"div\",0),2&O&&u.Y8G(\"innerHtml\",E.svg,u.npT)},encapsulation:2})}return f})()},90565:(A,C,s)=>{s.d(C,{h:()=>K});var u=s(10467),t=s(93953),f=s(89079),M=s(27426),m=s(18999),O=s(5991),E=s(60177),_=s(72589),p=s(78217);const e=(a,L)=>L.name,D=a=>({\"background-color\":a});function T(a,L){if(1&a&&t.nrm(0,\"hs-legend-layer-static\",0),2&a){const g=t.XpG();t.Y8G(\"layer\",g.layer)}}function U(a,L){1&a&&t.nrm(0,\"img\",1),2&a&&t.Y8G(\"src\",L.$implicit,t.B4B)}function I(a,L){if(1&a&&(t.j41(0,\"div\"),t.Z7z(1,U,1,1,\"img\",1,t.Vm6),t.k0s()),2&a){const g=t.XpG();t.R7$(),t.Dyx(g.layer.subLayerLegends)}}function x(a,L){if(1&a&&t.nrm(0,\"hs-legend-vector-layer\",2),2&a){const g=t.XpG(2);t.Y8G(\"svg\",g.layer.svg)}}function h(a,L){if(1&a&&(t.j41(0,\"span\",3),t.EFF(1,\"\\xa0\\xa0\\xa0\"),t.k0s()),2&a){const g=t.XpG().$implicit;t.Y8G(\"ngStyle\",t.eq3(1,D,g.color))}}function S(a,L){if(1&a&&t.nrm(0,\"img\",4),2&a){const g=t.XpG().$implicit,r=t.XpG(3);t.Y8G(\"src\",g.path,t.B4B)(\"height\",g.height||r.defaultIconHeight)}}function R(a,L){if(1&a&&(t.j41(0,\"p\"),t.DNE(1,h,2,3,\"span\",3)(2,S,1,2,\"img\",4),t.EFF(3),t.k0s()),2&a){const g=L.$implicit;t.R7$(),t.vxM(g.color?1:g.path?2:-1),t.R7$(2),t.SpI(\" \",g.name,\" \")}}function B(a,L){if(1&a&&(t.j41(0,\"div\"),t.Z7z(1,R,4,2,\"p\",null,e),t.k0s()),2&a){const g=t.XpG(2);t.R7$(),t.Dyx(g.legendCategories)}}function H(a,L){if(1&a&&t.DNE(0,x,1,1,\"hs-legend-vector-layer\",2)(1,B,3,0,\"div\"),2&a){const g=t.XpG();t.vxM(g.layer.autoLegend?0:-1),t.R7$(),t.vxM(g.hasLegendCategories()?1:-1)}}let K=(()=>{class a{constructor(g,r,c){var l=this;this.hsUtilsService=g,this.hsLegendService=r,this.hsStylerService=c,this.hasLegendCategories=(0,t.vPA)(!1),this.defaultIconHeight=32,this.hsStylerService.onSet.pipe((0,f.pQ)()).subscribe(function(){var o=(0,u.A)(function*(v){l.layer.lyr==v&&(l.layer.svg=yield l.hsLegendService.setSvg(v))});return function(v){return o.apply(this,arguments)}}())}ngOnInit(){this.legendCategories=this.layer.lyr.getSource()?.get(\"legendCategories\"),this.hasLegendCategories.set(this.legendCategories?.length>0)}static#e=this.\\u0275fac=function(r){return new(r||a)(t.rXU(M.MJ),t.rXU(m.c),t.rXU(O.qm))};static#t=this.\\u0275cmp=t.VBU({type:a,selectors:[[\"hs-legend-layer\"]],inputs:{layer:\"layer\"},decls:4,vars:1,consts:[[3,\"layer\"],[\"onerror\",\"this.parentNode.removeChild(this);\",\"onload\",\"if(this.height<6) {this.parentNode.removeChild(this);}\",3,\"src\"],[3,\"svg\"],[3,\"ngStyle\"],[3,\"src\",\"height\"]],template:function(r,c){if(1&r&&(t.j41(0,\"div\"),t.DNE(1,T,1,1,\"hs-legend-layer-static\",0)(2,I,3,0,\"div\")(3,H,2,2),t.k0s()),2&r){let l;t.R7$(),t.vxM(\"static\"===(l=c.layer.type)?1:\"wms\"===l?2:\"vector\"===l?3:-1)}},dependencies:[E.B3,_.i,p.z],encapsulation:2})}return a})()},18999:(A,C,s)=>{s.d(C,{c:()=>a});var u=s(10467),t=s(31262),f=s.n(t),M=s(34958),m=s(47616),O=s(65623),E=s(44298),p=s(17083),D=s(73042),T=s(43839),U=s(83211),I=s(5991),x=s(5964),h=s(88716),S=s(93953),R=s(27426),B=s(42245),H=s(38243),K=s(345);let a=(()=>{class L{constructor(r,c,l,o,v,i){var n=this;this.hsUtilsService=r,this.hsStylerService=c,this.hsLayerUtilsService=l,this.hsLayerSelectorService=o,this.hsLog=v,this.sanitizer=i,this.hsLayerSelectorService.layerSelected.pipe((0,x.p)(d=>!!d)).subscribe(function(){var d=(0,u.A)(function*(y){yield n.getLayerLegendDescriptor(y.layer)});return function(y){return d.apply(this,arguments)}}())}legendValid(r){return void 0!==r&&null!=r.type&&!!([\"vector\",\"wms\",\"static\"].indexOf(r.type)>-1&&r.lyr.getVisible())}getVectorLayerLegendSvg(r){var c=this;return(0,u.A)(function*(){try{if(void 0===r||!r.getStyle())return;const l=p.SldStyleParser.default?new p.SldStyleParser.default:new p.SldStyleParser;let v,o=(0,h.WM)(r);if(o)v=(yield l.readStyle(o)).output;else{let y=r.getStyle();\"function\"==typeof y&&(y=y(new M.default,1));try{v={name:\"\",rules:[{name:\"\",symbolizers:(new E.OlStyleParser).getSymbolizersFromOlStyle(Array.isArray(y)?y:[y])}]}}catch{c.hsLog.warn(\"FlatStyle and FlatStyleLike styles are not yet supported by Geostyler\")}}v||(o=I.lv,v=(yield l.readStyle(o)).output),c.fixOpacity(v);const i={styles:[v],size:[300,200],hideRect:!0},n=f().default?new(f().default)(i):new(f())(i),d=document.createElement(\"div\");return yield n.render(d),d.innerHTML}catch(l){throw l}})()}fixOpacity(r){for(const c of r.rules)for(const l of c.symbolizers)\"Fill\"==l.kind&&l.fillOpacity&&!l.opacity&&(l.opacity=l.fillOpacity)}getLegendUrl(r,c,l){if(!this.hsLayerUtilsService.isLayerWMS(l))return\"\";const v=this.hsLayerUtilsService.getLayerParams(l).VERSION||\"1.3.0\";let i=this.hsLayerUtilsService.getURL(l);i.indexOf(\"proxy4ows\")>-1&&(i=this.hsUtilsService.getParamsFromUrl(i).OWSURL);const n=(0,h.pL)(l);return void 0===n||Array.isArray(n)&&0==n.length?(i+=(i.indexOf(\"?\")>0?\"\":\"?\")+\"&version=\"+v+\"&service=WMS&request=GetLegendGraphic&sld_version=1.1.0&layer=\"+c+\"&format=image%2Fpng\",(void 0===(0,h.cD)(l)||1==(0,h.cD)(l))&&(i=this.hsUtilsService.proxify(i)),i):\"string\"==typeof n?n:Array.isArray(n)?n[0]:void 0}setSvg(r){var c=this;return(0,u.A)(function*(){return c.sanitizer.bypassSecurityTrustHtml(yield c.getVectorLayerLegendSvg(r))})()}generateInterpolatedLayerLegend(r){return{autoLegend:!0,title:(0,h.LK)(r),lyr:r,type:\"vector\",visible:r.getVisible(),svg:this.hsStylerService.generateSVGGradientForColorMap(r)}}getLayerLegendDescriptor(r){var c=this;return(0,u.A)(function*(){if(!(0,h.W1)(r)){if(c.hsLayerUtilsService.isLayerWMS(r)){const l=c.hsLayerUtilsService.getLayerParams(r).LAYERS?.split(\",\");for(let o=0;o<l.length;o++)l[o]=c.getLegendUrl(r.getSource(),l[o],r);return{title:(0,h.LK)(r),lyr:r,type:\"wms\",subLayerLegends:l,visible:r.getVisible()}}return!c.hsUtilsService.instOf(r,m.A)||void 0!==(0,h.lg)(r)&&1!=(0,h.lg)(r)?c.hsUtilsService.instOf(r,O.A)&&c.hsUtilsService.instOf(r.getSource(),D.A)||c.hsUtilsService.instOf(r.getSource(),T.A)?{title:(0,h.LK)(r),lyr:r,type:\"static\",visible:r.getVisible()}:c.hsUtilsService.instOf(r.getSource(),U.Z8)?c.generateInterpolatedLayerLegend(r):void 0:{autoLegend:(0,h.Hn)(r)??!0,title:(0,h.LK)(r),lyr:r,type:\"vector\",visible:r.getVisible(),svg:yield c.setSvg(r)}}})()}static#e=this.\\u0275fac=function(c){return new(c||L)(S.KVO(R.MJ),S.KVO(I.qm),S.KVO(R.Xp),S.KVO(B.lX),S.KVO(H.r),S.KVO(K.up))};static#t=this.\\u0275prov=S.jDH({token:L,factory:L.\\u0275fac,providedIn:\"root\"})}return L})()}}]);"],"names":[],"sourceRoot":""}